- en: <!--yml
  id: totrans-split-0
  prefs: []
  type: TYPE_NORMAL
  zh: <!--yml
- en: 'category: æœªåˆ†ç±»'
  id: totrans-split-1
  prefs: []
  type: TYPE_NORMAL
  zh: ç±»åˆ«ï¼šæœªåˆ†ç±»
- en: 'date: 2024-05-27 14:51:44'
  id: totrans-split-2
  prefs: []
  type: TYPE_NORMAL
  zh: æ—¥æœŸï¼š2024-05-27 14:51:44
- en: -->
  id: totrans-split-3
  prefs: []
  type: TYPE_NORMAL
  zh: -->
- en: How to Summarize Youtube Video using ChatGPT Api and Node.js
  id: totrans-split-4
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: å¦‚ä½•ä½¿ç”¨ChatGPT Apiå’ŒNode.jsæ€»ç»“Youtubeè§†é¢‘
- en: æ¥æºï¼š[https://implementing.substack.com/p/how-to-summarize-youtube-video-using](https://implementing.substack.com/p/how-to-summarize-youtube-video-using)
  id: totrans-split-5
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: æ¥æºï¼š[https://implementing.substack.com/p/how-to-summarize-youtube-video-using](https://implementing.substack.com/p/how-to-summarize-youtube-video-using)
- en: Hey, I'm [Marco](https://www.linkedin.com/in/marco-moauro-b49489162/) and welcome
    to my newsletter!
  id: totrans-split-6
  prefs: []
  type: TYPE_NORMAL
  zh: å—¨ï¼Œæˆ‘æ˜¯[Marco](https://www.linkedin.com/in/marco-moauro-b49489162/)ï¼Œæ¬¢è¿æ¥åˆ°æˆ‘çš„é€šè®¯ï¼
- en: As a software engineer, I created this newsletter to share my first-hand knowledge
    of the development world. Each topic we will explore will provide valuable insights,
    with the goal of inspiring and helping all of you on your journey.
  id: totrans-split-7
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œä¸ºä¸€åè½¯ä»¶å·¥ç¨‹å¸ˆï¼Œæˆ‘åˆ›å»ºäº†è¿™ä¸ªé€šè®¯æ¥åˆ†äº«æˆ‘åœ¨å¼€å‘é¢†åŸŸçš„ç¬¬ä¸€æ‰‹çŸ¥è¯†ã€‚æˆ‘ä»¬å°†æ¢è®¨çš„æ¯ä¸ªä¸»é¢˜éƒ½å°†æä¾›å®è´µçš„è§è§£ï¼Œç›®æ ‡æ˜¯å¯å‘å’Œå¸®åŠ©æ‚¨åœ¨æ‚¨çš„æ—…ç¨‹ä¸­å‰è¡Œã€‚
- en: In this episode I want to bring you the first tutorial, on how to make a system
    in Node.js that starting from a youtube video link generates a summary using OpenAI's
    [completions api](https://platform.openai.com/docs/guides/text-generation/chat-completions-api),
    the same api on which the ChatGPT system is based.
  id: totrans-split-8
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æœ¬æœŸä¸­ï¼Œæˆ‘æƒ³ä¸ºæ‚¨å¸¦æ¥ç¬¬ä¸€ä¸ªæ•™ç¨‹ï¼Œä»‹ç»å¦‚ä½•åœ¨Node.jsä¸­åˆ¶ä½œä¸€ä¸ªç³»ç»Ÿï¼Œä»YouTubeè§†é¢‘é“¾æ¥å¼€å§‹ï¼Œä½¿ç”¨OpenAIçš„[å®ŒæˆAPI](https://platform.openai.com/docs/guides/text-generation/chat-completions-api)ï¼Œè¿™ä¸ChatGPTç³»ç»Ÿæ‰€åŸºäºçš„APIç›¸åŒï¼Œç”Ÿæˆæ‘˜è¦ã€‚
- en: 'You can download all the code shown directly from my Github repository: [https://github.com/marcomoauro/youtube-summarizer](https://github.com/marcomoauro/youtube-summarizer)'
  id: totrans-split-9
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: æ‚¨å¯ä»¥ç›´æ¥ä»æˆ‘çš„Githubå­˜å‚¨åº“ä¸‹è½½æ‰€æœ‰æ˜¾ç¤ºçš„ä»£ç ï¼š[https://github.com/marcomoauro/youtube-summarizer](https://github.com/marcomoauro/youtube-summarizer)
- en: '[Subscribe to Implementing âœ¨](https://implementing.substack.com/subscribe)'
  id: totrans-split-10
  prefs: []
  type: TYPE_NORMAL
  zh: '[è®¢é˜…Implementing âœ¨](https://implementing.substack.com/subscribe)'
- en: '* * *'
  id: totrans-split-11
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: 'The system architecture primarily comprises:'
  id: totrans-split-12
  prefs: []
  type: TYPE_NORMAL
  zh: ç³»ç»Ÿæ¶æ„ä¸»è¦åŒ…æ‹¬ï¼š
- en: Extracting text from YouTube videos
  id: totrans-split-13
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ä»YouTubeè§†é¢‘ä¸­æå–æ–‡æœ¬
- en: Generating text summaries
  id: totrans-split-14
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ç”Ÿæˆæ–‡æœ¬æ‘˜è¦
- en: 'This process involves extracting text from the video and utilizing it for summary
    generation. Various options were considered, including:'
  id: totrans-split-15
  prefs: []
  type: TYPE_NORMAL
  zh: æ­¤è¿‡ç¨‹æ¶‰åŠä»è§†é¢‘ä¸­æå–æ–‡æœ¬å¹¶åˆ©ç”¨å®ƒè¿›è¡Œæ‘˜è¦ç”Ÿæˆã€‚è€ƒè™‘äº†å„ç§é€‰é¡¹ï¼ŒåŒ…æ‹¬ï¼š
- en: The chosen solution involves scraping, which is the most challenging among the
    options. This decision is motivated by the fact that implementing everything independently
    incurs no costs associated with third-party APIs for text extraction. Additionally,
    as a genuine enthusiast, I prefer this approach, given that most of my personal
    projects are founded on this technique.
  id: totrans-split-16
  prefs: []
  type: TYPE_NORMAL
  zh: æ‰€é€‰è§£å†³æ–¹æ¡ˆæ¶‰åŠçˆ¬å–ï¼Œè¿™æ˜¯å„ç§é€‰é¡¹ä¸­æœ€å…·æŒ‘æˆ˜æ€§çš„ã€‚è¿™ä¸€å†³å®šçš„åŠ¨æœºåœ¨äºï¼Œç‹¬ç«‹å®ç°æ‰€æœ‰å†…å®¹ä¸æ¶‰åŠä¸æ–‡æœ¬æå–çš„ç¬¬ä¸‰æ–¹APIç›¸å…³çš„è´¹ç”¨ã€‚æ­¤å¤–ï¼Œä½œä¸ºä¸€ä¸ªçœŸæ­£çš„çˆ±å¥½è€…ï¼Œæˆ‘æ›´å€¾å‘äºè¿™ç§æ–¹æ³•ï¼Œå› ä¸ºæˆ‘å¤§éƒ¨åˆ†çš„ä¸ªäººé¡¹ç›®éƒ½å»ºç«‹åœ¨è¿™ç§æŠ€æœ¯åŸºç¡€ä¹‹ä¸Šã€‚
- en: If you are interested in finding out what are the best practices for web scraping
    sign up for the newsletter, I will be publishing a post about it soon.
  id: totrans-split-17
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å¦‚æœæ‚¨æœ‰å…´è¶£äº†è§£æœ‰å…³ç½‘ç»œçˆ¬å–çš„æœ€ä½³å®è·µï¼Œè¯·è®¢é˜…æˆ‘ä»¬çš„æ–°é—»é€šè®¯ï¼Œæˆ‘å°†å¾ˆå¿«å‘å¸ƒä¸€ç¯‡ç›¸å…³æ–‡ç« ã€‚
- en: After getting the captions, we put them into OpenAI. The first challenge I faced
    was the limit on the maximum size of the text that the completions API can handle.
    This limit depends on the model used; for the 3.5 turbo model, it's specifically
    set at 4.000 tokens.
  id: totrans-split-18
  prefs: []
  type: TYPE_NORMAL
  zh: æ”¶åˆ°å­—å¹•åï¼Œæˆ‘ä»¬å°†å®ƒä»¬è¾“å…¥åˆ°OpenAIä¸­ã€‚æˆ‘é¢ä¸´çš„ç¬¬ä¸€ä¸ªæŒ‘æˆ˜æ˜¯å®ŒæˆAPIèƒ½å¤„ç†çš„æ–‡æœ¬æœ€å¤§å¤§å°çš„é™åˆ¶ã€‚æ­¤é™åˆ¶å–å†³äºæ‰€ä½¿ç”¨çš„æ¨¡å‹ï¼›å¯¹äº3.5 turboæ¨¡å‹ï¼Œå…·ä½“è®¾ç½®ä¸º4,000ä¸ªæ ‡è®°ã€‚
- en: To overcome this limitation, I adopted a recursive approach. The text is divided
    into smaller parts, which are merged into groups and summarized independently;
    this process is repeated until a single output text is generated, corresponding
    to the final summary generated from the intermediate summaries.
  id: totrans-split-19
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†å…‹æœè¿™ä¸€é™åˆ¶ï¼Œæˆ‘é‡‡ç”¨äº†é€’å½’æ–¹æ³•ã€‚å°†æ–‡æœ¬åˆ†æˆè¾ƒå°çš„éƒ¨åˆ†ï¼Œç„¶åå°†å®ƒä»¬åˆå¹¶æˆç»„å¹¶ç‹¬ç«‹è¿›è¡Œæ€»ç»“ï¼›æ­¤è¿‡ç¨‹é‡å¤è¿›è¡Œï¼Œç›´åˆ°ç”Ÿæˆå•ä¸€çš„è¾“å‡ºæ–‡æœ¬ï¼Œå¯¹åº”äºä»ä¸­é—´æ‘˜è¦ç”Ÿæˆçš„æœ€ç»ˆæ‘˜è¦ã€‚
- en: '[Subscribe to Implementing âœ¨](https://implementing.substack.com/subscribe)'
  id: totrans-split-20
  prefs: []
  type: TYPE_NORMAL
  zh: '[è®¢é˜…Implementing âœ¨](https://implementing.substack.com/subscribe)'
- en: '* * *'
  id: totrans-split-21
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: For this tutorial you need to have Yarn and Node.js installed, specifically
    I used the LTS version 20.9.0\. If you don't have Node.js on your machine you
    can install it from the [official website](https://nodejs.org/en).
  id: totrans-split-22
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹äºæœ¬æ•™ç¨‹ï¼Œæ‚¨éœ€è¦å®‰è£…Yarnå’ŒNode.jsï¼Œå…·ä½“æ¥è¯´æˆ‘ä½¿ç”¨çš„æ˜¯LTSç‰ˆæœ¬20.9.0ã€‚å¦‚æœæ‚¨çš„è®¡ç®—æœºä¸Šæ²¡æœ‰å®‰è£…Node.jsï¼Œæ‚¨å¯ä»¥ä»[å®˜æ–¹ç½‘ç«™](https://nodejs.org/en)å®‰è£…ã€‚
- en: 'Starting from my workspaces folder I have created the project folder and the
    npm package:'
  id: totrans-split-23
  prefs: []
  type: TYPE_NORMAL
  zh: ä»æˆ‘çš„å·¥ä½œç©ºé—´æ–‡ä»¶å¤¹å¼€å§‹ï¼Œæˆ‘åˆ›å»ºäº†é¡¹ç›®æ–‡ä»¶å¤¹å’ŒnpmåŒ…ï¼š
- en: '[PRE0]'
  id: totrans-split-24
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'add the clause â€œtype: moduleâ€ to use ES6 syntax:'
  id: totrans-split-25
  prefs: []
  type: TYPE_NORMAL
  zh: 'æ·»åŠ â€œtype: moduleâ€å­å¥ä»¥ä½¿ç”¨ES6è¯­æ³•ï¼š'
- en: '[PRE1]'
  id: totrans-split-26
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: The libraries we need are **Axios**, a library for making HTTP calls, we will
    need to implement the call to the completion, **he** and **striptags** to manipulate
    the HTML, **p-queue** for handle a queue for the promises in order to call OpenAI
    with max X calls in the same moment and **yargs** to build interactive command
    line tools.
  id: totrans-split-27
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬éœ€è¦çš„åº“åŒ…æ‹¬ **Axios**ï¼Œç”¨äºå‘èµ· HTTP è°ƒç”¨ï¼Œæˆ‘ä»¬éœ€è¦å®ç°å¯¹å®Œæˆçš„è°ƒç”¨ï¼Œ**he** å’Œ **striptags** ç”¨äºæ“ä½œ HTMLï¼Œ**p-queue**
    ç”¨äºå¤„ç† Promise çš„é˜Ÿåˆ—ï¼Œä»¥ä¾¿åŒæ—¶æœ€å¤šè°ƒç”¨ X æ¬¡ OpenAIï¼Œä»¥åŠ **yargs** ç”¨äºæ„å»ºäº¤äº’å¼å‘½ä»¤è¡Œå·¥å…·ã€‚
- en: 'You can install it typing:'
  id: totrans-split-28
  prefs: []
  type: TYPE_NORMAL
  zh: å®‰è£…å®ƒåªéœ€é”®å…¥ï¼š
- en: '[PRE2]'
  id: totrans-split-29
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Create the file **getSubtitleFromVideo.js**:'
  id: totrans-split-30
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ›å»ºåä¸º **getSubtitleFromVideo.js** çš„æ–‡ä»¶ï¼š
- en: '[PRE3]'
  id: totrans-split-31
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: The initial function we'll create is designed to use web scraping to fetch the
    HTML content of a YouTube video page. Let's name this function **getHTML**.
  id: totrans-split-32
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å°†åˆ›å»ºçš„åˆå§‹å‡½æ•°æ—¨åœ¨ä½¿ç”¨ç½‘é¡µæŠ“å–è·å– YouTube è§†é¢‘é¡µé¢çš„ HTML å†…å®¹ã€‚è®©æˆ‘ä»¬ç§°æ­¤å‡½æ•°ä¸º **getHTML**ã€‚
- en: '[PRE4]'
  id: totrans-split-33
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Once we get the html we can retrieve the subtitles via this **getSubtitle**
    function:'
  id: totrans-split-34
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€æ—¦è·å–åˆ° HTMLï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ª **getSubtitle** å‡½æ•°æ£€ç´¢å­—å¹•ï¼š
- en: '[PRE5]'
  id: totrans-split-35
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: => Inside the video's HTML, there's a YouTube link directing to their timedtext
    API, where an XML file containing automatic captioning can be found (an example
    is provided [here](https://www.youtube.com/api/timedtext?v=ULDCt13hetw&ei=c5GOZcmyFea26dsP0-ydqAQ&caps=asr&opi=112496729&xoaf=5&hl=it&ip=0.0.0.0&ipbits=0&expire=1703867363&sparams=ip,ipbits,expire,v,ei,caps,opi,xoaf&signature=75063412BCC19F57C0FACAD8F931B04B33607678.3E55E91F52C40D16D66F8420C614830C702CAAB2&key=yt8&kind=asr&lang=en)).
    This XML data is what we extract to generate the summary.
  id: totrans-split-36
  prefs: []
  type: TYPE_NORMAL
  zh: => åœ¨è§†é¢‘çš„ HTML ä¸­ï¼Œæœ‰ä¸€ä¸ªæŒ‡å‘å…¶ timedtext API çš„ YouTube é“¾æ¥ï¼Œå¯ä»¥æ‰¾åˆ°åŒ…å«è‡ªåŠ¨å­—å¹•çš„ XML æ–‡ä»¶ï¼ˆç¤ºä¾‹åœ¨æ­¤å¤„æä¾›
    [here](https://www.youtube.com/api/timedtext?v=ULDCt13hetw&ei=c5GOZcmyFea26dsP0-ydqAQ&caps=asr&opi=112496729&xoaf=5&hl=it&ip=0.0.0.0&ipbits=0&expire=1703867363&sparams=ip,ipbits,expire,v,ei,caps,opi,xoaf&signature=75063412BCC19F57C0FACAD8F931B04B33607678.3E55E91F52C40D16D66F8420C614830C702CAAB2&key=yt8&kind=asr&lang=en)ï¼‰ã€‚æˆ‘ä»¬æå–è¿™äº›
    XML æ•°æ®ä»¥ç”Ÿæˆæ‘˜è¦ã€‚
- en: '**getSubtitleFromVideo.js** file will export the **getSubtitleFromVideo** function.
    This function can be called externally, taking the video link as input and returning
    the corresponding subtitles.'
  id: totrans-split-37
  prefs: []
  type: TYPE_NORMAL
  zh: '**getSubtitleFromVideo.js** æ–‡ä»¶å°†å¯¼å‡º **getSubtitleFromVideo** å‡½æ•°ã€‚æ­¤å‡½æ•°å¯ä»¥ä½œä¸ºå¤–éƒ¨è°ƒç”¨ï¼Œä»¥è§†é¢‘é“¾æ¥ä½œä¸ºè¾“å…¥ï¼Œå¹¶è¿”å›ç›¸åº”çš„å­—å¹•ã€‚'
- en: This is the contents of the file **getSubtitleFromVideo.js:**
  id: totrans-split-38
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯ **getSubtitleFromVideo.js** æ–‡ä»¶çš„å†…å®¹ï¼š
- en: '[PRE6]'
  id: totrans-split-39
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '[Subscribe to Implementing âœ¨](https://implementing.substack.com/subscribe)'
  id: totrans-split-40
  prefs: []
  type: TYPE_NORMAL
  zh: '[è®¢é˜… Implementing âœ¨](https://implementing.substack.com/subscribe)'
- en: After getting the subtitles, the goal is to arrange them in chunks of text and
    then summarize. As mentioned earlier, different models have various maximum context
    limits; for the 3.5 turbo model, it's 4,000 tokens, I made the assumption that
    1 token equals 1 character.
  id: totrans-split-41
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è·å–å­—å¹•ä¹‹åï¼Œç›®æ ‡æ˜¯å°†å®ƒä»¬æ’åˆ—æˆæ–‡æœ¬å—ï¼Œç„¶åè¿›è¡Œæ‘˜è¦ã€‚å¦‚å‰æ‰€è¿°ï¼Œä¸åŒçš„æ¨¡å‹å…·æœ‰ä¸åŒçš„æœ€å¤§ä¸Šä¸‹æ–‡é™åˆ¶ï¼›å¯¹äº 3.5 turbo æ¨¡å‹ï¼Œå®ƒæ˜¯ 4000 ä¸ªæ ‡è®°ï¼Œæˆ‘å‡è®¾
    1 ä¸ªæ ‡è®°ç­‰äº 1 ä¸ªå­—ç¬¦ã€‚
- en: 'So let''s go ahead and create the **splitInChunks.js** file:'
  id: totrans-split-42
  prefs: []
  type: TYPE_NORMAL
  zh: æ‰€ä»¥è®©æˆ‘ä»¬ç»§ç»­åˆ›å»º**splitInChunks.js**æ–‡ä»¶ï¼š
- en: '[PRE7]'
  id: totrans-split-43
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'In this file we are going to export a function with the same name splitInChunks
    that takes care of grouping the individual subtitles of the video frames into
    chunks of up to 4000 words, here is the implementation:'
  id: totrans-split-44
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å°†å¯¼å‡ºä¸€ä¸ªåŒåå‡½æ•° splitInChunksï¼Œè´Ÿè´£å°†è§†é¢‘å¸§çš„å„ä¸ªå­—å¹•åˆ†ç»„æˆæœ€å¤š 4000 ä¸ªå­—çš„å—ï¼Œè¿™é‡Œæ˜¯å®ç°æ–¹æ³•ï¼š
- en: '[PRE8]'
  id: totrans-split-45
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: At this point we have the chunks and we can proceed with the summary step.
  id: totrans-split-46
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬å·²ç»æœ‰äº†è¿™äº›å—ï¼Œå¯ä»¥ç»§ç»­è¿›è¡Œæ‘˜è¦æ­¥éª¤ã€‚
- en: Create a new file **summarizeChunks.js:**
  id: totrans-split-47
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ›å»ºä¸€ä¸ªåä¸º **summarizeChunks.js** çš„æ–°æ–‡ä»¶ï¼š
- en: '[PRE9]'
  id: totrans-split-48
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'we first define the method for calling the OpenAI api:'
  id: totrans-split-49
  prefs: []
  type: TYPE_NORMAL
  zh: é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰è°ƒç”¨ OpenAI API çš„æ–¹æ³•ï¼š
- en: '[PRE10]'
  id: totrans-split-50
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: We submit a prompt to the completions API, comprising a "system" message instructing
    it on what to do, and a "user" message containing the text to be summarized. It's
    important to create an API key on the OpenAI developer portal, just follow this
    [link](https://openai.com/blog/openai-api). Once created, simply insert the key
    into the constant `OPEN_AI_API_KEY`.
  id: totrans-split-51
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å‘å®Œæˆ API æäº¤ä¸€ä¸ªæç¤ºï¼ŒåŒ…æ‹¬ä¸€ä¸ª "system" æ¶ˆæ¯ï¼ŒæŒ‡ç¤ºå®ƒè¦åšä»€ä¹ˆï¼Œä»¥åŠä¸€ä¸ªåŒ…å«è¦æ‘˜è¦çš„æ–‡æœ¬çš„ "user" æ¶ˆæ¯ã€‚åœ¨ OpenAI å¼€å‘è€…é—¨æˆ·ä¸Šåˆ›å»º
    API å¯†é’¥éå¸¸é‡è¦ï¼Œåªéœ€è®¿é—®æ­¤ [link](https://openai.com/blog/openai-api)ã€‚åˆ›å»ºåï¼Œåªéœ€å°†å¯†é’¥æ’å…¥å¸¸é‡ `OPEN_AI_API_KEY`
    ä¸­ã€‚
- en: I've named this function with the underscore (_) prefix because we'll define
    a new function called computeSummaryByAI, which serves as the entry point to OpenAI.
    This function utilizes the p-queue library to manage a maximum number of Promises
    running concurrently, preventing rate-limiting issues and slower response times.
  id: totrans-split-52
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ç”¨ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰å‰ç¼€å‘½åäº†è¿™ä¸ªå‡½æ•°ï¼Œå› ä¸ºæˆ‘ä»¬å°†å®šä¹‰ä¸€ä¸ªåä¸º computeSummaryByAI çš„æ–°å‡½æ•°ï¼Œå®ƒæ˜¯è°ƒç”¨ OpenAI çš„å…¥å£ç‚¹ã€‚è¿™ä¸ªå‡½æ•°åˆ©ç”¨
    p-queue åº“æ¥ç®¡ç†åŒæ—¶è¿è¡Œçš„æœ€å¤§ Promise æ•°é‡ï¼Œé˜²æ­¢é€Ÿç‡é™åˆ¶é—®é¢˜å’Œå“åº”æ—¶é—´å˜æ…¢ã€‚
- en: '[PRE11]'
  id: totrans-split-53
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'With `concurrency: 5` it means that there can be at most 5 calls running to
    OpenAI, all because we will launch calls in "parallel" via the **Promise.all**
    construct.'
  id: totrans-split-54
  prefs: []
  type: TYPE_NORMAL
  zh: 'ä½¿ç”¨ `concurrency: 5` æ„å‘³ç€æœ€å¤šå¯ä»¥åŒæ—¶è¿è¡Œ5æ¬¡å¯¹OpenAIçš„è°ƒç”¨ï¼Œå› ä¸ºæˆ‘ä»¬å°†ä½¿ç”¨ **Promise.all** ç»“æ„å¹¶è¡Œå¯åŠ¨è°ƒç”¨ã€‚'
- en: 'We now come to the core part of the summary mechanism, the function that will
    export the file will be:'
  id: totrans-split-55
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬æ¥åˆ°æ€»ç»“æœºåˆ¶çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œå¯¼å‡ºæ–‡ä»¶çš„å‡½æ•°å°†æ˜¯ï¼š
- en: '[PRE12]'
  id: totrans-split-56
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: This function is responsible for generating an initial summary for each chunk
    to make sense of the content, considering that the chunks contain automatic subtitles
    generated by YouTube. After calculating the summary, if we have only one chunk,
    the process is complete, and the result is ready. Otherwise, we need to proceed
    with the recursive algorithm.
  id: totrans-split-57
  prefs: []
  type: TYPE_NORMAL
  zh: æ­¤åŠŸèƒ½è´Ÿè´£ç”Ÿæˆæ¯ä¸ªå—çš„åˆå§‹æ‘˜è¦ï¼Œä»¥ç†è§£å†…å®¹çš„å«ä¹‰ï¼Œè€ƒè™‘åˆ°å—åŒ…å«ç”±YouTubeç”Ÿæˆçš„è‡ªåŠ¨å­—å¹•ã€‚è®¡ç®—å®Œæ‘˜è¦åï¼Œå¦‚æœåªæœ‰ä¸€ä¸ªå—ï¼Œåˆ™è¿‡ç¨‹å®Œæˆï¼Œç»“æœå‡†å¤‡å°±ç»ªã€‚å¦åˆ™ï¼Œæˆ‘ä»¬éœ€è¦ç»§ç»­ä½¿ç”¨é€’å½’ç®—æ³•ã€‚
- en: 'We now define the recursive function:'
  id: totrans-split-58
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬å®šä¹‰é€’å½’å‡½æ•°ï¼š
- en: '[PRE13]'
  id: totrans-split-59
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'The behavior is as follows:'
  id: totrans-split-60
  prefs: []
  type: TYPE_NORMAL
  zh: è¡Œä¸ºå¦‚ä¸‹ï¼š
- en: If there are fewer than 5 pieces, proceed to the summary by combining the pieces
    into a single text. It is worth noting that we specified a maximum of 200 words
    in the prompt. With 5 pieces, we should have a maximum of 1000 words. However,
    in experimenting, I have noticed that these limits specified in the OpenAI prompt
    are often not met. As a result, I opted for lower thresholds to ensure proper
    operation without running into errors due to too large context.
  id: totrans-split-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å¦‚æœå°‘äº5ä¸ªå—ï¼Œè¯·ç»§ç»­é€šè¿‡å°†å—åˆå¹¶ä¸ºå•ä¸ªæ–‡æœ¬è¿›è¡Œæ‘˜è¦ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬åœ¨æç¤ºä¸­æŒ‡å®šäº†æœ€å¤š200ä¸ªå­—ã€‚æœ‰5ä¸ªå—æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥æœ€å¤šæœ‰1000ä¸ªå­—ã€‚ç„¶è€Œï¼Œåœ¨å®éªŒä¸­ï¼Œæˆ‘æ³¨æ„åˆ°OpenAIæç¤ºä¸­æŒ‡å®šçš„è¿™äº›é™åˆ¶é€šå¸¸ä¸ä¼šè¾¾åˆ°ã€‚å› æ­¤ï¼Œæˆ‘é€‰æ‹©äº†æ›´ä½çš„é˜ˆå€¼ï¼Œä»¥ç¡®ä¿æ­£å¸¸è¿è¡Œè€Œä¸ä¼šå› ä¸ºä¸Šä¸‹æ–‡è¿‡å¤§è€Œå‡ºç°é”™è¯¯ã€‚
- en: If we have more than 5 chunks, we group them into groups of 5, for each we merge
    them into a single text and summarize them. Calls for summaries are executed in
    parallel.
  id: totrans-split-62
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å¦‚æœæˆ‘ä»¬æœ‰è¶…è¿‡5ä¸ªå—ï¼Œæˆ‘ä»¬å°†å®ƒä»¬åˆ†ç»„æˆæ¯ç»„5ä¸ªå—ï¼Œå¯¹æ¯ç»„è¿›è¡Œåˆå¹¶å¹¶è¿›è¡Œæ‘˜è¦ã€‚æ‘˜è¦è°ƒç”¨å¹¶è¡Œæ‰§è¡Œã€‚
- en: Finally, the function relaunches itself by passing the result of the recursive
    step.
  id: totrans-split-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: æœ€åï¼Œå‡½æ•°é€šè¿‡ä¼ é€’é€’å½’æ­¥éª¤çš„ç»“æœæ¥é‡æ–°å¯åŠ¨è‡ªèº«ã€‚
- en: 'All the code shown can be found here: [https://github.com/marcomoauro/youtube-summarizer](https://github.com/marcomoauro/youtube-summarizer)'
  id: totrans-split-64
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: æ‰€æœ‰æ˜¾ç¤ºçš„ä»£ç éƒ½å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°ï¼š[https://github.com/marcomoauro/youtube-summarizer](https://github.com/marcomoauro/youtube-summarizer)
- en: '* * *'
  id: totrans-split-65
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: 'I created a CLI through which you can summarize the videos you want by passing
    the YouTube video link and the language code in which you want the summary, here
    is an example of how to launch it:'
  id: totrans-split-66
  prefs: []
  type: TYPE_NORMAL
  zh: é€šè¿‡åˆ›å»ºä¸€ä¸ªCLIï¼Œæ‚¨å¯ä»¥é€šè¿‡ä¼ é€’YouTubeè§†é¢‘é“¾æ¥å’Œæ‚¨æƒ³è¦æ€»ç»“çš„è¯­è¨€ä»£ç æ¥æ€»ç»“æ‚¨æƒ³è¦çš„è§†é¢‘ï¼Œä»¥ä¸‹æ˜¯å¦‚ä½•å¯åŠ¨å®ƒçš„ç¤ºä¾‹ï¼š
- en: '[PRE14]'
  id: totrans-split-67
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: '*requires that you are in the root of the project and have properly installed
    the dependencies with:'
  id: totrans-split-68
  prefs: []
  type: TYPE_NORMAL
  zh: '*è¦æ±‚æ‚¨ä½äºé¡¹ç›®çš„æ ¹ç›®å½•ï¼Œå¹¶ä¸”å·²æ­£ç¡®å®‰è£…äº†ä¾èµ–é¡¹ï¼š'
- en: '[PRE15]'
  id: totrans-split-69
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: '* * *'
  id: totrans-split-70
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: I have integrated this functionality into my [quickview.email](https://quickview.email/try-summary)
    website. Simply provide the email with which you want to receive the summary,
    the link to the youtube video and the language in which you want to read it.
  id: totrans-split-71
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘å·²å°†æ­¤åŠŸèƒ½é›†æˆåˆ°æˆ‘çš„ [quickview.email](https://quickview.email/try-summary) ç½‘ç«™ä¸­ã€‚åªéœ€æä¾›æ‚¨å¸Œæœ›æ¥æ”¶æ‘˜è¦çš„ç”µå­é‚®ä»¶ï¼ŒYouTubeè§†é¢‘çš„é“¾æ¥ä»¥åŠæ‚¨æƒ³é˜…è¯»çš„è¯­è¨€ã€‚
- en: '[Subscribe to Implementing âœ¨](https://implementing.substack.com/subscribe)'
  id: totrans-split-72
  prefs: []
  type: TYPE_NORMAL
  zh: '[è®¢é˜… Implementing âœ¨](https://implementing.substack.com/subscribe)'
- en: '* * *'
  id: totrans-split-73
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: This same mechanism is the driving force behind my crypto newsletter, are you
    interested in the world of cryptocurrencies but don't have time to stay up-to-date?
    Sign up now to receive daily video summaries!
  id: totrans-split-74
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªæœºåˆ¶ä¹Ÿæ˜¯æˆ‘çš„åŠ å¯†è´§å¸ç®€æŠ¥çš„æ¨åŠ¨åŠ›é‡ï¼Œæ‚¨å¯¹åŠ å¯†è´§å¸ä¸–ç•Œæ„Ÿå…´è¶£ä½†æ²¡æœ‰æ—¶é—´ä¿æŒæœ€æ–°å—ï¼Ÿç«‹å³è®¢é˜…ä»¥æ¥æ”¶æ¯æ—¥è§†é¢‘æ‘˜è¦ï¼
- en: '* * *'
  id: totrans-split-75
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: 'And thatâ€™s it for today! If you are finding this newsletter valuable, consider
    doing any of these:'
  id: totrans-split-76
  prefs: []
  type: TYPE_NORMAL
  zh: å°±æ˜¯è¿™æ ·ï¼å¦‚æœæ‚¨è§‰å¾—è¿™ä»½ç®€æŠ¥æœ‰ä»·å€¼ï¼Œè¯·è€ƒè™‘åšä»¥ä¸‹ä»»ä½•ä¸€ä»¶äº‹ï¼š
- en: ğŸ» **Read with your friends** â€” Implementing lives thanks to word of mouth. Share
    the article with someone who would like it.
  id: totrans-split-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ğŸ» **ä¸æœ‹å‹ä¸€èµ·é˜…è¯»** â€” Implementing çš„å­˜åœ¨å¾—ç›Šäºå£å£ç›¸ä¼ ã€‚ä¸å–œæ¬¢çš„äººåˆ†äº«è¿™ç¯‡æ–‡ç« ã€‚
- en: '[Share](https://implementing.substack.com/p/how-to-summarize-youtube-video-using?utm_source=substack&utm_medium=email&utm_content=share&action=share)'
  id: totrans-split-78
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[åˆ†äº«](https://implementing.substack.com/p/how-to-summarize-youtube-video-using?utm_source=substack&utm_medium=email&utm_content=share&action=share)'
- en: ğŸ“£ **Provide your feedback** - We welcome your thoughts! Please share your opinions
    or suggestions for improving the newsletter, your input helps us adapt the content
    to your tastes.
  id: totrans-split-79
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ğŸ“£ **æä¾›æ‚¨çš„åé¦ˆ** - æˆ‘ä»¬æ¬¢è¿æ‚¨çš„æƒ³æ³•ï¼è¯·åˆ†äº«æ‚¨çš„æ„è§æˆ–æ”¹è¿›ç®€æŠ¥çš„å»ºè®®ï¼Œæ‚¨çš„æ„è§æœ‰åŠ©äºæˆ‘ä»¬è°ƒæ•´å†…å®¹ä»¥è¿åˆæ‚¨çš„å£å‘³ã€‚
- en: '[Leave a comment](https://implementing.substack.com/p/why-i-moved-from-rails-to-nodejs/comments)'
  id: totrans-split-80
  prefs: []
  type: TYPE_NORMAL
  zh: '[ç•™è¨€è¯„è®º](https://implementing.substack.com/p/why-i-moved-from-rails-to-nodejs/comments)'
- en: I wish you a great day! â˜€ï¸
  id: totrans-split-81
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ç¥ä½ æœ‰ä¸ªç¾å¥½çš„ä¸€å¤©ï¼â˜€ï¸
- en: Marco
  id: totrans-split-82
  prefs: []
  type: TYPE_NORMAL
  zh: Marco
