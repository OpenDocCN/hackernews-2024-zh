- en: <!--yml
  id: totrans-0
  prefs: []
  type: TYPE_NORMAL
  zh: <!--yml
- en: 'category: 未分类'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 'category: 未分类'
- en: 'date: 2024-05-27 14:48:20'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 日期：2024-05-27 14:48:20
- en: -->
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: -->
- en: 'True Tales of Survival: The $500 million dollar typo'
  id: totrans-4
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 生存的真实故事：五亿美元的错字
- en: 来源：[https://www.cockroachlabs.com/blog/true-tales-survival-usps/](https://www.cockroachlabs.com/blog/true-tales-survival-usps/)
  id: totrans-5
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 来源：[https://www.cockroachlabs.com/blog/true-tales-survival-usps/](https://www.cockroachlabs.com/blog/true-tales-survival-usps/)
- en: '*This happened 20 years ago, but it is an amazing tale of how a series of small
    but unfortunate events can very quickly add up to a very expensive problem. Like
    the time one person fat-fingered the wrong year on a JCL job, Ronald Reagan died,
    and the* [*US postal service lost $500 million.*](https://www.washingtonpost.com/archive/politics/2004/06/14/taxpayers-take-hit-on-reagan-holiday/8e5d7743-a6b4-447c-9b2f-24062fa44070/)
    *As told by Jeff White, one-time senior manager of database operations and now
    Enterprise Architecture Manager for Cockroach Labs.*'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: '*这件事发生在20年前，但这是一个令人惊讶的故事，说明一系列小但不幸的事件如何迅速累积成一个非常昂贵的问题。就像有一次有人在JCL作业上误输入了错误的年份，结果罗纳德·里根去世了，而*
    [*美国邮政服务损失了5亿美元*](https://www.washingtonpost.com/archive/politics/2004/06/14/taxpayers-take-hit-on-reagan-holiday/8e5d7743-a6b4-447c-9b2f-24062fa44070/)
    *。由一度担任数据库运营高级经理、现在是Cockroach Labs企业架构经理的杰夫·怀特讲述。*'
- en: The United States Postal Service runs one of the largest and most complex payroll
    systems in the world. It is so complicated that no outside company will take it
    on, not for any amount of money. They’ve tried to outsource it many times and
    everyone takes one look and says hell no, no way we are touching that. At the
    time, USPS payroll was over $1 billion every two weeks — and half of the payroll
    was live checks. So the data center actually printed checks and they would go
    out by the semi-truck load. So a new union contract came in and the operators
    needed to adjust payroll. This should be a simple JCL job — Job Control Language
    (JCL) the scripting language used on IBM mainframes to instruct the system on
    how to run a batch job. However, while making the update, the JCL operator accidentally
    keyed in the wrong year.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 美国邮政服务运行着世界上最大、最复杂的工资系统之一。这个系统如此复杂，以至于没有任何外部公司愿意接手，无论出价多少。他们曾多次尝试外包，但每个人都看了一眼就说绝不，绝对不会碰这个系统。当时，美国邮政服务的工资单每两周超过10亿美元，而且一半的工资是实物支票。因此，数据中心实际上打印支票，然后它们将以半卡车的载量运出。所以一个新的工会合同出现了，操作员需要调整工资单。这应该是一个简单的JCL作业——Job
    Control Language（JCL）是用于指导IBM大型机系统如何运行批处理作业的脚本语言。然而，在进行更新时，JCL操作员错误地输入了错误的年份。
- en: Now, normally that would not be a big deal. Each new pay period started Friday
    at midnight. The day before a pay period would run, the mainframe would do a pre-flight
    calculation on any issues it saw and it would generate a report that would go
    to finance. Every Friday morning finance would go over things and approve the
    batch to run. But then Ronald Reagan died. Now, when a former president dies,
    federal employees get a holiday. [According to the OPM](https://www.opm.gov/policy-data-oversight/pay-leave/leave-administration/fact-sheets/administrative-leave/#:~:text=Beginning%20with%20the%20death%20of,each%20President%20or%20former%20President.),
    Beginning with the death of President Kennedy in 1963, the incumbent President
    has issued an Executive order closing Government offices throughout the world
    as a “mark of respect” upon the death of each President or former President. Ronald
    Reagan died on a Tuesday. There was a lot of indecision inside the federal government
    as to when they would set the federal holiday for his death. And they didn’t decide
    until Thursday, late in the day, that on Friday, they were gonna give all federal
    employees the day off. As a result, no one was scheduled to go in the finance
    department to go look at these reports that were kicked out every Friday morning.
    So the mainframe runs the report.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 通常情况下，这不会成为一个大问题。每个新的支付周期从周五午夜开始。在支付周期运行之前的一天，主机会对它发现的任何问题进行预先计算，并生成一份报告发送给财务部门。每个周五早上，财务部门都会仔细查看情况并批准批处理运行。但是，那时罗纳德·里根去世了。现在，当一位前总统去世时，联邦雇员会放假。[根据OPM的说法](https://www.opm.gov/policy-data-oversight/pay-leave/leave-administration/fact-sheets/administrative-leave/#:~:text=Beginning%20with%20the%20death%20of,each%20President%20or%20former%20President.)，从1963年肯尼迪总统去世开始，现任总统已发布行政命令，在每位总统或前总统去世时关闭全球政府办公室，以表示“敬意”。罗纳德·里根于星期二去世。联邦政府内部对于何时设立他的联邦假日存在很多犹豫不决。直到星期四，直到当天晚些时候，他们才决定在星期五放假。结果，财务部门没有安排任何人去查看每个周五早上生成的这些报告。因此，主机运行报告。
- en: Normally the report printout was around 30 to 40 pages of issues. The pre-flight
    report with these new payroll changes, though, was about 5,000 pages. It printed
    out on Thursday night, as usual, and the print operators dropped it off, as usual,
    in the accounting department for someone to review it on Friday morning. ‘Cuz,
    you know, it’s just a print job, right? But government offices are closed. No
    one looks at it. Eventually midnight rolls around and the mainframe kicks off
    and starts executing EFT deposits and printing paychecks. Once the job wraps up,150,000
    employees have been overpaid to the tune of $500 million.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 通常报告的打印页数大约在 30 到 40 页左右。但是，随着新的工资变化，预飞行报告打印出来的页数大约有 5,000 页。和往常一样，在周四晚上打印出来，然后打印操作员像往常一样把它放在会计部门，等待有人在周五早上审阅。因为，你知道的，这只是一个打印任务，对吧？但政府办公室是关门的。没有人去看它。最终午夜到来，主机启动并开始执行
    EFT 存款和打印工资支票。工作一结束，15 万名员工多领了总计 5 亿美元。
- en: 'First problem: the USPS didn’t have an extra 500 million dollars hanging out
    in their bank account. So they have just made the mother of all overdrafts.'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 第一个问题：美国邮政服务局的银行账户里没有多出 5 亿美元。所以他们只能开出一笔巨额透支。
- en: The executive in charge of accounting, though, comes into the office on Saturday
    morning for some reason. He sees this printout — he knows what this report is
    — starts flipping through it, and about pees his pants. He calls my boss screaming
    that we need to stop payroll NOW. The EFTs are long out the door, but it takes
    a day and a half to print the full run of live paychecks. So when they stop the
    payroll, only about two thirds of the payroll is gone. The first problem is to
    figure out who did get overpaid vs who didn’t get overpaid, and then get everyone
    who hasn’t been paid yet, paid. They had to bring in all of the programmers (who
    are unionized) to work on a Saturday and Sunday to write a program to finish paying
    all of the people who haven’t been paid in the run. Then they have to call the
    Secretary of the Treasury, at home, on the weekend, to ask if the US Treasury
    can spot the USPS $500 million. The second problem is, they have to get all that
    money back. If a federal employee is accidentally overpaid, the government can
    only recoup 16.67% of the amount of the overpayment per paycheck pay period. You
    can’t take it all back at once. So then they had to write a special payroll job
    to pull all this money back. It took ‘em like four or five months to get it all,
    but finally it was all accounted for.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 不过，负责会计的高管某个原因在周六上午来到办公室。他看到了这份打印报告——他知道这份报告是什么——便开始翻看，差点弄湿了裤子。他打电话给我老板，大声要求立刻停止发工资。EFT
    已经出门好久了，但是完整打印所有实时工资支票需要一天半的时间。所以当他们停止发放工资时，只有约三分之二的工资已经发放出去。第一个问题是要弄清楚谁多领了工资，谁没有多领，然后发放还没领工资的人的工资。他们不得不召集所有程序员（他们是工会成员）在周六和周日工作，编写一个程序来完成为所有还未发放工资的人支付工资。然后他们不得不在周末给财政部长打电话，询问美国财政部是否可以给美国邮政服务局解困
    5 亿美元。第二个问题是，他们必须要把这笔钱全部拿回来。如果联邦雇员错发工资，政府只能在每笔工资支付周期中收回超额支付金额的 16.67%。无法一次性全部收回。所以他们不得不编写一个特殊的工资作业来回收所有这些钱。他们花了大约四五个月的时间，但最终一切都交代清楚了。
- en: There was a congressional investigation as to how this could happen. Which established
    the cause as, simply, a JCL operator keyed in the year 2003 instead of 2004\.
    Remarkably, no one was fired for this. These things happen. Though ultimately,
    if Ronald Reagan had picked a different day to die, this would have been caught
    before a single typo cost the USPS 500 million dollars.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 国会对此进行了调查。结果发现，原因很简单，一个 JCL 操作员输入的是 2003 年而不是 2004年。令人惊讶的是，没有人因此被解雇。这些事情就是会发生。尽管最终，如果罗纳德·里根选择了一个不同的去世日期，这个错误就不会导致美国邮政服务局损失
    5 亿美元。
