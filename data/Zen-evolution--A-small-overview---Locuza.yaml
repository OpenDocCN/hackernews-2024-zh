- en: <!--yml
  id: totrans-split-0
  prefs: []
  type: TYPE_NORMAL
  zh: <!--yml
- en: 'category: 未分类'
  id: totrans-split-1
  prefs: []
  type: TYPE_NORMAL
  zh: 类别：未分类
- en: 'date: 2024-05-27 14:35:34'
  id: totrans-split-2
  prefs: []
  type: TYPE_NORMAL
  zh: 日期：2024-05-27 14:35:34
- en: -->
  id: totrans-split-3
  prefs: []
  type: TYPE_NORMAL
  zh: -->
- en: 'Zen evolution: A small overview - Locuza'
  id: totrans-split-4
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Zen演变：一个小概述 - Locuza
- en: 来源：[https://locuza.substack.com/p/zen-evolution-a-small-overview](https://locuza.substack.com/p/zen-evolution-a-small-overview)
  id: totrans-split-5
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 来源：[https://locuza.substack.com/p/zen-evolution-a-small-overview](https://locuza.substack.com/p/zen-evolution-a-small-overview)
- en: I feel like the rabbit in Alice in Wonderland who is always short on time…
  id: totrans-split-6
  prefs: []
  type: TYPE_NORMAL
  zh: 我觉得自己像《爱丽丝梦游仙境》中总是时间不够的兔子...
- en: '*Alice in Wonderland* (1951 film)'
  id: totrans-split-7
  prefs: []
  type: TYPE_NORMAL
  zh: '*爱丽丝梦游仙境*（1951年电影）'
- en: Due to that, I may or may not be able to pack together a second Zen 4 part,
    that will depend on the launch coverage of it.
  id: totrans-split-8
  prefs: []
  type: TYPE_NORMAL
  zh: 由于这一点，我可能会或可能不会组装第二个Zen 4部件，这将取决于其发布覆盖率。
- en: 'Nevertheless, I would like to share an interesting overview of the Zen evolution
    from Zen 1 to the upcoming Zen 4:'
  id: totrans-split-9
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管如此，我还是想分享一下从Zen 1到即将推出的Zen 4的有趣演变概述：
- en: Zen 4 I/O die is a placeholder image.
  id: totrans-split-10
  prefs: []
  type: TYPE_NORMAL
  zh: Zen 4的I/O芯片是一个占位图。
- en: This image was mostly finished before Zen 4's official reveal at the end of
    August, but fate shut down Twitter in several countries so I couldn't publish
    it.
  id: totrans-split-11
  prefs: []
  type: TYPE_NORMAL
  zh: 这张图片在Zen 4正式发布之前基本完成，但命运使得Twitter在几个国家关闭，因此我无法发布它。
- en: The upside is that some numbers that were previously unknown have been made
    public.
  id: totrans-split-12
  prefs: []
  type: TYPE_NORMAL
  zh: 正面的是，一些以前未知的数字已经变得公开。
- en: For example the *[RetiredEngineer®](https://twitter.com/chiakokhua/status/1564413952108335105)*
    put a comparison table on Twitter, showing a couple of changes from Zen 3 to Zen
    4.
  id: totrans-split-13
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，*[RetiredEngineer®](https://twitter.com/chiakokhua/status/1564413952108335105)*在Twitter上发布了一张比较表，展示了从Zen
    3到Zen 4的一些变化。
- en: Together with the CCD transistor count via *[Angstronomics](https://www.angstronomics.com/p/ryzen-7000-desktop-preview)*
    and a few total guesses ( :> ) quite a bit of interesting data can be compared
    against each other.
  id: totrans-split-14
  prefs: []
  type: TYPE_NORMAL
  zh: 与通过*[Angstronomics](https://www.angstronomics.com/p/ryzen-7000-desktop-preview)*来比较CCD晶体管数量和一些纯粹的猜测（
    :> ），可以比较相互之间相当多的有趣数据。
- en: Starting with Zen 1, we have a monolithic SoC design made by Global Foundries
    in 14/12 nm.
  id: totrans-split-15
  prefs: []
  type: TYPE_NORMAL
  zh: 从Zen 1开始，我们拥有了由Global Foundries在14/12 nm制造的单片SoC设计。
- en: The chip size is about 212 mm² and integrates two 4-core CCX together with multiple
    I/O devices for PCIe, USB and the Infinity Fabric.
  id: totrans-split-16
  prefs: []
  type: TYPE_NORMAL
  zh: 芯片尺寸约为212 mm²，集成了两个4核CCX以及用于PCIe、USB和Infinity Fabric的多个I/O设备。
- en: The transistor density for the whole SoC was at ~23 MTr/mm².
  id: totrans-split-17
  prefs: []
  type: TYPE_NORMAL
  zh: 整个SoC的晶体管密度约为23 MTr/mm²。
- en: After that, AMD went for a chiplet design, manufacturing a Core Complex Die
    at TSMC’s N7 node, while the I/O functions (the PHYs scale little to none with
    a new node) were separated as a cheaper 12 nm die at Global Foundries.
  id: totrans-split-18
  prefs: []
  type: TYPE_NORMAL
  zh: 之后，AMD采用了芯片设计，在TSMC的N7节点制造了核心复合体，而I/O功能（PHYs在新节点上几乎不扩展）被分离为Global Foundries的更便宜的12nm芯片。
- en: With this change, we see a stark contrast when comparing both dies and the predecessor.
  id: totrans-split-19
  prefs: []
  type: TYPE_NORMAL
  zh: 通过这一变化，我们在比较两个芯片以及前任时看到了鲜明的对比。
- en: The 76 mm² core dies achieved 50 MTr/mm², 121% better transistor density compared
    to the monolithic design of Zen 1, while the I/O die is only at 16.72 MTr/mm²,
    26% worse than the Zen 1 SoC.
  id: totrans-split-20
  prefs: []
  type: TYPE_NORMAL
  zh: 76 mm²的核心芯片通过采用50 MTr/mm²的晶体管密度实现了121%的提升，比Zen 1的单片设计好；而I/O芯片仅为16.72 MTr/mm²，比Zen
    1 SoC差26%。
- en: Zen 3 uses the “same” chiplet design and I/O die, but introduced new N7 CCDs
    with new CPU Cores, which were a bit larger, leading to a CCD size of ~ 84 mm²
    with basically the same transistor density.
  id: totrans-split-21
  prefs: []
  type: TYPE_NORMAL
  zh: Zen 3采用“相同”的芯片设计和I/O芯片，但引入了新的N7 CCDs与新CPU核心，略大一些，导致CCD尺寸约为84 mm²，基本上相同的晶体管密度。
- en: The upcoming Zen 4 Raphael package is once again deploying the same chiplet
    design, but shrinking both chips with a new node.
  id: totrans-split-22
  prefs: []
  type: TYPE_NORMAL
  zh: 即将推出的Zen 4 Raphael套装再次采用相同的芯片设计，但通过新节点缩小了两个芯片。
- en: The CCDs make the move from N7 to N5, achieving 91.3 MTr/mm², an increase of
    83% compared to the predecessor.
  id: totrans-split-23
  prefs: []
  type: TYPE_NORMAL
  zh: CCD从N7迁移到N5，实现了91.3 MTr/mm²的晶体管密度，比前任增加了83%。
- en: If one would exclude the I/O PHYs and other analog components, it’s likely true
    that AMD achieved a 2x transistor density improvement vs. the previous node.
  id: totrans-split-24
  prefs: []
  type: TYPE_NORMAL
  zh: 如果排除I/O PHY和其他模拟组件，AMD在与上一代节点相比实现了2倍的晶体管密度改进，这可能是真实的。
- en: The new I/O die went from 12nm Global Foundries to 6 nm (N6) TSMC.
  id: totrans-split-25
  prefs: []
  type: TYPE_NORMAL
  zh: 新的I/O芯片从12nm Global Foundries进化到6nm（N6）TSMC。
- en: Even though the transistor shrinkage is massive, the new I/O die is pretty much
    as large as before.
  id: totrans-split-26
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管晶体管的缩小是巨大的，新的I/O芯片几乎与之前一样大。
- en: There are a couple of potential reasons for that.
  id: totrans-split-27
  prefs: []
  type: TYPE_NORMAL
  zh: 对此可能有几个潜在原因。
- en: Analog devices, as they are used for I/O PHYs, do not scale well with new nodes.
  id: totrans-split-28
  prefs: []
  type: TYPE_NORMAL
  zh: 由于用于I/O PHY的模拟设备在新节点上无法很好地扩展。
- en: The current 12 nm design already has all chip edges fairly well occupied with
    I/O.
  id: totrans-split-29
  prefs: []
  type: TYPE_NORMAL
  zh: 当前的12纳米设计已经将所有芯片边缘都相当好地占据了I/O。
- en: One could redesign the PHYs to take less horizontal space and go further into
    the die, but this can be challenging and not desired.
  id: totrans-split-30
  prefs: []
  type: TYPE_NORMAL
  zh: 可以重新设计PHY以占用较少的水平空间并进一步进入芯片，但这可能具有挑战性且不受欢迎。
- en: If one would shrink down the current design, you probably would not make the
    chip smaller by any significant amount, as this design is pad (I/O PHY) limited.
  id: totrans-split-31
  prefs: []
  type: TYPE_NORMAL
  zh: 如果将当前设计缩小，可能不会使芯片的面积显著减少，因为这种设计受I/O物理接口（PHY）限制。
- en: What would shrink massively is the green portion in the middle, which would
    also lead to a lot of unused area.
  id: totrans-split-32
  prefs: []
  type: TYPE_NORMAL
  zh: 那些绿色部分在中间将会大量缩小，这也将导致大量未使用的区域。
- en: However, you could integrate new features for “free”.
  id: totrans-split-33
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，您可以免费集成新功能。
- en: And this is what AMD has done, the I/O die now includes an RDNA2 iGPU with one
    WGP (128 Shaders) running at up to 2.2 GHz (~564 FP32 GFLOPs).
  id: totrans-split-34
  prefs: []
  type: TYPE_NORMAL
  zh: AMD已经完成了这项工作，现在的I/O芯片中包含一个RDNA2 iGPU，其中一个WGP（128个着色器），运行速度高达2.2 GHz（约564 FP32
    GFLOPs）。
- en: Enough to drive the display, simple applications and to capture a section of
    the business market, which previously was not accessible.
  id: totrans-split-35
  prefs: []
  type: TYPE_NORMAL
  zh: 足以驱动显示器、简单应用程序，并捕获商业市场中的一部分，以前是无法访问的。
- en: Besides the small iGPU, a VCN engine for video de/encoding will also be incorporated,
    together with a necessary display engine and its display PHYs.
  id: totrans-split-36
  prefs: []
  type: TYPE_NORMAL
  zh: 除了小型iGPU外，还将集成用于视频解码/编码的VCN引擎，以及必要的显示引擎和其显示物理接口。
- en: Lastly, the 6 nm node should in general lead to better energy efficiency for
    the logic and SRAM devices.
  id: totrans-split-37
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，6纳米工艺节点通常会提高逻辑和SRAM设备的能效。
- en: In regard to the core design, AMD has always touched on several aspects with
    each generation
  id: totrans-split-38
  prefs: []
  type: TYPE_NORMAL
  zh: 在核心设计方面，AMD每一代都涉及到了几个方面。
- en: Zen 1 and 2 share the same microarchitecture foundation and as such are very
    familiar, using 4-core CCXes and logically a similar execution body.
  id: totrans-split-39
  prefs: []
  type: TYPE_NORMAL
  zh: Zen 1和2共享相同的微架构基础，因此非常熟悉，使用4核心CCX和逻辑上相似的执行单元。
- en: But due to the 7 nm shrink, many structures on Zen 2 could be enlarged, some
    of them massively.
  id: totrans-split-40
  prefs: []
  type: TYPE_NORMAL
  zh: 但由于7纳米工艺的收缩，Zen 2上的许多结构都可以被放大，其中一些放大幅度非常大。
- en: A new TAGE predictor has been added, branch target buffers have been (almost)
    doubled and the FPU width increased from 128 bits to 256 bits for single cycle
    AVX256 execution.
  id: totrans-split-41
  prefs: []
  type: TYPE_NORMAL
  zh: 添加了新的TAGE预测器，分支目标缓冲区（几乎）加倍，FPU宽度从128位增加到256位，实现单周期AVX256执行。
- en: In addition, the L3 cache capacity per CCX was doubled.
  id: totrans-split-42
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，每个CCX的L3缓存容量翻了一番。
- en: It obviously goes on and on, for example multiple registers/buffers have been
    increased, like the re-order buffer to extract more ILP from the instruction stream,
    the Integer Register File got a few more entries and various scheduling queues
    for the execution units and load/store memory system.
  id: totrans-split-43
  prefs: []
  type: TYPE_NORMAL
  zh: 很显然，继续下去，例如增加了多个寄存器/缓冲区，如重新排序缓冲区以从指令流中提取更多ILP，整数寄存器文件增加了几个条目，以及执行单元和加载/存储内存系统的各种调度队列。
- en: Besides simple structure enlargements, AMD has rebalanced some aspects like
    the size of the L1 instruction cache and the op-cache capacity.
  id: totrans-split-44
  prefs: []
  type: TYPE_NORMAL
  zh: 除了简单的结构放大外，AMD还重新平衡了一些方面，如L1指令缓存的大小和op-cache的容量。
- en: The company halved the L1I$ capacity to double the Op$ storage size, to source
    more
  id: totrans-split-45
  prefs: []
  type: TYPE_NORMAL
  zh: 公司将L1I$的容量减半，以增加Op$的存储容量，以提供更多资源。
- en: data from the latter, the more efficient and wider path, than the legacy L1I$/decode
    path.
  id: totrans-split-46
  prefs: []
  type: TYPE_NORMAL
  zh: 数据来自后者，比传统的L1I$/解码路径更有效和更宽的路径。
- en: Zen 3 changed key aspects of the microarchitecture and set a new design foundation
    while using the same 7nm node.
  id: totrans-split-47
  prefs: []
  type: TYPE_NORMAL
  zh: Zen 3改变了微架构的关键方面，并在使用相同的7纳米工艺节点时设定了新的设计基础。
- en: Gone is the three level BTB structure in favor of just two levels with zero-bubble
    execution for the first level.
  id: totrans-split-48
  prefs: []
  type: TYPE_NORMAL
  zh: 三级BTB结构已经消失，改为只有两级，第一级执行时零气泡。
- en: The execution body got wider and the port design was changed.
  id: totrans-split-49
  prefs: []
  type: TYPE_NORMAL
  zh: 执行单元变得更宽，端口设计也有所变化。
- en: On a high-level you mostly see the expected scheme, several structure sizes
    have been slightly increased
  id: totrans-split-50
  prefs: []
  type: TYPE_NORMAL
  zh: 在高层次上，您主要会看到预期的方案，几个结构尺寸稍微增加了。
- en: Besides changing many core attributes, another highlight of Zen 3 was the change
    from 2x CCXes, with separate L3 caches and round-trips to the I/O die, to a single
    CCX design with a unified L3 cache structure serving all 8 cores.
  id: totrans-split-51
  prefs: []
  type: TYPE_NORMAL
  zh: 除了改变许多核心属性外，Zen 3的另一个亮点是从2个CCX，各自拥有单独的L3缓存和与I/O芯片的往返，变为单个CCX设计，统一的L3缓存结构为所有8个核心提供服务。
- en: Zen 4 is pretty much a supercharged Zen 3 core, not unlike how Zen 2 was designed
    compared to Zen 1.
  id: totrans-split-52
  prefs: []
  type: TYPE_NORMAL
  zh: Zen 4基本上是Zen 3核心的超级版，与Zen 2相比设计类似于Zen 1。
- en: The same underlying microarchitecture is used while several structures are upgraded
    with the increased transistor budget of the 5nm process.
  id: totrans-split-53
  prefs: []
  type: TYPE_NORMAL
  zh: 使用了相同的基础微架构，同时使用了增加的 5 纳米工艺的晶体管预算来升级几个结构。
- en: The width of the front-end was kept and follows us now since 4 generations.
  id: totrans-split-54
  prefs: []
  type: TYPE_NORMAL
  zh: 前端的宽度从第四代开始一直保持不变，并且一直跟随我们。
- en: As before, we have a 4-wide legacy decode path and a 6-wide dispatch to the
    execution engine.
  id: totrans-split-55
  prefs: []
  type: TYPE_NORMAL
  zh: 像以前一样，我们有一个 4-wide 的传统解码路径和一个 6-wide 的分派到执行引擎。
- en: However, the branch prediction part has always been improved and Zen 4 makes
    no exception here.
  id: totrans-split-56
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，分支预测部分始终在改善中，Zen 4 在这方面也不例外。
- en: The BTBs have been increased yet again, and like with Zen 2, more emphasis has
    been placed on the Op$ path, increasing the capacity from 4K to 6.75K.
  id: totrans-split-57
  prefs: []
  type: TYPE_NORMAL
  zh: BTB 再次增加，与 Zen 2 类似，更加注重 Op$ 路径的容量增加，从 4K 增加到 6.75K。
- en: The execution body is the same as on Zen 3 previously (width + port design).
  id: totrans-split-58
  prefs: []
  type: TYPE_NORMAL
  zh: 执行单元与之前的 Zen 3 相同（宽度 + 端口设计）。
- en: So we are still looking at 4x INT pipes, 3x AGUs and an FPU with 2x FADD and
    2x FMUL(FMA) pipes (+ other pipes).
  id: totrans-split-59
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，我们仍然在看 4x INT 管道，3x AGU 和一个 FPU，其中有 2x FADD 和 2x FMUL(FMA) 管道（+其他管道）。
- en: Similar to Zen 2, which poured a good chunk of its transistor budget into the
    FPU, Zen 4 again invests heavily in the FPU.
  id: totrans-split-60
  prefs: []
  type: TYPE_NORMAL
  zh: 类似于 Zen 2，大部分晶体管预算投入到 FPU 中，Zen 4 再次大力投资于 FPU。
- en: It’s now supporting AVX512 and a wide range of new instructions.
  id: totrans-split-61
  prefs: []
  type: TYPE_NORMAL
  zh: 现在支持 AVX512 和广泛的新指令集。
- en: Moreover, for the first time after Zen 1, the amount of FP registers got increased
    by a decent amount.
  id: totrans-split-62
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，自 Zen 1 以来首次，FP 寄存器的数量大幅增加。
- en: As usual, you will also see many other structures being increased, like the
    re-order buffer holding now 320 entries (+25%).
  id: totrans-split-63
  prefs: []
  type: TYPE_NORMAL
  zh: 如往常一样，你还会看到许多其他结构的增加，例如重新排序缓冲区现在可以容纳 320 个条目（+25%）。
- en: In that regard, AMD is increasing that aspect still fairly conservatively, considering
    that Intel increased the ROB to 352 with Sunny Cove (from 224 on Skylake) and
    to a fairly massive size of 512 with Golden Cove.
  id: totrans-split-64
  prefs: []
  type: TYPE_NORMAL
  zh: 在这方面，AMD 在考虑到 Intel 将 ROB 从 Skylake 的 224 增加到 Sunny Cove 的 352，以及 Golden Cove
    的 512 的情况下，仍然相对保守地增加了这一方面。
- en: With Zen 5 AMD will widen the front-end and potentially increase the ROB more
    aggressively, though the company will likely strive for a balanced point, keeping
    the perf/mm² high, as the generations before.
  id: totrans-split-65
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 Zen 5，AMD 将扩展前端，并可能更积极地增加 ROB，尽管公司很可能会力求保持一个平衡点，保持每平方毫米性能高，就像之前的几代一样。
- en: Well, relative to Intel one might say, it’s all relative.
  id: totrans-split-66
  prefs: []
  type: TYPE_NORMAL
  zh: 嗯，相对于 Intel，可以说这一切都是相对的。
- en: '::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::'
  id: totrans-split-67
  prefs: []
  type: TYPE_NORMAL
  zh: '::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::'
- en: '*Subscribe for free to receive a newsletter when new content is available.'
  id: totrans-split-68
  prefs: []
  type: TYPE_NORMAL
  zh: '*订阅免费获取新内容推送的通讯。'
- en: If you would like to support this work financially, you can choose the paid
    newsletter option or go to my Patreon page and select a tier that suits your budget
    - [https://www.patreon.com/locuza](https://www.patreon.com/locuza)*
  id: totrans-split-69
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您希望在财务上支持这项工作，可以选择付费通讯选项，或者访问我的 Patreon 页面，并选择适合您预算的层次 - [https://www.patreon.com/locuza](https://www.patreon.com/locuza)*
