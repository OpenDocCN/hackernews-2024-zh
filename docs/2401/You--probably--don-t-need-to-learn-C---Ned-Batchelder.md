<!--yml

类别：未分类

日期：2024 年 5 月 27 日 15:05:29

-->

# 你（可能）不需要学习 C | Ned Batchelder

> 来源：[`nedbatchelder.com/blog/202401/you_probably_dont_need_to_learn_c.html`](https://nedbatchelder.com/blog/202401/you_probably_dont_need_to_learn_c.html)

在[Mastodon 上，我写道](https://hachyderm.io/@nedbat/111789013210403320) 我厌倦了别人说，“你应该学习 C 语言，这样你才能真正了解计算机的运行原理。” 我收到了很多回复，这些回复并没有改变我的想法，但帮助我更好地了解了计算机中的抽象是不可避免的。

人们提出了许多说法。C 很重要，因为系统调用是以 C 语义来定义的（并不是）。他们说它对于探索资源有限的计算机（比如 Arduino）很有用，但大多数人并不为这些计算机编程。他们说它很重要，因为 C 语言执行性能更高，但 Python 程序经常将计算密集型工作交给其他人编写的库来完成，而且现在这项工作通常在 GPU 上进行。有人说，需要用它来用 strace 进行调试，然后又有人说他们经常使用 strace 但不懂 C。甚至有人说 C 很好，因为它解释了为什么文件名中不允许 NUL，但谁会尝试这样做，为什么要学习一门语言来掌握这个琐事？

如果为了手头的工作而学习 C，我完全赞成，但是你可以在不了解 C 的情况下写出很多优秀的软件。

有几个人重复了一个观点，C 教会你代码如何“真正”执行。但是 C 是计算机的一个抽象模型，并且现代 CPU 做了很多 C 没有展示或解释的事情。流水线处理，缓存缺失，分支预测，推测执行，多核甚至虚拟内存，都对 C 程序完全不可见。

C 是计算机工作原理的抽象，芯片制造商们努力实现这一抽象，但是他们是建立在更加复杂的机械之上。

C 与现代计算机体系结构相去甚远：自从它在 20 世纪 70 年代创建以来，已经有了 50 年的创新。C 的模型与现代硬件之间的差距是著名漏洞（如 Meltdown 和 Spectre）的根本原因，如[C 并不是低级语言](https://dl.acm.org/doi/pdf/10.1145/3212477.3212479)中所解释的。

C 可以教你一些有用的东西，比如内存是一个巨大的字节数组，但你也可以在不编写 C 程序的情况下学习。人们说，C 教会你有关内存分配的知识。是的，确实如此，但是你可以学习这个概念而不学习编程语言。除此之外，Python 或 Ruby 开发人员对这方面的知识还能做些什么，除了欣赏他们的语言为他们做这项工作，他们不再需要考虑这个？

指针在 Mastodon 的回复中经常出现。 指针支撑着高级语言中的概念，但你可以将这些概念解释为引用，并完全跳过指针算术，别名和空指针。

我问了很多人一个问题：如果 JavaScript/Ruby/Python 开发者不懂 C、系统调用和指针，他们会犯什么错误？但我没有得到很有力的答案。

我们在一个巨大的抽象塔中工作。我用 Python 写程序，它提供了 C（它的底层实现语言）所没有的抽象。C 提供了一个内存和 CPU 执行的抽象模型，计算机在其他机制（微码和虚拟内存）之上实现了它。当我制作一个接线板电脑时，我可以假设信号在电线中瞬间传输。对于其他硬件设计者来说，这种抽象是不适用的，他们需要考虑电信号的传输速度。有时你需要深入抽象栈的一个层次来理解发生了什么。每个人都必须找到适合自己工作的正确层次。

[Andy Gocke 说得很好](https://hachyderm.io/@agocke/111791030850237121)：

> 当你在那个层面不再有问题时，那就是你可以不再关心那个层面的时候了。我不认为有一个普遍的知识水平是人们需要或足够的。

[“像果酱或鞋带”又提出了一个很好的观点](https://toot.cat/@idlestate/111793957024682587)：

> “每个人都应该知道这个”和“有人应该知道这个”之间有一个很大的区别，这在这类讨论中似乎被忽略了。

C 可以教会你很多有用和有趣的东西。它会让你成为一个更好的程序员，就像学习任何新的语言一样，因为它会拓宽你的视野。有些类型的编程需要 C，虽然 Rust 等其他语言现在也能很好地扮演这个角色。C 不会教你计算机的真实运行方式。它教你计算机工作的一个通用抽象。

找到一个适合你所需做的抽象层次。当你在那里遇到问题时，往下看。你不会看到事物真正的运行方式，你会看到一个更低级别的抽象，这可能会有所帮助。有时你需要的是一个更高级别的抽象。你的 Python 循环太慢了吗？也许你需要一个 C 循环。或者也许你需要 numpy 数组操作。

你（很可能）不需要学习 C。
