<!--yml

类别: 未分类

日期: 2024-05-27 15:08:38

-->

# 在欧盟使用替代浏览器引擎 - 支持 - Apple Developer

> 来源：[https://developer.apple.com/support/alternative-browser-engines/](https://developer.apple.com/support/alternative-browser-engines/)

## 在欧盟使用替代浏览器引擎

iOS 17.4 引入了新功能，允许 iOS 应用程序在欧盟使用替代浏览器引擎 —— 除了 WebKit 外的其他浏览器引擎 —— 用于专用浏览器应用程序和提供应用内浏览体验的应用程序。要在你的应用程序中使用替代浏览器引擎，你需要请求 Web 浏览器引擎权限（用于想要使用替代浏览器引擎的浏览器应用程序）或嵌入式浏览器引擎权限（用于提供想要使用替代浏览器引擎的应用程序内浏览体验的应用程序）。

苹果将为授权开发人员提供访问系统内的技术，以启用关键功能并帮助开发人员提供高性能的现代浏览器引擎。这些技术包括即时编译、多进程支持等。

然而，由于浏览器引擎经常受到不受信任和潜在恶意内容的攻击，并且可以看到敏感用户数据，它们是最常见的恶意行为攻击向量之一。为了帮助保护用户在线安全，苹果只会在满足特定条件并承诺遵守一系列持续的隐私和安全要求，包括及时的安全更新以解决新出现的威胁和漏洞后，授权开发人员实施替代浏览器引擎。

* * *

## Web 浏览器引擎权限

带上 Web 浏览器引擎权限，你可以在你的浏览器应用程序中使用另一种浏览器引擎。如果你有兴趣在你的浏览器应用程序中使用另一种浏览器引擎，请查看以下要求，然后[提交你的请求](/contact/request/web-browser-engine/)以获取 Web 浏览器引擎权限。对于技术指导，请查阅：

### 要求

要获得权限，你的应用程序必须满足以下条件：

+   仅在欧盟的 iOS 上可用

+   与使用系统提供的 Web 浏览器引擎的任何应用程序分开的独立二进制文件

+   具有默认的 [Web 浏览器权限](/documentation/xcode/preparing-your-app-to-be-the-default-browser)

+   满足以下功能要求以确保你的应用程序使用提供基线 Web 功能的 Web 浏览器引擎：

    +   通过工业标准测试套件中提供的最低百分比的测试：

        +   [Web 平台测试](https://wpt.fyi/results/)的 90%

        +   作为 wpt.fyi 首页上任何浏览器执行的子测试数量的最高百分比；以及

        +   在测试套件兼容的操作系统上

        +   以及 [Test262](https://github.com/tc39/test262) 的 80%

        +   在具有 Apple 硅的 iOS 设备或 Mac 上

    +   如果即时（JIT）编译不可用（例如，如果用户启用了锁定模式），则满足上述测试套件要求

+   您和您的应用程序必须满足以下安全要求：

    +   承诺采用安全的开发流程，包括监控您应用程序的软件供应链中的漏洞，并遵循围绕安全软件开发的最佳实践（例如，对正在开发的新功能进行威胁建模）。

    +   提供已发布的漏洞披露政策的 URL，该政策包括通过第三方（可能包括 Apple）向您报告安全漏洞和问题的联系信息，报告中提供的信息以及何时可以期待状态更新。

    +   承诺及时减轻正在利用的应用程序或其使用的备用 Web 浏览器引擎中的漏洞（例如，针对正在积极利用的最简单类别的漏洞，30 天）。

    +   提供一个公开可用的网页（或多个页面）的 URL，该网页提供了特定版本的浏览器引擎和相关应用程序版本（如果有不同）中已解决的报告漏洞的信息。

    +   如果您的备用 Web 浏览器引擎使用的根证书存储不是通过 iOS SDK 访问的，则必须使根证书策略公开可访问，并且该策略的所有者必须作为浏览器参与到认证机构/浏览器论坛中。

    +   在使用浏览器引擎时，展示对现代传输层安全协议的支持，以保护数据在传输中的通信。

##### 程序安全要求

您必须执行以下操作：

+   至少在处理 Web 内容的所有代码中使用内存安全的编程语言或改进内存安全的功能，其中包括备用 Web 浏览器引擎；

+   采用最新的安全缓解措施（例如，指针身份验证代码），以消除漏洞类别或使开发利用链变得更加困难；

+   遵循安全设计和安全编码的最佳实践；

+   使用进程分离来限制利用的影响并验证备用 Web 浏览器引擎中的进程间通信（IPC）；

+   监控任何第三方软件依赖项和您应用程序更广泛的软件供应链中的漏洞，如果漏洞影响您的应用程序，则迁移到更新的版本；

+   不使用不再接收漏洞响应的框架或软件库；

+   优先解决已报告的漏洞，而不是新功能开发。例如，如果确定某个 Web API 存在漏洞，您必须在请求后删除对该 Web API 的支持，其中备用 Web 浏览器引擎在平台 SDK 和 Web 内容之间构建功能。大多数漏洞应在 30 天内解决，但某些可能更复杂，可能需要更长时间。

##### 程序隐私要求

您必须执行以下操作：

+   默认情况下阻止跨站点 cookie（即第三方 cookie），除非用户明确选择允许此类 cookie 并获得知情同意，或者在与其打开窗口中的框架进行交互的弹出窗口的情况下出于兼容性需要；

+   将任何由网站可观察到的存储或状态按顶级网站进行分区，或者阻止这种存储或状态跨站点使用和可观察性；

+   不在浏览器和任何其他应用程序之间同步 cookie 和状态，甚至开发者的其他应用程序；

+   在未经知情同意和用户激活的情况下不与网站共享设备标识符；

+   使用提供的 API 标记网络连接，以在 iOS 上生成应用隐私报告；

+   根据通常采用的 Web 标准确定何时需要通知用户激活和/或用户同意，适用于 Web API（例如剪贴板或全屏访问），包括提供对 PII 的访问的那些标准。

* * *

## 嵌入式浏览器引擎权限

使用嵌入式浏览器引擎权限，您可以在应用程序中嵌入替代的浏览器引擎以提供应用内浏览。应用内浏览是动态显示从网络获取的内容，该内容在网络浏览器应用中是可访问且可用的。这不包括嵌入或仅通过应用程序获得的内容。

在提供应用内浏览时，您的应用程序的主要焦点必须是提供网络浏览功能。在提供应用内浏览时，用户界面必须：

+   接管大多数显示，除了允许最终用户控制浏览会话的相关控件；

+   提供一个按钮或链接到系统默认浏览器，以允许最终用户打开专用浏览器应用程序查看当前显示的内容；以及

+   显示正在由应用内浏览呈现内容的域名或 URL。

如果您有兴趣在应用程序中使用替代的浏览器引擎提供应用内浏览体验，请查看下面的要求，然后[提交您的请求](/contact/request/embdedded-browser-engine/)以获取嵌入式浏览器引擎权限。您需要提供有关您打算嵌入的引擎的信息，包括它如何满足要求以及如何将其集成到应用程序中以提供应用内浏览体验。有关技术指导，请查看示例和资源部分。

### 要求

要符合权限的要求，您的应用必须：

+   仅在欧盟 iOS 平台上提供

+   与使用系统提供的 Web 浏览器引擎的任何应用程序的二进制文件分开

+   不具有默认浏览器权限

+   满足以下功能性要求，以确保您的应用程序使用提供基本网络功能的 Web 浏览器引擎：

    +   通过行业标准测试套件提供的最低百分比的测试：

        +   通过工业标准测试套件提供的最低测试百分比：

        +   作为 wpt.fyi 主页上任何浏览器执行的子测试数量的最高百分比；以及

        +   在测试套件兼容的操作系统上

        +   和`80%`的[Test262](https://github.com/tc39/test262)

        +   在使用 Apple 硅芯片的 iOS 设备或 Mac 上

    +   如果即时编译（JIT）不可用（例如，如果用户启用了锁定模式），则满足上述测试套件要求

+   满足以下安全要求：

    +   致力于安全的开发流程，包括监控应用程序的软件供应链以查找漏洞，并遵循围绕安全软件开发的最佳实践（例如，在开发中的新功能上执行威胁建模）。

    +   提供已发布的漏洞披露策略的 URL，其中包括第三方（可能包括 Apple）向您报告安全漏洞和问题的联系信息，报告中提供的信息以及何时可以期望状态更新。

    +   致力于及时减轻应用程序或备用网络浏览器引擎中正在被利用的漏洞（例如，对于正在积极利用的最简单的漏洞类别，必须在`30天`内采取行动）；

    +   提供一个公开可访问的网页 URL（或页面），该页面提供了有关已解决的漏洞在特定版本的浏览器引擎和关联的应用程序版本中的信息。

    +   如果你选择的备用网络浏览器引擎使用的根证书存储不是通过 iOS SDK 访问的，你必须使根证书策略公开可访问，并且该策略的所有者必须作为证书消费者参与认证机构/浏览器论坛。

    +   当浏览器引擎正在使用时，展示对现代传输层安全协议的支持，以保护数据传输通信。

##### 程序安全要求

你必须执行以下操作：

+   在备用网络浏览器引擎中至少对处理 web 内容的所有代码使用内存安全编程语言或改进其他语言中的内存安全功能；

+   采用最新的安全缓解措施，消除漏洞类别或使开发利用链变得更加困难；

+   遵循安全设计和安全编码的最佳实践；

+   监视任何第三方软件依赖项和应用程序更广泛的软件供应链中的漏洞，如果漏洞影响了应用程序，迁移到更新版本；

+   不使用不再接收漏洞响应安全更新的框架或软件库；以及

+   优先解决报告的漏洞，而不是新功能的开发。例如，如果备用浏览器引擎在平台的 SDK 和 web 内容之间建立了能力桥梁以启用 Web API，则在请求时，如果确定存在漏洞，则必须删除对此类 Web API 的支持。大多数漏洞应在`30天`内解决，但有些可能更复杂，可能需要更长时间。

##### 程序隐私要求

你必须执行以下操作：

+   默认情况下阻止跨站点Cookie（即第三方Cookie），除非用户明确同意允许此类Cookie并获得知情同意，或者在与其打开窗口中的框架交互的弹出窗口的兼容性情况下需要；

+   将网站的任何存储或状态可观察内容按顶级网站分区，或者阻止跨站使用和观察此类存储或状态；

+   不要在浏览器和任何其他应用程序之间同步Cookie和状态，甚至不要与开发者的其他应用程序同步；

+   不要在未经用户同意和用户激活的情况下与网站共享设备标识符；

+   使用提供的API标记网络连接以生成iOS上的App隐私报告；并且

+   根据通常采用的网络标准确定何时需要知情用户激活和/或用户同意，适用于Web API（例如，剪贴板或全屏访问），包括那些提供对PII访问的API。

##### 附加要求

+   您必须在每次二进制提交时提交嵌入在您的应用程序中的替代网络浏览器引擎的名称和版本。

+   在您的应用程序中嵌入的替代网络浏览器引擎的新版本可用时，您必须在十五（15）个日历日内提交一个具有该新版本的应用程序更新。

* * *

## 示例和资源

此部分包含了一些额外资源和示例，帮助您满足使用替代浏览器引擎的要求。

### 安全SDLC（软件开发生命周期）

您需要满足的许多要求依赖于在应用程序中引入新功能时开发以安全和隐私为先的方法。当您开始开发新功能时，您应首先制定威胁模型以及您将如何确保您的架构和发布版本的应用程序减轻您已识别的风险的计划。有许多获取保证的技术 — 例如，代码审计，模糊测试以及编写测试来验证您打算强制执行的安全属性。您应将所有网络内容视为不受信任且可能是恶意的。

您还应考虑iOS提供的当前安全缓解措施，例如指针认证代码，以及用于减轻您识别的每个威胁的编程语言（或语言功能）。例如，Swift默认是一种内存安全语言，可以帮助您避免许多常见的漏洞源以及其他与内存相关的软件错误。但是，不安全的内存语言（如C++）确实提供了提供内存安全性好处的功能 - 例如`std::span`。

##### 资源

### 漏洞管理

您应该假设在浏览器引擎中始终存在未发现的漏洞，或者任何新功能都可能引入意外风险。因此，您应该确保已建立了适当的流程，以便在通过测试和安全和隐私保障工作内部发现漏洞，您的软件供应链中发现漏洞，或者被其他方披露漏洞时，能够做出响应。

当您为第三方（例如安全研究人员）提供报告漏洞的途径时，您应考虑从他们那里需要哪些信息，以便使您能够快速确定问题的有效性和原因。您还应确保已建立流程来优先处理漏洞修复，然后发布可能与您正常计划不一致的更新。

用户还可以快速确定哪些公共漏洞具有相关的 [CVE-ID](https://www.cve.org/ResourcesSupport/Glossary?activeTerm=glossaryRecord#)，以及哪个版本的您的应用程序（或替代浏览器引擎）已解决这些漏洞，这一点也很重要。

##### 资源

### 网络安全

通过使用 iOS SDK，特别是 Network 框架和/或 SecTrust API，您可以减少对评估 Web 证书的信任和维护或使用相应的根信任存储和程序的需要，而这些是您所使用的替代浏览器引擎的职责。如果您运营一个程序，它应提供如何申请成为程序一部分的根证书颁发机构（CA）的信息，以及如何报告事件（例如，根证书颁发机构私钥材料的泄露）以便您采取行动。

网络上使用的协议不断演变以应对新出现的威胁，并更好地保护用户的隐私和安全。目前应与您的替代浏览器引擎兼容且未被弃用的现代 TLS 版本是 TLS 1.2 和 1.3。然而，这些可能会随时间变化。您可以在您的替代浏览器引擎中支持已弃用的协议，但当用户访问仅支持这些协议的站点时，应通知用户。

##### 资源

### 协议
