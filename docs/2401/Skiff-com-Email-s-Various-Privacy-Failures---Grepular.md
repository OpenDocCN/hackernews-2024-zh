<!--yml

分类：未分类

日期：2024-05-27 14:46:07

-->

# Skiff.com 电子邮件的各种隐私失败 - Grepular

> 来源：[https://www.grepular.com/Skiff_Emails_Various_Privacy_Failures](https://www.grepular.com/Skiff_Emails_Various_Privacy_Failures)

我在 [Hacker News 的一个提交](https://news.ycombinator.com/item?id=37229270) 上发现了 [Skiff.com](https://skiff.com/)。他们声称提供“隐私至上的端到端加密电子邮件”服务。作为 [Email Privacy Tester](https://www.emailprivacytester.com) 的作者，我喜欢在第一次接触到电子邮件提供商和客户端时对其进行测试。

### 一个糟糕的默认设置

在注册 Skiff 的免费账户后，我注意到的第一件事是，他们具有标准的“阻止远程内容”选项，几乎所有的电子邮件提供商和客户端都有这个选项，但默认情况下未启用。这个默认设置让我觉得与他们的“隐私至上”的声明不符。如果隐私对你来说足够重要，以至于成为你网站上提到的第一件事，那么阻止远程内容应该是默认启用的。

我在 Hacker News 的帖子中 [提到过这个](https://news.ycombinator.com/item?id=37238112)，Skiff 的首席执行官 Andrew Milich 进行了回复。他有两个回应：“以隐私为重点的邮件提供商将其作为选项提供，但默认情况下不启用”。如果隐私为重点的邮件提供商真是如此，我会感到惊讶，但我还没有进行调查。但是，"主流的邮件提供商甚至没有将其作为选项"。这完全是错误的，我不确定他为什么会这样想。加载远程内容（或不加载）是几乎所有电子邮件客户端和提供商都提供的标准选项，而且几十年来一直如此。另外…… 谁在乎其他邮件提供商做了什么？如果“隐私至上”是你的主要卖点，请做一些“隐私至上”的事情，不要只是复制你的竞争对手。

### Webmail、OSX 和 Windows 客户端的泄漏

无论如何，我继续测试他们的 Webmail 客户端，通过 Email Privacy Tester 看看它是否有任何漏洞。我发现的是，如果你启用了“阻止远程内容”，他们会显示远程内容的占位符图像，这是正常的，也是大多数其他客户端的工作方式。然而，Skiff 的情况有所不同，他们仍然在后台获取远程内容。值得肯定的是，他们确实代理请求，以便你的 IP 地址不被暴露，就像 Gmail 一样，但电子邮件的开启信息仍然暴露出来。这完全违背了阻止远程内容的主要目的，也不是我多年来测试过的其他任何邮件提供商的工作方式。

我把这个问题带回了同一个 Hacker News 帖子。Skiff 的 CEO 回应我说我所说的是“[明显的虚假信息](https://news.ycombinator.com/item?id=37243228)”。不确定他为什么拒绝甚至考虑一下这个 bug 的可能性，我指向了一个工具，他可以自行验证（电子邮件隐私测试器）。我收到了一个奇怪的回复，他测试了并发现它的工作方式与 [Tutanota](https://tutanota.com/) 相同。我测试了 Tutanota 的 Webmail，不，它不是这样的。Tutanota 没有这个 bug，并且与 Skiff 不同，它“以隐私为先”并且 [默认阻止远程内容](https://tutanota.com/security)。

在这一点上，我觉得他不明白问题所在，这没关系。不好的是问题被作为“虚假信息”搪塞过去，而不是被转交给他团队中的某人可能能够理解、诊断和解决这个问题。我制作了一个屏幕录像，并 [上传到了 Youtube](https://www.youtube.com/watch?v=P30Qi2MSbUQ)，展示了这个 bug 的情况。

我还测试了 OSX 和 Windows 客户端，它们的行为方式相同。

### IP 地址泄露，在 iOS

在我的 iPhone 上测试了他们的 iOS 客户端后，我发现它甚至比其他客户端更糟糕。首先，“阻止远程内容”设置未同步，所以我不得不再次应用它。但主要问题是，虽然在 iOS 客户端启用该设置时，他们试图阻止远程内容加载，但当远程内容通过以下任一 html 标签加载时，他们却未能做到：

```
<p style="content:url('http://TRACKING_URL/')"></p>

<p style="background-image:url('http://TRACKING_URL/');"></p> 
```

而在他们未能阻止加载的同时，他们也未能代理它，这意味着不仅你已经读过那封电子邮件的事实被暴露了，你的真实 IP 地址也被发送者暴露了。鉴于 Skiff 对我之前的报告不感兴趣，我没有直接向他们报告这个 bug。我没有测试过他们的 Android 客户端。如果你在使用它，请自行测试。

### 通知他们的用户？

假设他们最终解决了这些 bug（谁知道呢？），很有趣的是看到他们是否会通过电子邮件通知他们的用户有关他们的潜在风险。考虑到他们 CEO 到目前为止的态度，我猜想他们只会把这些问题搁置一边，不通知他们的用户。也许他们会在某个网页上提及，而大多数用户看不到，这样他们就可以声称已经通知了用户。Skiff，证明我错了。

### 允许远程内容的私密方式

CEO 在关于阻止远程内容的线程中对我说的一件事是：“没有绝对安全的方法来加载任何远程内容，而不可能暴露电子邮件打开信息”。我进行了[更正](https://news.ycombinator.com/item?id=37240292)，但没有得到回应。完全有可能在加载远程内容的同时隐藏电子邮件打开信息。你可以通过在交付时获取和存储远程内容来做到这一点，对所有电子邮件都是如此。我不知道有哪些提供商会这样做，但这确实是一个解决问题的方法，希望有一天提供商们开始使用。当然，声称自己是“隐私至上”的提供商。如果所有提供商都开始这样做，它将极大地减少发件人跟踪电子邮件的能力；他们将不得不依赖于用户点击包含唯一标识符的链接。

### 安全审计

根据 Skiff 的[透明度页面](https://skiff.com/transparency)，他们已经进行了四次安全审计，正在进行中：

+   Cure53 2023 年 8 月（即将进行）

+   Trail of Bits 2022 年 7 月

+   Trail of Bits 2022 年 2 月

+   Tom Ritter（安全顾问）2021 年 1 月

他们没有提供任何进一步的信息，所以我们真的不知道实际上是什么作为这些审计的一部分进行了测试，也不知道结果如何。我只能假设他们还没有对他们的网络邮件客户端或桌面应用进行审核，以确保它们的运行方式是否符合预期；即使是对“阻止远程内容”功能的基本测试也会显示出问题。安全审计员，请注意：如果你正在测试与电子邮件相关的内容，存在电子邮件隐私测试工具，而且它是 GPL-3，所以你甚至可以[托管自己的版本](https://gitlab.com/mikecardwell/ept3)。

### MTA-STS

我还测试了他们是否支持[MTA-STS](https://www.ncsc.gov.uk/collection/email-security-and-anti-spoofing/using-mta-sts-to-protect-the-privacy-of-your-emails)。在这里，他们只做了一半的工作。他们支持入站邮件，但不支持出站邮件。我通过禁用我的 MTA 上的 STARTTLS 广告，仅对他们的主机，测试他们是否仍然将邮件送到我的地址（我在此地址上设置了 MTA-STS）。这是他们在我做出更改之前通过 TLS 安全连接向我发送邮件的日志，然后是我做出更改后通过非 TLS 连接向我发送邮件的日志：

```
2023-08-25 18:06:51 1qZbCq-00000C-0T <= mike.cardwell@skiff.com H=outbound-smtp.skiff.com [35.166.143.94]:47782 I=[172.19.0.3]:25 P=esmtps X=TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256 CV=no SNI="mail.grepular.com" S=2612 id=c4588db9-741e-4c6d-a1d4-490432f7cdc6@mail.skiff.com

2023-08-26 15:37:49 1qZvM8-00000A-TS <= mike.cardwell@skiff.com H=outbound-smtp.skiff.com [35.166.143.94]:36226 I=[172.22.0.4]:25 P=esmtp S=2568 id=f1f681b6-0161-45a0-834c-1ab8f8b86361@mail.skiff.com 
```

加油，完成任务 Skiff。

### DMARC 和欺骗

我测试了一下他们是否支持 DMARC，通过从我的 SPF 允许列表之外的 IP 发送一封电子邮件到我的 Skiff 地址，而且没有 DKIM 签名。根据我的 DMARC 记录，他们应该拒绝这封电子邮件，但是他们没有拒绝，而是将其视为我指定的“隔离”，并将其放入垃圾邮件文件夹。从外部看不到，如果 DMARC 失败是否总会导致邮件被过滤到垃圾邮件中，或者他们只是将其视为另一个垃圾邮件指示器。希望至少，失败的 DMARC 邮件 *总是* 会被过滤到垃圾邮件文件夹中。主要问题是，这封电子邮件是伪造的，而且 UI 中没有任何内容表明是这样的情况，对于读者来说。

### 摘要

会有 bug 的存在是可以预料的，但 Skiffs CEO 对于这些 bug 被报告的态度并不是。他只需要对我说：“感谢报告。这不应该这样工作。我会让别人来查看一下。”。因此，我建议你不要信任这家公司处理你的数据。你永远不知道他们过去曾经忽视过什么合法的隐私/安全 bug 报告，或者将来会不会忽视。如果我发现他们解决了这些问题中的任何一个，我会更新这篇博客文章。

### 更新 2023 年 8 月 29 日

他们已经修复了 iOS 上的 IP 地址泄漏问题。没有迹象表明用户已被告知他们的信息泄露。其他问题仍然存在。
