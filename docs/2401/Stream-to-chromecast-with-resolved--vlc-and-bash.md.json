["```\nIP=\"192.168.1.231\"\ncvlc --sout \"#chromecast\" --sout-chromecast-ip=\"$IP\" \"file://....\"\n```", "```\nIP=\"192.168.1.231\"\nyt-dlp \"https://twitch.tv/sovietwomble\" -o - | \\ cvlc --sout \"#chromecast\" --sout-chromecast-ip=\"$IP\" -\n```", "```\n$ resolvectl service _googlecast._tcp local\n```", "```\n$ resolvectl --type=PTR query _googlecast._tcp.local\n_googlecast._tcp.local IN PTR Chromecast-Ultra-13ccb56dd0ea6ce65dbe15b39c573856._googlecast._tcp.local\n```", "```\n$ resolvectl --type=SRV query Chromecast-Ultra-13ccb56dd0ea6ce65dbe15b39c573856._googlecast._tcp.local\nChromecast-Ultra-13ccb56dd0ea6ce65dbe15b39c573856._googlecast._tcp.local IN SRV 0 0 8009 13ccb56d-d0ea-6ce6-5dbe-15b39c573856.local\n```", "```\n$ resolvectl query 13ccb56d-d0ea-6ce6-5dbe-15b39c573856.local\n192.168.1.231\n```", "```\n$ ~/.local/bin/dns-sd\n#!/usr/bin/bash\nset -e\nread -r _ _ _ ptr _ < <(resolvectl --type=PTR query \"$1\")\nread -r _ _ _ _ _ _ srv _ < <(resolvectl --type=SRV query \"$ptr\")\nread -r _ ip _ < <(resolvectl query \"$srv\")\nprintf \"$ip\"\n```", "```\n$ ~/.local/bin/chromecast\n#!/usr/bin/bash\nIP=\"$(dns-sd _googlecast._tcp.local)\"\necho \"Using $IP\"\nyt-dlp \"$1\" -o - | cvlc --sout \"#chromecast\" --sout-chromecast-ip=\"$IP\" -\n```", "```\ndiff --git a/misc/userscripts/cast b/misc/userscripts/cast index ec703d5fb..57c8f95f9 100755 --- a/misc/userscripts/cast +++ b/misc/userscripts/cast @@ -139,37 +139,6 @@ printjs() {\n }\n echo \"jseval -q $(printjs)\" >> \"$QUTE_FIFO\"\n\n-tmpdir=$(mktemp -d) -file_to_cast=${tmpdir}/qutecast -cast_program=$(command -v castnow) - -# pick a ytdl program -for p in \"$QUTE_CAST_YTDL_PROGRAM\" yt-dlp youtube-dl; do -    ytdl_program=$(command -v -- \"$p\") -    [ \"$ytdl_program\" == \"\" ] || break -done - -if [[ \"${cast_program}\" == \"\" ]]; then -    msg error \"castnow can't be found\" -    exit 1 -fi -if [[ \"${ytdl_program}\" == \"\" ]]; then -    msg error \"youtube-dl or a drop-in replacement can't be found in PATH, and no installed program \" \\ -        \"specified in QUTE_CAST_YTDL_PROGRAM (currently \\\"$QUTE_CAST_YTDL_PROGRAM\\\")\" -    exit 1 -fi - -# kill any running instance of castnow -pkill -f -- \"${cast_program}\" - -# start youtube download in stream mode (-o -) into temporary file -\"${ytdl_program}\" -qo - \"$1\" > \"${file_to_cast}\" & -ytdl_pid=$! - +pkill -f -- chromecast\n msg info \"Casting $1\" >> \"$QUTE_FIFO\"\n-# start castnow in stream mode to cast on ChromeCast -tail -F \"${file_to_cast}\" | ${cast_program} - - -# cleanup remaining background process and file on disk -kill ${ytdl_pid} -rm -rf \"${tmpdir}\" +chromecast \"$1\" \n```", "```\nconfig.bind(',c', 'spawn --userscript cast')\n```"]