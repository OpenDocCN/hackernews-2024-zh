<!--yml

ç±»åˆ«ï¼šæœªåˆ†ç±»

æ—¥æœŸï¼š2024-05-27 15:00:54

-->

# æˆ‘çš„å¹¼å„¿ä»ç„¶çƒ­çˆ±é£æœºï¼Œæ‰€ä»¥æˆ‘å‡çº§äº†å¥¹çš„é›·è¾¾ã€‚

> æ¥æºï¼š[https://jacobbartlett.substack.com/p/my-toddler-still-loves-planes-so](https://jacobbartlett.substack.com/p/my-toddler-still-loves-planes-so)

è¿™éƒ¨åˆ†æ˜¯ç‹¬ç«‹å¼€å‘è€…çš„æ•…äº‹ï¼Œéƒ¨åˆ†å‘å¸ƒè¯´æ˜ï¼Œéƒ¨åˆ†æŠ€æœ¯æ–‡æ¡£ï¼Œæˆ‘åœ¨å…¶ä¸­è¯¦ç»†æè¿°äº† [Aviatorâ€”â€”æ‚¨æ‰‹æœºä¸Šçš„é›·è¾¾](https://apps.apple.com/app/aviator-radar-on-your-phone/id6469189335) çš„æœŸå¾…å·²ä¹…çš„å‡çº§ï¼

ä½¿ç”¨æ–°å‡çº§çš„ Aviator 2.0 è¿›è¡Œæ·±å¤œè§‚é£æœºæ´»åŠ¨

> *å¯¹äº HackerNews ç¤¾åŒºçš„æœ‹å‹ä»¬â€”â€”å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œè¯·[å…³æ³¨æˆ‘åœ¨ X/Twitter ä¸Š](https://twitter.com/jacobs_handle)ï¼*

[æˆ‘çš„å¹¼å„¿çƒ­çˆ±é£æœºï¼Œæ‰€ä»¥æˆ‘ç»™å¥¹å»ºäº†ä¸€ä¸ªé›·è¾¾](https://jacobbartlett.substack.com/p/my-toddler-still-loves-planes-so)åˆ°ç›®å‰ä¸ºæ­¢æ˜¯æˆ‘å†™è¿‡çš„æœ€æ£’çš„ä¸œè¥¿ã€‚æˆ‘æˆåŠŸåœ°æŠ“ä½äº†é‚£ç§æ¸©é¦¨å’ŒæŠ€æœ¯çš„ç”œèœœç‚¹ï¼Œè€Œä¸”æˆ‘åœ¨å™è¿°ä¸­å±•ç°å‡ºå¯¹é¡¹ç›®çš„çº¯ç²¹äº«å—ã€‚

åœ¨[OpenAI çš„é£æ³¢](https://news.ycombinator.com/item?id=38309611)ä¹‹åä¸€å‘¨å‘å¸ƒï¼Œæˆ‘å·®ä¸€ç‚¹å°±æˆä¸ºäº†æœ¬å‘¨æœ€çƒ­é—¨çš„å¸–å­ï¼Œä½†æœ€ç»ˆè¢«å·²æ•…çš„[æŸ¥ç†Â·èŠ’æ ¼](https://news.ycombinator.com/item?id=38451278)èµ¶è¶…äº†ã€‚

ä½œä¸ºä¸€ä¸ªæœ‰è¿œè§çš„ç‹¬ç«‹å¼€å‘è€…ï¼Œäººä»¬ä¼šè®¤ä¸ºæˆ‘ä¼šç›´æ¥è·³ä¸Šçƒ­æ½®ï¼Œå‘å¸ƒå¦ä¸€ä¸ªç‰ˆæœ¬ï¼Œå¹¶å¼€å§‹æ¢¦æƒ³ç€è´§å¸åŒ–æœºä¼šã€‚

ä½†æ˜¯æœ‰ä¸€ä¸ªç»Šè„šçŸ³ï¼ä¸å¹¸çš„æ˜¯ï¼Œè‡ª 12 æœˆåˆä»¥æ¥ï¼ŒAviator å°±ä¸€ç›´å‡ºæ•…éšœã€‚ [OpenSky Network](https://twitter.com/OpenSkyNetwork) å‘ç”Ÿäº†ä¸€èµ·äº‹ä»¶ï¼Œå¯¼è‡´æˆ‘çš„æ‰€æœ‰ç”¨æˆ·éƒ½å‡ºç°äº†é”™è¯¯ã€‚

å¼€æº OpenSky ç½‘ç»œå‘ç”Ÿäº†ä¸€æ¬¡åœç”µã€‚

å‡ å‘¨æ¥ï¼Œæˆ‘åŠªåŠ›ä¸å»æƒ³è¿™ä»¶äº‹æƒ…ï¼Œå¥‡è¿¹å‘ç”Ÿäº†ã€‚æˆ‘å†æ¬¡æ‰“å¼€åº”ç”¨ï¼ŒæœŸå¾…ç€æŠ˜ç£¨è‡ªå·±çš„æŒä¹…çš„ 502 é”™è¯¯æ¶ˆæ¯æ—¶ï¼Œæˆ‘å¬åˆ°äº†é›·è¾¾ä¸Šæ£€æµ‹åˆ°çš„é£æœºçš„ç‰¹æœ‰çš„æ»´æ»´å£°ã€‚

**å®ƒåˆèƒ½å·¥ä½œäº†ï¼**

åœ¨è¿™ä¸ªè¿Ÿæ¥çš„åœ£è¯å¥‡è¿¹çš„æ¿€åŠ±ä¸‹ï¼Œæˆ‘æŠ•å…¥äº†ä¸¤ä¸ªç–¯ç‹‚çš„æ™šä¸Šï¼Œå…¨èº«å¿ƒåœ°å¯¹ Aviator è¿›è¡Œæ”¹ç‰ˆï¼Œç”¨æˆ‘è„‘åä¸€ç›´åœ¨é…é…¿çš„æƒ³æ³•ã€‚

> **å½“ç„¶ï¼Œæ˜¯åœ¨è®©æˆ‘çš„å¹¼å„¿ä¸ŠåºŠç¡è§‰ä¹‹åã€‚**

æ­¤ç‰ˆæœ¬åŒ…å«äº†ä¸€äº›é—ªäº®çš„æ–°åŠŸèƒ½ï¼Œå¹¶è§£å†³äº†æˆ‘å’Œå¥³å„¿åœ¨ç©åŸç‰ˆæ—¶é‡åˆ°çš„ä¸€äº›é—®é¢˜ã€‚

æˆ‘å·²ç»å½»åº•æ”¹ç‰ˆäº† UIï¼Œæ‰€ä»¥ç°åœ¨æ§åˆ¶å™¨æ”¾åœ¨ä¸€ä¸ªå•ç‹¬çš„èœå•ä¸­ã€‚è¿™åˆ©ç”¨äº† [æ¸è¿›å¼æŠ«éœ²](https://jacobbartlett.substack.com/p/enums-and-design-systems) æ¥ä¿æŒä¸»è¦æ§ä»¶å§‹ç»ˆç½®äºä¸­å¿ƒä½ç½®ï¼Œè€Œé«˜çº§çš„ã€ä¸ç»å¸¸è®¿é—®çš„å·¥å…·åˆ™åœ¨æŠ˜å ä¸‹é¢ã€‚

æ˜¯çš„ï¼Œé€‰æ‹©é¢œè‰²ç»å¯¹æ˜¯ 3 ä¸ªæ ¸å¿ƒæ§åˆ¶ä¹‹ä¸€ã€‚æˆ‘çš„å¥³å„¿æ¯”å–œæ¬¢é£æœºæ›´å–œæ¬¢å®ƒã€‚

æ­¤èœå•å®ç°ä¸ºä¸€ä¸ªå¸¦æœ‰ä¸¤ä¸ªå‘ˆç°æ¡£ä½çš„æ¨¡æ€æ¡†ï¼š

å®ƒè¿˜å…·æœ‰æ¼”ç¤ºæ‹–åŠ¨æŒ‡ç¤ºå™¨ï¼Œä»¥ä¾¿ç”¨æˆ·çŸ¥é“ä»–ä»¬å¯ä»¥å±•å¼€æ§ä»¶èœå•ï¼Œå¹¶è‡³å…³é‡è¦åœ°å¯ç”¨äº†åå°äº¤äº’ï¼Œä»¥ä¾¿æˆ‘ä»¬ä¸ä¼šåœ¨ä¸»é›·è¾¾ UI ä¸­é®æŒ¡è§†çº¿ã€‚

```
// ControlsView.swift

var body: some View {
    // ... 
    .presentationDetents(availableDetents, selection: $selectedDetent)
    .presentationDragIndicator(.visible)
    .presentationCornerRadius(24)
    .presentationBackground {
        LinearGradient(colors: [.gray, .spaceGrey],
                           startPoint: .top,
                           endPoint: .bottom)
                .padding(-2)
                .embossEffect()
        }
    .presentationBackgroundInteraction(.enabled)
```

æˆ‘è®¡åˆ’åœ¨2.1ä¸­åˆ©ç”¨æ–°çš„[TipKit](https://developer.apple.com/documentation/tipkit)æ¥ç¡®ä¿è¿™ç§æ¸è¿›å¼æŠ«éœ²ä¸ä¼šè®©æˆ‘ä»¬å¹´è½»ã€ç»éªŒä¸è¶³çš„è‹¹æœç²‰ä¸ä»¬é”™è¿‡ã€‚

è¿™ä¸ª`presentationBackground`åŒ…è£…äº†å¦ä¸€ä¸ªæŠ›å…‰æ•ˆæœï¼šæˆ‘ä½¿ç”¨äº†[Paul Hudsonçš„æµ®é›•æ•ˆæœ](https://www.hackingwithswift.com/quick-start/swiftui/how-to-add-metal-shaders-to-swiftui-views-using-layer-effects)ã€‚è¿™æ˜¯å¦ä¸€ä¸ªMetalç€è‰²å™¨ï¼Œå®ƒåœ¨èœå•ä¸Šåº”ç”¨äº†ä¸€ç§å¯çˆ±çš„é‡‘å±è´¨æ„Ÿï¼Œè¿›ä¸€æ­¥æ”¹å–„äº†ä½œä¸ºçœŸå®é›·è¾¾æ§åˆ¶é¢æ¿çš„æ‹Ÿæ€ã€‚

> å¦‚æœæ‚¨æƒ³äº†è§£æ›´å¤šå…³äºåœ¨SwiftUIä¸­åˆ¶ä½œè‡ªå·±çš„ç€è‰²å™¨çš„ä¿¡æ¯ï¼Œè¯·é˜…è¯»æˆ‘çš„æ•™ç¨‹[SwiftUIä¸­çš„é‡‘å±ï¼šå¦‚ä½•ç¼–å†™ç€è‰²å™¨](https://jacobbartlett.substack.com/p/metal-in-swiftui-how-to-write-shaders)ã€‚

åœ¨æ„å»º1.0ç‰ˆæœ¬æ—¶ï¼Œæˆ‘é‡åˆ°äº†ä¸€ä¸ªæŒä¹…çš„é—®é¢˜ã€‚é›·è¾¾æ•ˆæœ*å¤ªå¥½äº†*ã€‚

æ›´å…·ä½“åœ°è¯´ï¼Œå®ƒæ•è·äº†æˆ‘ä¸å¯èƒ½çœ‹åˆ°çš„é£æœºçš„é£è¡Œè¯¦æƒ…ï¼Œæ— è®ºæ˜¯è¿œåœ¨åœ°å¹³çº¿ä¹‹å¤–è¿˜æ˜¯éšè—åœ¨åœ°å½¢åé¢ã€‚è¿™åœ¨ä¼¦æ•¦éƒŠåŒºçš„æ¢¯ç”°ç¾¤å²›ä¸­æˆä¸ºä¸€ä¸ªçœŸæ­£çš„ç—›ç‚¹ã€‚

ç„¶è€Œï¼Œè¿™ä¸ä»…ä»…æ˜¯ä¸€ä¸ªæ•æ„Ÿé—®é¢˜ â€”â€” å½“æˆ‘å»ä¸€ä¸ªå¯çˆ±çš„å¼€æ”¾ç©ºé—´æ—¶ï¼Œæˆ‘å¯ä»¥çœ‹åˆ°æ•°è‹±é‡Œå¤–çš„é£æœºã€‚

è§£å†³æ–¹æ¡ˆå¾ˆæ˜ç¡®ï¼šå®ç°ç¼©æ”¾ã€‚

é£è¡Œå‘˜åœ¨ä¼¦æ•¦ä¸Šç©ºçš„è§†å›¾ï¼Œé»˜è®¤ï¼ˆå·¦ï¼‰å’Œæ”¾å¤§ï¼ˆå³ï¼‰

MapKit SDKå…·æœ‰æ‚¬æµ®åœ¨åœ°çƒä¸Šæ–¹æ˜¾ç¤ºåœ°å›¾çš„`camera`æ¦‚å¿µã€‚æ‚¨å¯ä»¥å‘å…¶æä¾›ä¸€ä¸ª`distance`ï¼ˆä»¥ç±³ä¸ºå•ä½ï¼‰ï¼Œå®ƒä¼šæ ¹æ®æ­¤è·ç¦»æ”¾å¤§å’Œç¼©å°åœ°çƒè¡¨é¢ã€‚

```
// AviatorView.swift

@AppStorage("zoomed") var zoomed: Bool = false

// ...

cameraPosition = .camera(MapCamera(centerCoordinate: coordinate,
                                   distance: (zoomed ? 70 : 100) * 1_000,
                                   heading: angle))
```

åœ¨å‘¨æœ«åŒ†å¿™å‘å¸ƒä¸€ä¸ªç§°èŒçš„ç‰ˆæœ¬æ—¶ï¼Œæˆ‘ä¹Ÿç®€å•åœ°å»æ‰äº†å…¶ä¸­ä¸€ä¸ªé›·è¾¾åœˆä»¥çªå‡ºæ”¾å¤§çš„ç”¨æˆ·ç•Œé¢ã€‚

```
// RadarView.swift 

private var radarCircles: some View {
    GeometryReader { geometry in
        let diameter = min(geometry.size.width, geometry.size.height)
        let middleDiameter = diameter * (2.0 / 3.0)
        let innerDiameter = diameter * (1.0 / 3.0)

        ForEach(zoomed ? [diameter, middleDiameter]
                       : [diameter, middleDiameter, innerDiameter], id: \.self) {

        // drawing the radar circles ... 
}
```

æœ€åˆï¼Œæˆ‘æœ‰ä¸€ä¸ªå¤„ç†ç¼©æ”¾çº§åˆ«çš„`Slider`ç»„ä»¶ï¼Œä½†å³ä½¿æ˜¯æˆ‘æ¼‚äº®çš„A17èŠ¯ç‰‡ä¹Ÿæ— æ³•ä»¥åˆç†çš„å¸§é€Ÿç‡å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚æˆ‘ç°åœ¨æ­£åœ¨ä½¿ç”¨äºŒè¿›åˆ¶ç¼©æ”¾åˆ‡æ¢ï¼Œä½†å¯èƒ½ä¼šè€ƒè™‘æ›¿ä»£æ–¹æ³•æ¥å¤„ç†è¿™ä¸ªç•Œé¢ã€‚

[OpenSky Network API](https://openskynetwork.github.io/opensky-api/)ä»é£æœºåº”ç­”å™¨ä¸­æ”¶é›†äº†å¤§é‡ä¿¡æ¯ï¼Œæˆ‘åœ¨1.0ç‰ˆæœ¬ä¸­æ²¡æœ‰åˆ©ç”¨è¿™äº›ä¿¡æ¯ã€‚è¿™äº›ä¿¡æ¯æœ‰åŠ©äºæ¨åŠ¨2.0ç‰ˆæœ¬çš„è®¸å¤šæ–°åŠŸèƒ½ã€‚

å…¶ä¸­æœ€é‡è¦çš„æ˜¯åˆ‡æ¢æ ‡å¿—çš„èƒ½åŠ› â€”â€” åœ¨æ¯ä¸ªå›¾æ ‡ä¸‹æ–¹æ˜¾ç¤ºæ¯æ¶é£æœºçš„åŸäº§å›½çš„ç®€å•è¡¨æƒ…ç¬¦å·ã€‚

åˆ‡æ¢åŸç‚¹æ ‡å¿—å¼€å’Œå…³

è¿™é‡Œåˆ©ç”¨äº†æ¥è‡ª OpenSky Network API çš„`origin_country`å±æ€§ã€‚è¿™å°†é£æœºçš„èµ·ç‚¹ç»™å‡ºä¸ºä¸€ä¸ªç®€å•çš„æ–‡æœ¬å­—ç¬¦ä¸²ã€‚ä½¿ç”¨åœ¨çº¿æ‰¾åˆ°çš„å…¨é¢å›½å®¶åç§°åˆ—è¡¨ï¼Œæˆ‘å¯ä»¥å°†å­—ç¬¦ä¸²è½¬æ¢ä¸º2å­—ç¬¦å›½å®¶ä»£ç ï¼Œå°†å…¶è½¬æ¢ä¸º Unicode æ ‡é‡ï¼Œæœ€ç»ˆæ„é€ æˆä¸€ä¸ªå›½æ——è¡¨æƒ…ç¬¦å·ã€‚

```
// Country.swift

extension Flight {

    var flag: String {
        guard let countryCode = Country(name: origin_country)?.abbreviation else { return "" }
        return countryCode.uppercased().unicodeScalars.reduce(into: "") {
            if let scalar = UnicodeScalar(UInt32(127397) + $1.value) {
                $0.unicodeScalars.append(scalar)
            }
        }
    }
}
```

å½“ç”¨æˆ·æ‰“å¼€æ­¤åŠŸèƒ½æ—¶ï¼Œå‘MapKitæ³¨é‡Šæ·»åŠ æ–‡æœ¬å°±å˜å¾—å¾ˆç®€å•äº†ã€‚

```
@AppStorage("showFlags") var showFlags: Bool = false

private var planeMapAnnotations: some MapContent {
    ForEach(flights.filter, id: \.icao24) { flight in
        Annotation(showFlags ? flight.flag : "", coordinate: flight.coordinate) {
            // custom annotation view ... 
        }
    }
}
```

æˆ‘ç»å¸¸é‡åˆ°çš„å¦ä¸€ä¸ªé—®é¢˜æ˜¯æˆ‘åœ¨é˜³å…‰æ˜åªšçš„è‹±å›½çš„é‡åŒ–ç”Ÿæ´»çš„ç»“æœã€‚

è™½ç„¶ Aviator å±•ç¤ºäº†å®ƒèƒ½æ‰¾åˆ°çš„æ‰€æœ‰é£æœºï¼Œä½†åœ¨é˜´é›¨å¤©æ°”æ—¶ï¼Œè®¸å¤šé£æœºè¢«äº‘å±‚é®æŒ¡ï¼Œè®©ä½ çœ¯ç€çœ¼ç›åœ¨é˜´æš—ä¸­å¯»æ‰¾é—ªçƒçš„ç¯å…‰ï¼Œè¿™æ˜¾å¾—æœ‰äº›ç‹‚å¦„ã€‚

ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘æ·»åŠ äº†å¦ä¸€ä¸ªæŒ‰é’®æ¥éšè—è¿™äº›æ›´é«˜çš„é£æœºâ€”â€”åœ¨æ™´å¤©æ¨¡å¼å’Œé›¨å¤©æ¨¡å¼ä¹‹é—´åˆ‡æ¢ã€‚

æ³¨æ„ï¼Œåœ¨äº‘æ¨¡å¼ä¸‹ï¼Œå³ä¸Šè±¡é™çš„é«˜ç©ºé£æœºæ¶ˆå¤±äº†ã€‚

ä½¿ç”¨ä» OpenSky Network æ£€ç´¢çš„æ•°æ®å®ç°è¿™ä¸ªåŠŸèƒ½éå¸¸ç®€å•ã€‚æˆ‘å°† 2.5 å…¬é‡Œä½œä¸ºä½äº‘å±‚é®æŒ¡çš„åŸºå‡†ã€‚

```
struct Flight {    

    // ...

    var isLowAltitude: Bool {
        geo_altitude < 2500.0
    }
}
```

ç„¶åå¯ä»¥ä½¿ç”¨è¿™äº›å†…å®¹ä» UI ä¸­è¿‡æ»¤æ‰é«˜ç©ºé£è¡Œï¼š

```
@AppStorage("cloudy") var cloudy: Bool = false 

private var planeMapAnnotations: some MapContent {
    ForEach(flights.filter { cloudy ? $0.isLowAltitude : true }, id: \.icao24) { flight in
        // MapKit annotation ...
    }
}
```

æˆ‘å’Œæˆ‘çš„å¹¼å„¿åœ¨å…¬å›­é‡Œè¿›è¡Œç”¨æˆ·æµ‹è¯•æ—¶ï¼Œå‘ç°äº† Aviator çš„å¦ä¸€ä¸ªé—®é¢˜ã€‚æˆ‘ä»¬çœ‹åˆ°ä¸€æ¶ç›´å‡æœºç›´æ¥é£è¿‡å¤´é¡¶ï¼Œä½† Aviator å´å°†å…¶æ˜¾ç¤ºä¸ºä¸€æ¶æ™®é€šçš„é£æœºã€‚

å¹¸è¿çš„æ˜¯ï¼ŒOpenSky Network API è¿˜æœ‰ä¸€ä¸ªæ•°æ®å¯ä»¥å¸®åŠ©æˆ‘ä»¬ã€‚æˆ‘ä»¬å¯ä»¥æ·»åŠ ä¸€ä¸ªæŸ¥è¯¢å‚æ•°æ¥è·å–ä¸€ä¸ªç‰¹æ®Šçš„ `category` å±æ€§ï¼Œè¯¥å±æ€§è¡¨ç¤ºåº”ç­”æœºå±äºçš„é£æœºç±»å‹ã€‚è¿™å¯ä»¥åŒ…æ‹¬ï¼š

+   å°å‹é£æœºï¼ˆé‡é‡å°äº 15,500 ç£…ï¼‰

+   é‡å‹é£æœºï¼ˆè¶…è¿‡ 300,000 ç£…ï¼‰

+   æ—‹ç¿¼é£æœºï¼ˆå³ç›´å‡æœºï¼‰

+   å¤ªç©º / è·¨å¤§æ°”å±‚é£è¡Œå™¨

+   ä¼å…µ / è·³ä¼è€…ï¼ˆï¼ï¼‰

åœ¨æœ€æ–°çš„æ›´æ–°ä¸­ï¼ŒAviator ç°åœ¨åŒºåˆ†é£æœºå¤§å°ç±»åˆ«ï¼›ç”šè‡³å°†å«æ˜Ÿå’Œç›´å‡æœºåŒºåˆ«ä¸ºä¸åŒçš„å›¾æ ‡ã€‚

ä¹Ÿè®¸åœ¨ 3.0 ä¸­æˆ‘ä¼šå°†è·³ä¼è€…å•ç‹¬æ˜¾ç¤ºå‡ºæ¥ï¼Œä»¥å…æˆ‘çš„ç”¨æˆ·å› é£æœºå†²å‘åœ°é¢è€Œæ„Ÿåˆ°ææ…Œ

æˆ‘é¦–å…ˆåªéœ€è¦å¯¹æˆ‘çš„ `AircraftCategory` æšä¸¾è¿›è¡Œä¸€äº›ç®€å•çš„ä»£ç æ›´æ”¹ã€‚

```
// Flight.swift

enum AircraftCategory: Int {

    // ...   

    var image: Image {
        switch self {
        case .rotorcraft: return Image(systemName: "xmark.circle.fill")
        default: return Image(systemName: "airplane")
        }
    }

    var emoji: String? {
        switch self {
        case .spaceTransatmospheric: return "ğŸ›°ï¸"
        default: return nil
        }
    }

    var scaling: Double {
        switch self {
        case .small: return 0.6
        case .large: return 1
        case .heavy: return 1.5
        // ... 
        default: return 1.0
        }
    }
}
```

æœ€åˆï¼Œæˆ‘æƒ³ä½¿ç”¨ç›´å‡æœºè¡¨æƒ…ç¬¦å·ï¼Œä½†æ˜¯ï¼Œå½“è½¬æ¢ä¸ºå¹³é¢é¢œè‰²æ—¶ï¼ŒğŸš è¡¨æƒ…ç¬¦å·çœ‹èµ·æ¥è¿‡äºåœ†èƒ–ï¼Œæ‰€ä»¥æˆ‘ä½¿ç”¨äº†æ›´æŠ½è±¡çš„åœ†ä¸­åå­— SFSymbolã€‚

æˆ‘éšåå¯ä»¥ä½¿ç”¨è¿™äº›å†…å®¹è°ƒæ•´é£è¡Œæ³¨é‡Šè§†å›¾çš„å¤–è§‚ï¼Œè¯¥è§†å›¾ç»„æˆäº†é›·è¾¾ä¸Šæ˜¾ç¤ºçš„å›¾æ ‡ã€‚è®©è¡¨æƒ…ç¬¦å·è¡¨ç°å¾—åƒå›¾ç‰‡ä¸€æ ·æœ‰ç‚¹å°´å°¬ï¼Œæˆ‘ä½¿ç”¨äº†ä¸€ä¸ªç¼©æ”¾çš„`Text`è§†å›¾ä½œä¸ºç®€å•`Rectangle`ä¸Šçš„è’™ç‰ˆï¼Œä»¥ä¾¿æˆ‘å¯ä»¥åº”ç”¨ä¸Šè‰²å’Œ CRT å±å¹•æ•ˆæœã€‚

```
// FlightAnnotationView.swift

var body: some View {
    aircraft
        .scaleEffect(flight.category.scaling)
        // other effects ...
}

@ViewBuilder
private var aircraft: some View {
    if let emoji {
        GeometryReader { geo in
            Rectangle()
                .mask(
                    Text(emoji)
                        .font(.system(size: min(geo.size.width, geo.size.height)))
                        .frame(width: geo.size.width, height: geo.size.height, alignment: .center)
                )
        }

    } else {
        image
    }
}
```

æˆ‘å·²ç»ä½¿ç”¨æ¥è‡ª OpenSky Network API çš„æ•°æ®å®æ–½äº†è®¸å¤šæ”¹è¿›ã€‚ä½†æ˜¯å¯¹ API æœ¬èº«çš„ä½¿ç”¨æœ‰ä½•æ”¹è¿›å‘¢ï¼Ÿ

åœ¨ Android ç‰ˆæœ¬ä¹‹åï¼Œå¯èƒ½æ˜¯æˆ‘æœ€å¤šè¯·æ±‚çš„åŠŸèƒ½ä¹‹ä¸€*ï¼Œå°±æ˜¯ä½¿ç”¨è‡ªå·±çš„å‡­æ®è®¿é—® APIï¼Œå¸Œæœ›é¿å…æœªç»èº«ä»½éªŒè¯ç‰ˆæœ¬ä½¿ç”¨çš„ç›¸åŒé€Ÿç‡é™åˆ¶ã€‚

å› æ­¤ï¼Œåœ¨å®Œæ•´çš„æ§åˆ¶èœå•ä¸­ï¼Œæˆ‘ç°åœ¨å…è®¸ç”¨æˆ·è¾“å…¥ä»–ä»¬è‡ªå·±çš„å‡­æ®ï¼Œå¹¶é“¾æ¥åˆ°æ³¨å†Œé¡µé¢ã€‚

> **æˆ‘ä»åœ¨ç­‰å¾…ä¸€ä¸ªæœ‰è¿›å–å¿ƒçš„ Android å·¥ç¨‹å¸ˆè‡ªè¡Œç§»æ¤å®ƒâ€”â€”æˆ‘åœ¨è¿™äº›å¸–å­ä¸­æ”¾äº†è¶³å¤Ÿçš„ç»†èŠ‚ï¼æ¬¢è¿ä½ è¿™æ ·åšï¼Œåªè¦å¯¹æ‰€æœ‰äººå…è´¹ã€‚*

OpenSky Network API ç™»å½•ï¼Œé“¾æ¥åˆ°ä»–ä»¬ç½‘ç«™ä¸Šçš„æ³¨å†Œé¡µé¢ã€‚

ä½¿ç”¨æ ‡å‡†çš„ SwiftUI `TextField` å’Œ `SecureField` æ„å»ºè¿™ä¸ªåŠŸèƒ½éå¸¸ç®€å•ã€‚

```
// ControlsView.swift

@AppStorage("username") var username: String = ""
@AppStorage("password") var password: String = ""

TextField("Username", text: $username)
SecureField("Password", text: $password)
```

> *åœ¨æ¿€åŠ¨åœ°å°† 2.0 æ¨å‘ç”Ÿäº§æ—¶ï¼Œæˆ‘æœ‰äº›ç²—å¿ƒï¼Œåœ¨ç”¨æˆ·é»˜è®¤è®¾ç½®ä¸­æ”¾ç½®äº†å¯†ç ã€‚æˆ‘å°†åœ¨ä¸‹ä¸€ä¸ªç‰ˆæœ¬ä¸­å°†å…¶æ”¾å…¥é’¥åŒ™ä¸²ä¸­ï¼Œä½†ç°åœ¨è¯·é¿å…é‡å¤ä½¿ç”¨ä»»ä½•æ•æ„Ÿå¯†ç ã€‚æˆ‘ä¹Ÿä¼šä¿®å¤è‡ªåŠ¨å¤§å†™ã€‚*

æœ€åï¼Œæˆ‘å°†è¿™äº›è¿›è¡Œäº† base-64 ç¼–ç ï¼Œä»¥è£…é¥° API è¯·æ±‚å¹¶è¿›è¡Œ HTTP åŸºæœ¬èº«ä»½éªŒè¯ã€‚

```
// FlightAPI.swift

func fetchLocalFlightData(coordinate: CLLocationCoordinate2D) async throws -> [Flight] {

    // flight data url from coordinate ... 

    var request = URLRequest(url: url)

    if let base64LoginString = getBase64LoginString() {
        request.setValue("Basic \(base64LoginString)", forHTTPHeaderField: "Authorization")
    }

    let data = try await session.data(for: request).0
    let flightData = try decoder.decode(FlightData.self, from: data)
    return flightData.states
}

func getBase64LoginString() -> String? {
    guard let username = UserDefaults.standard.string(forKey: "username"),
          let password = UserDefaults.standard.string(forKey: "password") else { return nil } 
    let loginString = String(format: "%@:%@", username, password)
    guard let loginData = loginString.data(using: String.Encoding.utf8) else { return nil }
    return loginData.base64EncodedString()
}
```

ä¸€å¦‚æ—¢å¾€ï¼Œèƒ½å¤Ÿåˆ›é€ å‡ºæˆ‘å¥³å„¿æƒ³ç©çš„ä¸œè¥¿æ˜¯éå¸¸ä»¤äººæ»¡è¶³çš„ã€‚æˆ‘æœŸå¾…ç€å¥¹èƒ½åŸ¹å…»å‡ºæ›´å¤šçš„å…´è¶£ - ä¹Ÿè®¸å¾ˆå¿«å¥¹ä¼šå¯¹å¹³å°æ¸¸æˆæˆ–é‡é‡‘å±éŸ³ä¹æ„Ÿå…´è¶£ã€‚

å¦‚æœæœ‰äººæœ‰ä»»ä½•åŠŸèƒ½æƒ³æ³•æˆ– ASO çš„å»ºè®®ï¼Œè¯·ç•™ä¸‹è¯„è®ºã€‚æœ€é‡è¦çš„æ˜¯ï¼Œä»Šå¤©ç«‹å³ä¸‹è½½[é£è¡Œå‘˜ - ä½ æ‰‹æœºä¸Šçš„é›·è¾¾](https://apps.apple.com/app/aviator-radar-on-your-phone/id6469189335)2.0ç‰ˆï¼ˆå¹¶ç•™ä¸‹è¯„è®ºï¼Œè¯·ï¼‰ï¼

å¦‚æœä½ å–œæ¬¢è¿™ä¸ªç³»åˆ—ï¼Œè¯·è€ƒè™‘ä¸ä½ çš„æœ‹å‹å’ŒåŒäº‹åˆ†äº«ã€‚

[åˆ†äº«](https://jacobbartlett.substack.com/p/my-toddler-still-loves-planes-so?utm_source=substack&utm_medium=email&utm_content=share&action=share)
