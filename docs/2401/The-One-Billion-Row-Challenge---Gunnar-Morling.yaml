- en: <!--yml
  id: totrans-0
  prefs: []
  type: TYPE_NORMAL
  zh: <!--yml
- en: 'category: æœªåˆ†ç±»'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 'category: æœªåˆ†ç±»'
- en: 'date: 2024-05-27 14:30:29'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: æ—¥æœŸï¼š2024-05-27 14:30:29
- en: -->
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: -->
- en: The One Billion Row Challenge - Gunnar Morling
  id: totrans-4
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ä¸€äº¿è¡ŒæŒ‘æˆ˜ - Gunnar Morling
- en: æ¥æºï¼š[https://www.morling.dev/blog/one-billion-row-challenge/](https://www.morling.dev/blog/one-billion-row-challenge/)
  id: totrans-5
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: æ¥æºï¼š[https://www.morling.dev/blog/one-billion-row-challenge/](https://www.morling.dev/blog/one-billion-row-challenge/)
- en: '*Update Jan 4: Wow, this thing really took off!* *1BRC is discussed at a couple
    of places on the internet, including [Hacker News](https://news.ycombinator.com/item?id=38851337),
    [lobste.rs](https://lobste.rs/s/u2qcnf/one_billion_row_challenge), and [Reddit](https://old.reddit.com/r/programming/comments/18x0x0u/the_one_billion_row_challenge/).*'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: '*æ›´æ–°1æœˆ4æ—¥ï¼šå“‡ï¼Œè¿™äº‹æƒ…çœŸçš„ç«äº†ï¼* *1BRCåœ¨äº’è”ç½‘ä¸Šçš„å‡ ä¸ªåœ°æ–¹éƒ½æœ‰è®¨è®ºï¼ŒåŒ…æ‹¬[Hacker News](https://news.ycombinator.com/item?id=38851337)ã€[lobste.rs](https://lobste.rs/s/u2qcnf/one_billion_row_challenge)å’Œ[Reddit](https://old.reddit.com/r/programming/comments/18x0x0u/the_one_billion_row_challenge/)ã€‚*'
- en: '*Thanks a lot for all the submissions, this is going way beyond what Iâ€™d have
    expected!* *I am behind a bit with evalutions due to the sheer amount of entries,
    I will work through them bit by bit.* *I have also made a few clarifications to
    [the rules](https://github.com/gunnarmorling/1brc#faq) of the challenge; please
    make sure to read them before submitting any entries.*'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '*éå¸¸æ„Ÿè°¢æ‰€æœ‰çš„æŠ•ç¨¿ï¼Œè¿™è¿œè¿œè¶…å‡ºäº†æˆ‘çš„é¢„æœŸï¼* *ç”±äºå‚èµ›ä½œå“æ•°é‡åºå¤§ï¼Œæˆ‘æœ‰ç‚¹æ‹–åè…¿ï¼Œæˆ‘ä¼šä¸€ç‚¹ä¸€ç‚¹åœ°é€ä¸ªè¯„ä¼°ã€‚* *æˆ‘è¿˜å¯¹æŒ‘æˆ˜çš„[è§„åˆ™](https://github.com/gunnarmorling/1brc#faq)åšäº†ä¸€äº›æ¾„æ¸…ï¼Œè¯·åŠ¡å¿…åœ¨æäº¤ä»»ä½•ä½œå“ä¹‹å‰é˜…è¯»å®ƒä»¬ã€‚*'
- en: Letâ€™s kick off 2024 true coder styleâ€”â€‹Iâ€™m excited to announce the [One Billion
    Row Challenge](https://github.com/gunnarmorling/onebrc) (1BRC), running from Jan
    1 until Jan 31.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬ä»¥çœŸæ­£çš„ç¼–ç¨‹è€…é£æ ¼å¼€å§‹2024å¹´â€”æˆ‘å¾ˆå…´å¥‹åœ°å®£å¸ƒ[One Billion Row Challenge](https://github.com/gunnarmorling/onebrc)ï¼ˆ1BRCï¼‰ï¼Œä»1æœˆ1æ—¥æŒç»­åˆ°1æœˆ31æ—¥ã€‚
- en: 'Your mission, should you decide to accept it, is deceptively simple: write
    a Java program for retrieving temperature measurement values from a text file
    and calculating the min, mean, and max temperature per weather station. Thereâ€™s
    just one caveat: the file has **1,000,000,000 rows**!'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ å†³å®šæ¥å—è¿™ä¸ªä»»åŠ¡ï¼Œä½ çš„ä»»åŠ¡çœ‹èµ·æ¥å¾ˆç®€å•ï¼šç¼–å†™ä¸€ä¸ªJavaç¨‹åºï¼Œä»æ–‡æœ¬æ–‡ä»¶ä¸­æ£€ç´¢æ¸©åº¦æµ‹é‡å€¼ï¼Œå¹¶è®¡ç®—æ¯ä¸ªæ°”è±¡ç«™çš„æœ€å°ã€å¹³å‡å’Œæœ€å¤§æ¸©åº¦ã€‚åªæœ‰ä¸€ä¸ªå°é—®é¢˜ï¼šè¿™ä¸ªæ–‡ä»¶æœ‰**10äº¿è¡Œ**ï¼
- en: 'The text file has a simple structure with one measurement value per row:'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: æ–‡æœ¬æ–‡ä»¶å…·æœ‰ç®€å•çš„ç»“æ„ï¼Œæ¯è¡Œä¸€ä¸ªæµ‹é‡å€¼ï¼š
- en: '[PRE0]'
  id: totrans-11
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '1'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: '1'
- en: '2'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '2'
- en: '3'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: '3'
- en: '4'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: '4'
- en: '5'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '5'
- en: '6'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: '6'
- en: '[PRE1]'
  id: totrans-18
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Hamburg;12.0
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: æ±‰å ¡;12.0
- en: Bulawayo;8.9
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: å¸ƒæ‹‰ç“¦çº¦;8.9
- en: Palembang;38.8
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: å·´é‚»æ¸¯;38.8
- en: St. John's;15.2
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: åœ£çº¦ç¿°;15.2
- en: Cracow;12.6
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: å…‹æ‹‰ç§‘å¤«;12.6
- en: '...'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: '...'
- en: '[PRE2]'
  id: totrans-25
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'The program should print out the min, mean, and max values per station, alphabetically
    ordered like so:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: è¯¥ç¨‹åºåº”è¯¥æŒ‰ç…§å­—æ¯é¡ºåºæ‰“å°å‡ºæ¯ä¸ªç«™ç‚¹çš„æœ€å°ã€å¹³å‡å’Œæœ€å¤§å€¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
- en: '[PRE3]'
  id: totrans-27
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '1'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: '1'
- en: '[PRE4]'
  id: totrans-29
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '{Abha=5.0/18.0/27.4, Abidjan=15.7/26.0/34.1, AbÃ©chÃ©=12.1/29.4/35.6, Accra=14.7/26.4/33.1,
    Addis Ababa=2.1/16.0/24.3, Adelaide=4.1/17.3/29.7, ...}'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: '{é˜¿å·´=5.0/18.0/27.4, é˜¿æ¯”è®©=15.7/26.0/34.1, é˜¿è´è°¢=12.1/29.4/35.6, é˜¿å…‹æ‹‰=14.7/26.4/33.1,
    äºšçš„æ–¯äºšè´å·´=2.1/16.0/24.3, é˜¿å¾·è±å¾·=4.1/17.3/29.7, ...}'
- en: '[PRE5]'
  id: totrans-31
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: The goal of the 1BRC challenge is to create the fastest implementation for this
    task, and while doing so, explore the benefits of modern Java and find out how
    far you can push this platform. So grab all your (virtual) threads, reach out
    to the Vector API and SIMD, optimize your GC, leverage AOT compilation, or pull
    any other trick you can think of.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 1BRCæŒ‘æˆ˜çš„ç›®æ ‡æ˜¯ä¸ºè¿™ä¸ªä»»åŠ¡åˆ›å»ºæœ€å¿«çš„å®ç°ï¼ŒåŒæ—¶æ¢ç´¢ç°ä»£Javaçš„ä¼˜åŠ¿ï¼Œå¹¶æ‰¾å‡ºä½ å¯ä»¥æ¨åŠ¨è¿™ä¸ªå¹³å°çš„ç¨‹åº¦ã€‚æ‰€ä»¥æŠ“ä½ä½ çš„ï¼ˆè™šæ‹Ÿï¼‰çº¿ç¨‹ï¼Œåˆ©ç”¨Vector APIå’ŒSIMDï¼Œä¼˜åŒ–ä½ çš„GCï¼Œåˆ©ç”¨AOTç¼–è¯‘ï¼Œæˆ–è€…ä½¿ç”¨ä»»ä½•å…¶ä»–ä½ èƒ½æƒ³åˆ°çš„æŠ€å·§ã€‚
- en: 'Thereâ€™s a few simple rules of engagement for 1BRC (see [here](https://github.com/gunnarmorling/onebrc#running-the-challenge)
    for more details):'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 1BRCçš„å‚ä¸è§„åˆ™å¾ˆç®€å•ï¼ˆæ›´å¤šè¯¦æƒ…è§[è¿™é‡Œ](https://github.com/gunnarmorling/onebrc#running-the-challenge)ï¼‰ï¼š
- en: Any submission must be written in Java
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä»»ä½•æäº¤å¿…é¡»ç”¨Javaç¼–å†™
- en: Any Java distribution available through [SDKMan](https://sdkman.io/) as well
    as early access builds from [openjdk.net](https://openjdk.net) may be used, including
    EA builds for OpenJDK projects like Valhalla
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å¯ä»¥ä½¿ç”¨é€šè¿‡[SDKMan](https://sdkman.io/)å¯ç”¨çš„ä»»ä½•Javaåˆ†å‘ï¼Œä»¥åŠæ¥è‡ª[openjdk.net](https://openjdk.net)çš„æ—©æœŸè®¿é—®æ„å»ºï¼ŒåŒ…æ‹¬Valhallaç­‰OpenJDKé¡¹ç›®çš„EAæ„å»º
- en: No external dependencies may be used
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä¸å¾—ä½¿ç”¨å¤–éƒ¨ä¾èµ–
- en: To enter the challenge, clone the [1brc repository](https://github.com/gunnarmorling/1brc)
    from GitHub and follow the instructions in the README file. There is a very [basic
    implementation](https://github.com/gunnarmorling/1brc/blob/main/src/main/java/dev/morling/onebrc/CalculateAverage_baseline.java)
    of the task which you can use as a baseline for comparisons and to make sure that
    your own implementation emits the correct result. Once youâ€™re satisfied with your
    work, open a pull request against the upstream repo to submit your implementation
    to the challenge.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: è¦å‚åŠ æŒ‘æˆ˜ï¼Œè¯·ä»GitHubå…‹éš†[1brcå­˜å‚¨åº“](https://github.com/gunnarmorling/1brc)ï¼Œå¹¶æŒ‰ç…§READMEæ–‡ä»¶ä¸­çš„è¯´æ˜æ“ä½œã€‚æœ‰ä¸€ä¸ªéå¸¸[åŸºæœ¬çš„å®ç°](https://github.com/gunnarmorling/1brc/blob/main/src/main/java/dev/morling/onebrc/CalculateAverage_baseline.java)ä»»åŠ¡ï¼Œæ‚¨å¯ä»¥å°†å…¶ç”¨ä½œæ¯”è¾ƒçš„åŸºå‡†ï¼Œå¹¶ç¡®ä¿æ‚¨è‡ªå·±çš„å®ç°è¾“å‡ºæ­£ç¡®ç»“æœã€‚ä¸€æ—¦æ‚¨å¯¹è‡ªå·±çš„å·¥ä½œæ»¡æ„ï¼Œè¯·å¯¹ä¸Šæ¸¸å­˜å‚¨åº“æ‰“å¼€æ‹‰å–è¯·æ±‚ï¼Œä»¥å°†æ‚¨çš„å®ç°æäº¤ç»™æŒ‘æˆ˜ã€‚
- en: All submissions will be evaluated by running the program on a [Hetzner Cloud
    CCX33](https://www.hetzner.com/cloud) instance (8 dedicated vCPU, 32 GB RAM).
    The `time` program is used for measuring execution times, i.e. end-to-end times
    are measured. Each contender will be run five times in a row. The slowest and
    the fastest runs are discarded. The mean value of the remaining three runs is
    the result for that contender and will be added to the [leaderboard](https://github.com/gunnarmorling/onebrc#results).
    If you have any questions or would like to discuss any potential 1BRC optimization
    techniques, please join [the discussion](https://github.com/gunnarmorling/1brc/discussions)
    in the GitHub repo.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: æ‰€æœ‰æäº¤å°†é€šè¿‡åœ¨[Hetzner Cloud CCX33](https://www.hetzner.com/cloud)å®ä¾‹ä¸Šè¿è¡Œç¨‹åºè¿›è¡Œè¯„ä¼°ï¼ˆ8ä¸ªä¸“ç”¨vCPUï¼Œ32
    GB RAMï¼‰ã€‚ä½¿ç”¨`time`ç¨‹åºæ¥æµ‹é‡æ‰§è¡Œæ—¶é—´ï¼Œå³ç«¯åˆ°ç«¯æ—¶é—´ã€‚æ¯ä¸ªå‚ä¸è€…å°†è¿ç»­è¿è¡Œäº”æ¬¡ã€‚æœ€æ…¢å’Œæœ€å¿«çš„è¿è¡Œå°†è¢«ä¸¢å¼ƒã€‚å‰©ä¸‹ä¸‰æ¬¡è¿è¡Œçš„å¹³å‡å€¼æ˜¯è¯¥å‚ä¸è€…çš„ç»“æœï¼Œå¹¶å°†è¢«æ·»åŠ åˆ°[æ’è¡Œæ¦œ](https://github.com/gunnarmorling/onebrc#results)ä¸­ã€‚å¦‚æœæ‚¨æœ‰ä»»ä½•ç–‘é—®æˆ–æƒ³è®¨è®ºä»»ä½•æ½œåœ¨çš„1BRCä¼˜åŒ–æŠ€æœ¯ï¼Œè¯·åŠ å…¥GitHubå­˜å‚¨åº“ä¸­çš„[è®¨è®º](https://github.com/gunnarmorling/1brc/discussions)ã€‚
- en: As for a prize, by entering this challenge, you may learn something new, get
    to inspire others, and take pride in seeing your name listed in the scoreboard
    above. Rumor has it that the winner may receive a unique 1ï¸âƒ£ğŸğŸï¸ t-shirt, too.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: è‡³äºå¥–å“ï¼Œé€šè¿‡å‚åŠ è¿™ä¸ªæŒ‘æˆ˜ï¼Œä½ å¯èƒ½ä¼šå­¦åˆ°æ–°ä¸œè¥¿ï¼Œæ¿€åŠ±ä»–äººï¼Œå¹¶ä¸ºçœ‹åˆ°è‡ªå·±çš„åå­—åˆ—åœ¨ä¸Šé¢çš„æ’è¡Œæ¦œä¸Šæ„Ÿåˆ°è‡ªè±ªã€‚æœ‰ä¼ è¨€è¯´è·èƒœè€…å¯èƒ½ä¼šå¾—åˆ°ä¸€ä»¶ç‹¬ä¸€æ— äºŒçš„1ï¸âƒ£ğŸğŸï¸
    Tæ¤ã€‚
- en: So donâ€™t wait, join this challenge, and find out how fast Java can beâ€”â€‹Iâ€™m really
    curious what the community will come up with for this one. Happy 2024, coder style!
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: æ‰€ä»¥ä¸è¦ç­‰äº†ï¼ŒåŠ å…¥è¿™ä¸ªæŒ‘æˆ˜ï¼Œçœ‹çœ‹Javaæœ‰å¤šå¿«â€”â€”æˆ‘çœŸçš„å¾ˆå¥½å¥‡ç¤¾åŒºä¼šä¸ºè¿™ä¸ªæŒ‘æˆ˜æƒ³å‡ºä»€ä¹ˆã€‚Happy 2024, coder style!
