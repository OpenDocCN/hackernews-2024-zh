- en: <!--yml
  id: totrans-0
  prefs: []
  type: TYPE_NORMAL
  zh: <!--yml
- en: 'category: 未分类'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 类别：未分类
- en: 'date: 2024-05-27 14:29:06'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 日期：2024-05-27 14:29:06
- en: -->
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: -->
- en: Cassette
  id: totrans-4
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Cassette
- en: 来源：[https://cassette-lang.com](https://cassette-lang.com)
  id: totrans-5
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 来源：[https://cassette-lang.com](https://cassette-lang.com)
- en: 'Cassette is a small, Lisp-like programming language. It looks like this:'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: Cassette 是一种小型的、类似 Lisp 的编程语言。它看起来像这样：
- en: '[PRE0]'
  id: totrans-7
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: I made Cassette as a simple language for “playful programming”. Playful programming
    is writing something for the sake of writing it. It’s making a software 3D renderer
    or a GIF reader, even though better implementations of those already exist. It’s
    making generative art programs and drawing them with a pen plotter. Cassette itself
    is playful programming—there are certainly other scripting languages that may
    be better for personal projects like these, but this one is mine.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 我创建 Cassette 是为了作为一种简单的“嬉戏编程”语言。嬉戏编程是为了写而写。它是制作软件 3D 渲染器或 GIF 读取器，即使已经存在更好的实现。它是制作生成艺术程序并用钢笔绘制它们。Cassette
    本身就是嬉戏编程——当然还有其他脚本语言可能更适合这些个人项目，但这个是我的。
- en: 'Here are some of the design goals of Cassette:'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是 Cassette 的一些设计目标：
- en: Functional
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 函数式的
- en: Immutable types
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不可变类型
- en: Simplicity over efficiency
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 简单优先于效率
- en: Small implementation
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 实现较小
- en: Few dependencies
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 依赖较少
- en: 'Here’s some future work for Cassette:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 这是 Cassette 的一些未来工作：
- en: Bignum support
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 大数支持
- en: Generational garbage collection
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 分代垃圾回收
- en: Compiler & VM optimization
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 编译器 & 虚拟机优化
- en: Support other backends (WebAssembly, LLVM)
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 支持其他后端（WebAssembly、LLVM）
- en: Destructuring assignment (v2?)
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 解构赋值（v2？）
- en: Pattern-based function dispatch (v2?)
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 基于模式的函数调度（v2？）
- en: This project requires a C build toolchain and SDL2. The source code can be found
    [here](https://git.sr.ht/~zjm/Cassette).
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 该项目需要 C 语言的构建工具链和 SDL2。源代码可以在[这里](https://git.sr.ht/~zjm/Cassette)找到。
- en: Get the project’s dependencies
  id: totrans-23
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 获取项目的依赖项
- en: On macOS with Homebrew, run `brew install llvm git sdl2 sdl2_ttf`
  id: totrans-24
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 macOS 上使用 Homebrew，运行 `brew install llvm git sdl2 sdl2_ttf`
- en: On Debian, run `apt install build-essential clang git libsdl2-dev libsdl2-ttf-dev
    libfontconfig-dev`
  id: totrans-25
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 Debian 上，运行 `apt install build-essential clang git libsdl2-dev libsdl2-ttf-dev
    libfontconfig-dev`
- en: Clone the repo with `git clone https://git.sr.ht/~zjm/Cassette`.
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用 `git clone https://git.sr.ht/~zjm/Cassette` 克隆存储库。
- en: Run `make` to build the project. This creates the executable `cassette`.
  id: totrans-27
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行 `make` 来构建项目。这将创建可执行文件 `cassette`。
- en: Optionally, run `make install` to install the Cassette executable. You can set
    the install folder in the Makefile.
  id: totrans-28
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 可选地，运行 `make install` 来安装 Cassette 可执行文件。您可以在 Makefile 中设置安装文件夹。
- en: Try the example with `./cassette test/test.ct`.
  id: totrans-29
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用 `./cassette test/test.ct` 尝试示例。
- en: Write a little script and run it with `./cassette script.ct`.
  id: totrans-30
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 编写一个小脚本，然后用 `./cassette script.ct` 运行它。
- en: Cassette has two number types, integers and floats. Integers can be written
    in decimal, hexadecimal, or as a character. The normal infix arithmetic operations
    work on numbers, and bitwise operations work on integers.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: Cassette 有两种数字类型，整数和浮点数。整数可以用十进制、十六进制或字符表示。普通的中缀算术运算适用于数字，位运算适用于整数。
- en: '[PRE1]'
  id: totrans-32
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Cassette has symbols, which represent an arbitrary value. `true` and `false`
    are symbols. In boolean operations, all values are truthy except `false` and `nil`.
    Comparison operators only work on numbers, but equality operators work on any
    type. The `and` and `or` operators are short-circuiting.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: Cassette 有符号，代表任意值。`true` 和 `false` 是符号。在布尔运算中，除了 `false` 和 `nil` 外，所有值都为真。比较运算符仅适用于数字，但相等运算符适用于任何类型。`and`
    和 `or` 运算符是短路的。
- en: '[PRE2]'
  id: totrans-34
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Strings are UTF-8 encoded binaries. You can find the length of a string, concatenate
    two binaries, and test if one string or byte is present in another string. Binaries
    also represent other arbitrary byte sequences, such as the contents of a file.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 字符串是 UTF-8 编码的二进制。您可以获取字符串的长度，连接两个二进制，并测试一个字符串或字节是否存在于另一个字符串中。二进制也表示其他任意字节序列，比如文件的内容。
- en: '[PRE3]'
  id: totrans-36
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Cassette has Lisp-style cons pairs, which form linked lists. Pairs are formed
    with the `|` operator, and can be used to easily prepend values to a list. `nil`
    is the empty list. You can find the length of a list, concatenate two lists, and
    test if a value is in a list. Lists can be accessed with an integer index.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: Cassette 有 Lisp 风格的 cons 对，形成链表。对通过 `|` 运算符形成的对进行操作，可以轻松地将值添加到列表中。`nil` 是空列表。您可以获取列表的长度，连接两个列表，并测试值是否在列表中。可以使用整数索引访问列表。
- en: '[PRE4]'
  id: totrans-38
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Cassette has tuples, which are fixed-length arrays of values. Tuples are less
    flexible than lists, but use less memory and are a little faster to access. You
    can find the length of a tuple, concatenate two tuples, and test if a value is
    in a tuple. Tuples can be accessed with an integer index.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: Cassette 具有元组，它们是值的固定长度数组。元组比列表不够灵活，但使用的内存较少，访问速度略快。你可以找到元组的长度，连接两个元组，并测试一个值是否在元组中。可以使用整数索引访问元组。
- en: '[PRE5]'
  id: totrans-40
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Cassette has maps (a.k.a. dictionaries), which can be written like tuples with
    symbol keys. Map literals can only have symbol keys, but other functions can get
    and set keys of other types. You can find the number of key/value pairs in a map,
    merge two maps, and test if a map contains a key.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: Cassette 具有映射（又名字典），可以像使用符号键的元组一样编写。映射字面量只能有符号键，但其他函数可以获取和设置其他类型的键。你可以找到映射中键/值对的数量，合并两个映射，并测试映射是否包含键。
- en: '[PRE6]'
  id: totrans-42
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Variables are defined with `let`. A `do` block can introduce a new scope, and
    can be used to combine a group of expressions into one. Cassette has lexical scoping.
    A variable must start with a letter or underscore, but may contain any characters
    afterward except for whitespace and these reserved characters: `;,.:()[]{}`. This
    means that if you want to write an infix expression, you must often include space
    around the operator to disambiguate it from its operands.'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 `let` 定义变量。`do` 块可以引入新的作用域，并且可以将一组表达式组合成一个。Cassette 具有词法作用域。变量必须以字母或下划线开头，但后面可以包含任何字符，除了空白字符和这些保留字符：`;,.:()[]{}`。这意味着，如果你想要编写一个中缀表达式，通常必须在运算符周围包含空格以消除与操作数的歧义。
- en: '[PRE7]'
  id: totrans-44
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Cassette has `if`/`else` blocks and `cond` blocks for conditionals. A `cond`
    block will evaluate each predicate until one is true, then evaluate that clause.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: Cassette 提供了 `if`/`else` 块和 `cond` 块来进行条件判断。`cond` 块将评估每个条件，直到找到一个为真，然后评估该子句。
- en: '[PRE8]'
  id: totrans-46
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Lambdas can be created with a backslash, argument list, and an arrow. The `def`
    syntax is syntactic sugar for defining a lambda as a variable, with the distinction
    that `def`-declared functions have block scope, so they can be called recursively.
    Functions are called with parentheses.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 使用反斜杠、参数列表和箭头可以创建 Lambda 表达式。`def` 语法是定义 Lambda 作为变量的语法糖，不同之处在于 `def` 声明的函数具有块作用域，因此可以递归调用。函数调用时需要用括号。
- en: '[PRE9]'
  id: totrans-48
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: Cassette programs can be split up into different modules, one per file. Modules
    can be imported directly into a file’s scope, or aliased as a map.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: Cassette 程序可以拆分为不同的模块，每个模块一个文件。模块可以直接导入到文件的作用域中，或者别名为一个映射。
- en: '[PRE10]'
  id: totrans-50
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '[PRE11]'
  id: totrans-51
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '[PRE12]'
  id: totrans-52
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '[PRE13]'
  id: totrans-53
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: For more information about Cassette, check out some of these other documents.
    Stay tuned for future articles.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 关于 Cassette 的更多信息，请查阅其他一些文档。敬请关注未来的文章。
