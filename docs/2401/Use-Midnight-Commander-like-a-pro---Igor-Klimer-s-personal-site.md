<!--yml

分类: 未分类

日期: 2024-05-27 14:59:57

-->

# 像专业人士一样使用 Midnight Commander – Igor Klimer 的个人网站

> 来源：[https://klimer.eu/2015/05/01/use-midnight-commander-like-a-pro/](https://klimer.eu/2015/05/01/use-midnight-commander-like-a-pro/)

如果你曾经使用过 `*nix` 系统，你可能在某个时候遇到了[Midnight Commander](http://www.midnight-commander.org/)，这是一个基于著名的Norton Commander的文件管理器。你可能熟悉基本操作 (`F5` 复制，`F6` 移动，`F8` 删除，等等) 和如何切换面板（嗯，`Tab` 键）。但是 `mc` 提供的远不止于此。本文旨在展示所有常被忽视的有用（可能因人而异）的快捷键和功能。大多数可以通过菜单 (`F9`) 访问，但谁有时间去做呢？

在我们开始之前，让我们确认一些事实。本文是在以下软件上编写和测试的：

+   Midnight Commander 4.8.13

+   GNU bash 4.2.53

哦，确保你正在运行一个现代且支持 UTF-8 的终端 - 例如，rxvt-unicode。

# 别着急

在你运行 `mc` 之前，实际上有一件事我建议你做。`mc` 有退出到当前目录的能力。也就是说，你可以使用 `mc` 导航文件系统（有时比 `cd` 到深层目录更容易）当你退出 `mc` (`F10`) 时，你的 shell 将自动 `cd` 到该目录。这要归功于应该与你的 `mc` 安装捆绑的 `mc-wrapper` 脚本。确切的位置取决于你的发行版 - 在我的（Gentoo）中，它在 `/usr/libexec/mc/`，在 Ubuntu 中据说在 `/usr/share/mc/bin/`。找到后，修改你的 `~/.bashrc`：

```
alias mc='. /usr/libexec/mc/mc-wrapper.sh'

```

重新启动你的 shell，启动 `mc`，切换到另一个目录，退出，你的 shell 应该设置为新目录。

# 选择文件

+   `Insert` (`Ctrl + t` 可替代) – 选择文件（例如，用于复制，移动或删除）。

+   `+` – 根据模式选择文件。

+   `\` – 取消选择基于模式的文件。

+   `*` – 反向选择。如果未选择任何文件，则所有文件都将被选中。

# 访问 shell

+   屏幕底部有一个等待你命令的 shell - 只需开始输入（当没有其他命令对话框打开时）。

+   由于 `Tab` 绑定到切换面板（或在对话框中移动焦点），你必须使用 `Esc Tab` 使用自动完成。连续按两次可获取所有可能的补全（就像在 shell 中一样）。对话框中也是如此。

+   如果你想要检查命令的输出，输入一些内容或只是想要一个更大的控制台，无需退出 `mc`。只需按 `Ctrl + o` – 效果类似于将 `mc` 放到后台，但有一个很好的好处。你从 `mc` 得到的当前工作目录将传递给 shell… 反之亦然！再按一次 `Ctrl + o` 返回到 `mc`。

+   `Ctrl + Enter` 或 `Alt + Enter` – 复制当前选定文件的名称到 shell。

+   `Ctrl + Shift + Enter` – 与上述相同，但复制了完整路径。

# 内置查看器（`F3`）和编辑器（`F4`）

+   内置查看器具有许多内置模式，用于“预览”文件的内容。尝试“查看”二进制文件、归档文件、DOC 文档或图像。在某些情况下，需要外部程序才能使此“预览”工作。

+   如果您想要预览文件的“原始”内容，请按 `Shift + F3`。

+   尽管内置查看器和编辑器功能强大，但有时您可能想要使用您喜欢的软件（*咳咳*vim*咳咳*）。您可以通过设置 `PAGER`（查看器）和 `EDITOR`（编辑器）变量来实现（例如，在您的 `~/.bashrc` 文件中）。然后切换 `选项 -> 配置 -> 使用内部编辑/查看` 选项（按 `F9` 访问顶部菜单）。

# 面板

+   `Alt + ,` – 将 `mc` 的布局从左右切换到上下。大脑 = 炸裂。操作长名称文件非常有用。

+   `Alt + t` – 在面板的列表模式之间切换循环：默认，简要，详细，用户定义。“详细”特别有用，因为它使一个面板最大化，以使其占据窗口的全部宽度，并且较长的文件名适合屏幕。

+   `Alt + i` – 将活动面板与另一个面板同步。也就是说，在另一个面板中显示当前目录。

+   `Ctrl + u` – 交换面板。

+   `Alt + o` – 如果当前选定的文件是目录，则在另一个面板中加载该目录并将选择移动到下一个文件。如果当前选定的文件不是目录，则在另一个面板中加载父目录并将选择移动到下一个文件。这对于快速检查目录列表的内容非常有用。

+   `Ctrl + PgUp`（或者如果您启用了 `Lynx-like motion`，则只需左箭头） – 移动到父目录。

+   `Alt + Shift + h` – 显示目录历史记录。可能比一次返回一个条目更容易导航。

+   `Alt + y` – 移动到历史记录中的上一个目录。

+   `Alt + u` – 移动到历史记录中的下一个目录。

# 搜索文件

+   `Alt + ?` – 显示完整的查找对话框。

+   `Alt + s` 或 `Ctrl + s` – 快速搜索模式。开始键入，选择将移动到第一个匹配的文件。再次按下快捷键跳到另一个匹配项。使用通配符 (`*`, `?`) 更容易匹配。

# 常见操作

+   `Ctrl + Space` – 计算所选目录的大小。当选择在 `..` 上时按下此快捷键，以计算当前目录中所有目录的大小。

+   `Ctrl + x s`（也就是按下 `Ctrl + x`，[释放](https://www.youtube.com/watch?v=L0MK7qz13bU)，然后按下 `s`） – 创建符号链接（将 `s` 更改为 `l` 以获取硬链接）。我觉得这非常有用和直观 – 链接当然会在另一个面板中创建。您可以像处理任何其他文件操作一样更改其目标和名称。

+   `Ctrl + x c` – 打开 `chmod` 对话框。

+   `Ctrl + x o` – 打开 `chown` 对话框。

# 虚拟文件系统 (VFS)

`mc`有一个称为虚拟文件系统的概念。尝试“进入”一个存档（`*.tar.gz`，`*.rpm`甚至`*.jar`） – 您将能够像浏览普通文件夹一样浏览存档的内容，而无需先解压它。只需将所选文件复制到另一个面板即可从存档中提取文件。额外奖励：尝试“进入”一个... `*.patch`文件。

当您意识到远程位置可以以相同方式查看时，这个概念变得更加强大。浏览FTP位置的快速方法只需`cd`到它：`cd ftp://mirrors.tera-byte.com/pub/gentoo`（我找到的第一个Gentoo FTP镜像）。您将能够像平常一样与文件交互。要退出这个远程位置，`cd`到一个本地目录。只需输入`cd`就足够了，因为它会带您到您的主目录。

VFS也适用于SFTP和Samba共享。查看man页面以获取有关如何指定用户/密码等信息的更多信息。

# 有用的选项

+   **配置**

    +   `详细操作` 和 `计算总数` – 使复制/移动等操作具有更详细的进度对话框。

+   **布局**

    +   `等分` – 取消选中以定义面板的自定义比例。也许您更喜欢一个面板比另一个面板大？如果您保持其中一个面板处于树模式（或者信息/快速视图也是如此），这将特别有用。

    +   取消选中 `提示栏可见` – 多一个可用的行，少一个噪音行。

+   **面板选项**

    +   `显示备份文件` 和 `显示隐藏文件` – 我两个都启用了，因为我经常使用配置文件等。

    +   `Lynx-like运动` – 如上所述，使左箭头转到父目录，而右箭头进入所选目录。比`Home`，`Enter`，`Home`，`Enter`等更快。这个选项相当智能，即如果shell命令行不为空，箭头将像平常一样工作，并允许在命令行中移动光标。

    +   `文件高亮` -> `文件类型` 是有用的，因为它为可执行文件等使用不同的颜色。对于我来说，`权限`并不那么有用，但我绝对可以看到它的用处，例如对于系统管理员。

+   **外观**

    +   这里只有一个选项，`皮肤`。您可以查看`mc`附带的不同皮肤 – 只需从列表中选择一个。我更喜欢`gotar`，因为它与我的[solarized](http://ethanschoonover.com/solarized)终端颜色配合得很好。

    +   有用的提示 – 当以`root`用户登录时设置不同的皮肤。在你经常切换它们（通常是这种情况）时，这样可以更容易区分root用户和普通用户的会话。

# 奖励任务

+   定义您自己的列表模式（`右/左` -> `列表模式...` -> `用户定义`）。按下`F1`键查看可用的列和选项。

+   在树模式中尝试一下：`右/左` -> `树` 或 `命令` -> `目录树`。

+   比较目录（`Ctrl + x d`）

+   填满目录热键列表（`Ctrl + \`）

哇，这是很多内容要理解的。当然，这个列表并不完整（这就是`man mc`的用途），但我已经选择了对*我*最有用的命令和功能。拥抱你觉得有用的部分，忘记其余的，并了解我错过的其他部分！

愿您浏览愉快！

**发布于** 2015年5月1日，2021年1月1日
