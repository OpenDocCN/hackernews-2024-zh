["```\nimport os\nimport psycopg2\n\nfrom pgvector.psycopg2 import register_vector\nconn = psycopg2.connect(user=\"mustafa\", password=\"\", database=\"postgres\")\nregister_vector(conn)\n\nprompt = \"Detailed image analysis dialogue.\\nUSER:[img-10] I need a thorough analysis of this image, including all elements, colors, and any noticeable features.\\nASSISTANT:\"\nmodel = SentenceTransformer('sentence-transformers/all-MiniLM-L6-v2')\n\nfor root, dirs, files in os.walk(\"/Users/mustafa/Pictures/Photos Library.photoslibrary/resources/derivatives/\"):\n    for name in files:\n        x = os.path.join(root, name)\n        filename, ext = os.path.splitext(x)\n        if ext == \".jpeg\":\n          response = llm(prompt, x)\n          description = response['content']\n          embeddings = model.encode(response['description'])\n          cur.execute(\"INSERT INTO results (filename, prompt, model, description, embedding) VALUES(%s, %s, %s, %s)\",\n                      (x, prompt, json.dumps(response), description), embeddings)\n          conn.commit()\n```", "```\nimport ipyplot\nfrom PIL import Image\n\nquery = \"inside of a shopping mall\"\nembeddings = model.encode(query)\ncur.execute(\"SELECT filename, description, embedding <-> %s as score FROM results ORDER BY embedding <-> %s LIMIT 3\", (embeddings, embeddings))\nrows = cur.fetchall()\nimages = []\nlabels = []\nfor row in rows:\n    img = Image.open(row[0])\n    images.append(img)\n    desc = row[1]\n    score = row[2]\n    labels.append(f'{score:.4f}\\n{desc}')\n\nipyplot.plot_images(images, labels, max_images=30, img_width=350, zoom_scale=1)\n```"]