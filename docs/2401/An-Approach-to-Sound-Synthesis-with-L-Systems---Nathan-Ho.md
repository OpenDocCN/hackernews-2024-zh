<!--yml

类别：未分类

日期：2024-05-27 14:39:21

-->

# 使用L-系统进行声音合成的一种方法 | Nathan Ho

> 来源：[https://nathan.ho.name/posts/sound-synthesis-with-l-systems/](https://nathan.ho.name/posts/sound-synthesis-with-l-systems/)

当我刚开始学习音乐技术时，我最初的痴迷之一是一篇由Stelios Manousakis撰写的论文，题为“使用L-系统进行非标准声音合成”，2009年发表在《Leonardo音乐期刊》上。当时，我对纯粹“学术”电子音乐（想象一下斯托克豪森或赛尼亚基斯）很挑剔，而且认为FM和减法等合成方法太庸俗，所以标榜自己为“非标准”的合成方法非常吸引人。如果我能给年轻的自己一些建议，我会告诉他，你必须首先作为声音设计师建立基础，然后才能尝试疯狂的实验性东西。如果你连一个好听的敲鼓声都无法从头开始制作，那么你如何制作来自另一个维度的酷炫外星人风景呢？每个好的后调式作曲家都了解调性，即使只是为了知道如何避免它。你必须知道你打破的规则。

在我积累了更多的艺术成熟经验后，我最近重新阅读了Manousakis的论文，并仍然觉得它很有趣，所以我决定对它进行一些思考。在本文中，我将简要介绍什么是L-系统（网上有很多更好的解释），并演示一个完整的、“最小可行”的系统来用它们生成声音。声音示例已嵌入。

## L-系统和海龟图形

简而言之，L-系统（“Lindenmayer系统”的简称）使用反复应用于称为公理的初始词的重写规则生成一个词序列（字符串）。一个经典的L-系统由规则`a → ab`和`b → a`以及公理`a`给出。在每次迭代中，单词中的每个符号都被其相应规则的右侧替换。这个L-系统的前几次迭代是：

```
a
ab
aba
abaab
abaababa
abaababaabaab
abaababaabaababaababa
```

大多数被研究的L-系统都以这种方式经历了近似指数增长。L-系统可以产生像`abababab`这样的简单模式，也可以产生类似上面的非周期性结果，生成明显的随机性，而完全是确定性的。

L-系统的一个常见用途是将它们应用于海龟图形。为此，L-系统中的每个符号对应于2D空间中海龟的一个指令，例如“向前移动一个单位”或“左转30度”。按顺序从一个字符串中执行指令并在空间中绘制海龟的轨迹会产生一幅图。可能会产生有机的外观分形。

在“使用L-Systems进行非标准声音合成”以及他更详细的2006年硕士论文*音乐L-Systems*中，Manousakis提出了很多不同的探索可能性，但基本思想是他正在将L-Systems产生的海龟图形音效化，并将海龟的状态随时间（位置、方向等）映射到合成参数上。这些L-Systems在不同的时间尺度上运行，从微声音到整个作品的形式。

## L-Systems和微声音

乍一看，这一切可能听起来相当无聊，因为可以采用任何合成算法，并使用海龟图形随时间调制其参数。由于L-Systems和合成方法之间有责任分离，称之为“非标准合成”可能有些夸张其新颖性。你可以争辩说，具有海龟图形的L-Systems实际上是一个随机LFO生成器。

避免这种批评的关键是使用深度集成到合成算法中的L-Systems，并使用微声音技术。举个例子，一个L-Systems，符号解释如下：

+   `p`: 输出正弦波的一个周期

+   `.`: 输出一周期的静音

+   `F`: 增加正弦波频率

+   `f`: 减小正弦波频率

+   `+`: 增加幅度

+   `-`: 减小幅度

根据L-Systems的规则和公理，可能会产生各种各样的声音。一长串连续的`p`会产生一个静态音调，像`pFpFpF`和`pfpfpf`这样的模式会产生扫过和啁啾声，而像`p.p.p.`这样的模式甚至可以通过周期性地在音频和静音之间交替来输出独特的音色。

这个玩具示例存在一些问题，使其不具音乐性。首先，合成方法过于简单，主要产生游走的正弦波音调。其次，减小和增加频率和幅度的符号可能导致这些参数飙升至正或负无穷。

## 一个功能性的L-Systems合成器

要升级合成技术，让我们使用窗口振荡器硬同步。在这种合成方法中，有两个频率：*同步频率*和*内在频率*。一个正弦波运行在内在频率上，每1/同步频率秒，它的相位被重置为0。结果波形乘以一个信号，从1开始，减少到0，并且每1/同步频率秒重置为1。现在有三个合成参数要调制：两个频率和幅度。新的符号集如下：

+   `p`: 输出正弦波的一个周期

+   `.`: 输出一周期的静音

+   `S`: 增加同步频率

+   `s`: 减小同步频率

+   `I`: 增加内在频率

+   `i`: 减小内在频率

+   `+`: 增加幅度

+   `-`: 减小幅度

要解决超出范围的问题，一种方法是将频率和振幅夹紧到最小和最大值。然而，这会引起另一个问题：包含许多 `S` 但没有多少 `s` 的单词将立即使同步频率达到最大值，这让我感觉不像音乐。我想到的主意是将频率和振幅折叠成正弦波形状，因此，如果单词一直重复输出 `S`，同步频率最终会开始减小。换句话说，六个符号 `SsIi+-` 的效果是将三个随机 LFO 的相位向前或向后移动。除了正弦波之外，还可以使用其他形状的 LFO。

我们现在有一个可靠的系统来解释 L 系统的输出。使其成为一个完整的声音生成系统的剩余工作是设计 L 系统本身。事实证明，这相当容易，因为随机生成规则效果出奇地好。为此，我们将 2-3 个随机符号的单词分配为每个规则的右侧，然后，我们就有了一个 L 系统。作为一个特殊规定，与符号`.`对应的规则必须生成至少一个 `p`，以减少长时间的沉默的机会。

作为一个未完成的部分，有几种方法可以生成迭代的单词。我们可以从一个公理开始，迭代 L 系统直到单词足够长，然后合成最终单词。或者，我们可以迭代 L 系统并合成每一代的结果，将所有合成的波形串联起来。我更喜欢后一种方法，因为听者可能会听到迭代过程，尽管我不确定这实际上有多重要。我还将每个单词截断为最多 1500 个符号；稍后我会解释我为什么这样做。

我们已经完全描述了使用 L 系统和窗口振荡器同步进行声音生成的方法。它具有以下参数：

+   最小和最大同步频率

+   使用 `S` 和 `s` 符号增加或减少同步频率量

+   最小和最大固有频率

+   使用 `I` 和 `i` 符号增加或减少固有频率量

+   使用 `+` 和 `-` 符号增加或减少振幅量

那么，听起来如何？这是随机化上述参数并生成一些未经筛选的声音的结果：

窗口振荡器同步算法和正弦波 LFO 在结果声音上留下了深刻的印记，可能比 L 系统更多。尽管如此，我们得到了明显模式和非周期性噪声运动的混合，清晰地使符号被生产的系统方式声音化。对我来说，这些声音相当有趣，许多声音似乎很难在没有 L 系统的情况下产生，所以我认为这个实验是一个温和的成功。

## 变异规则

一个问题是在大约10秒后，结果变得相当重复和乏味。对于显示长期演变的声音，我们可以尝试随时间改变L系统的规则。每一代，我们取每个规则，并随机删除和添加符号。我发现声音的演变对规则变异非常敏感（这是一件好事 - 这意味着我们所声化的东西真正影响声音），因此每个规则只需以10%的概率变异，并且只添加和删除一个符号就足够了。

由于L系统过程呈指数级增加符号的数量，有必要从每一代的单词中截取部分以确保变异及时发生。否则，变异会变得越来越稀疏。最大单词长度成为决定L系统演化速度的参数。我将其设置为1500。

这里是一些结果，再次未经筛选：

## 评估和进一步方向

我选择了最简单的合成方法，因为我想尽可能接近“听到L系统”的声音，同时还有点音乐性。因此，我得到的声音是原始的、数字的，而且毫不掩饰地颗粒化。我不会把它们作为最终作品，但它们可以作为采样和添加后处理的原材料。

为了使这更具音乐性，我会尝试一个更复杂的合成算法。脉冲星合成将是我的首选，因为它非常通用。我设想使用录制音频的缓冲区作为脉冲星的源，用海龟图形调制缓冲区位置，并模糊采样可识别的小块（0.1秒）和提取波表作为音色（< 0.02秒）的界限。如果更倾向于纯合成方法，则具有多个符号对应多种类型的合成脉冲星可以帮助增加输出的多样性。

正弦波LFO非常独特且易于磨损。为了减少疲劳，将LFO的最小和最大值公开为用户参数（或目标随机调制）。也许有更好的方法来使用符号来调制参数。在图形L系统中，通常会有执行小块条件逻辑的符号，这可以利用来产生避免“火箭”问题的更广泛的调制方式。然而，尽可能地，我更希望复杂性来自L系统本身而不是其解释。

规则变异是个大问题。它将这个系统从静态纹理合成器升级为允许在连贯性和变化之间取得平衡的算法音乐生成器。如果等待足够长的时间（或者设置变异速度足够快），系统可以到达一个完全不同的地方。我设想实时运行它，并允许用户保存和回溯L系统，以创建重复和形式结构，而不仅仅是让它随机漫步。

目前，规则的生成和变异主要是无差别的。规则生成系统可以被偏向于产生更多音乐性结果的方式所偏好。或者，规则也可以暴露给用户以直接编辑作为一种表达方式，而不是使用随机生成。

L系统有许多变体，包括随机L系统和上下文相关L系统。其中一个重要的变体是“分支”L系统，例如，符号`[`将当前海龟状态存储并推送到堆栈，而符号`]`则弹出并恢复状态。在创建分形图形L系统时，这些在图形L系统中很常见。Manousakis提出了将分支L系统解释为产生多声部的方法，并对同时声部数量施加适当的限制。

我还不清楚如何使用L系统以一种在音乐上引人入胜且透明地生成宏观结构，以响应L系统的行为。丢出一个想法，突变过程本身可以被L系统控制。

## 结论

无可否认，本文中的声音示例展示了比音乐性更多的潜力。我对此感到满意。我不知道最终是否会将L系统纳入更严肃的艺术追求中，但知道它们显示出了潜力是件好事。
