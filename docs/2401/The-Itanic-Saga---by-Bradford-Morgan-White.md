<!--yml

分类：未分类

日期：2024 年 5 月 27 日 15:08:16

-->

# 《Itanic Saga》 - 作者：布拉德福德·摩根·怀特

> 来源：[`www.abortretry.fail/p/the-itanic-saga`](https://www.abortretry.fail/p/the-itanic-saga)

米哈伊尔·亚历山德罗维奇·卡尔采夫生于 1923 年 5 月 10 日。他出生在一个从事教育的苏联家庭。当时，这个国家刚刚经历了一场革命而重生。他于 1941 年 6 月 21 日毕业于高中，第二天纳粹德国入侵了苏联。卡尔采夫与他的同胞一起被征入红军。他于当年 10 月加入了一支坦克团，开始了对国家的服务。他参与了北高加索、乌克兰、罗马尼亚、匈牙利、捷克斯洛伐克和奥地利的战斗。命运眷顾着卡尔采夫，他在战争中没有遭受严重的身体伤害。他的服役于 1947 年 2 月结束，期间他获得了勇气勋章、布达佩斯的俘虏勋章、红星勋章和战胜德国的勋章。

米哈伊尔·亚历山德罗维奇·卡尔采夫

战后，卡尔采夫在军队的时间结束了，他开始在莫斯科电力工程学院无线电系学习。他在短短三年内获得了学位，并于 1950 年开始了研究生学习。这使他参与了一个相当令人兴奋的新项目，将决定他职业生涯的方向，即 M-1。这是苏联最早的计算机之一，也是世界上最早的存储程序计算机之一。该项目由伊萨克·布鲁克和尼古拉·马提欣领导。卡尔采夫被证明既有才华又聪明，这些品质使他在布鲁克的实验室中获得了永久职位，并成为 M-2 的负责人。 M-2 项目在一年半的时间内由一个非常小的团队完成。它并不是苏联最强大的机器，但卡尔采夫说它是一个*可靠的计算机*。 M-1 和 M-2 是为民用情况而设计的计算机。

在 1957 年底或 1958 年初，苏联科学院电子控制机械研究所开设了第二个实验室，卡尔采夫担任该实验室的负责人。他的第一个项目是 EUM M-4，随后是 M-4M。 M-4M 每秒可进行两万次操作。该机器使用 23 位二进制数字带有固定点。其 RAM 为 1K 24 位数字，程序 ROM 为 1280 个 30 位数字。I/O 控制与主 CPU 分开，并具有自己的 RAM。 I/O 具有 14 个通道，每秒的组合吞吐量为六千个数字。这是一台完全晶体管化和实时机器，主要用于军事武器控制。因此工作，卡尔采夫获得了苏联国家奖（我了解这是苏联最高奖项之一）。

1962 年，不满意 M-4M 的性能，卡尔采夫开始设计一台新的计算机。M4-2M 在 1963 年 3 月 14 日完成（总共不到一年的开发时间）。这台机器能够每秒执行 22 万次操作，适用于存储在 ROM 中的程序。对于加载到 RAM 中的程序，性能大致减半。RAM 取决于配置，范围从 4K 到 16K 字，每个字 29 位。ROM 根据配置为 4K 或 8K。I/O 速度略高于 M-4M，但构造类似。M4-2M 的一个关键是算术、逻辑和控制操作（包括矩阵乘法）在一个机器周期内执行，而且这台机器能够执行浮点运算。如果这还不够强大，这台机器可以配备 M4-3M 外围计算器和硬件接口系统。通过使用磁鼓，安装后可以扩展 RAM。配备 3M 的 M4-2M 每秒能执行大约 40 万次操作。在一些地方，M4-2M 已经运行了大约三十年，故障时间通常超过一千小时。

1966 年，利用 M4-2M 算术和控制的单周期特性，卡尔采夫设计了一个能够每秒执行十亿次操作的系统。为了实现这一目标，拟议的 M-9 将利用类似 RISC 的明确并行体系结构。在一个周期内，该机器将能够执行 32 条指令。这台机器从未投入生产，但它是非常长指令字（VLIW）机器的第一个设计。使 VLIW 系统与其他任何系统不同的主要思想是每个指令字携带多条指令。然后，这些指令的调度成为语言编译器或汇编器（软件或人类）的职责。M-9 并未实现，而是选择了谢尔盖·列别杰夫的 BESM-6，用于 M-9 本来可能有用的应用。

1969 年，卡尔采夫开始研究 M-10。这是一台带有矢量处理器的 M-9（基本上是）。到 1973 年，这台机器主要用于导弹探测和警告系统以及苏联太空计划中的用途。在 70 年代中期，M-10 开始用于科学研究，首先是固体物质研究，后来是等离子体建模和坍缩。这台机器后来被 1978 年的 M-13 取代，通过 LSI 的使用在大多数方面改进了 M-10。M-13…… 极其宽，具有两百二十五个并行执行单元。这台机器还在苏联太空计划中使用。关于这些 VLIW 机器的工作被记录在卡尔采夫的书“计算系统和同步算术”中。在他的职业生涯中，M·A·卡尔采夫被授予劳动红旗勋章、列宁勋章、荣誉奖章、红星勋章、国家奖（如前所述）和无数奖章。

鲍里斯·巴巴扬 1933 年出生于阿塞拜疆巴库。1957 年毕业于莫斯科物理技术学院。他因在列别杰夫研究所对 Elbrus 2 的工作而被授予苏联国家奖和列宁勋章。Elbrus 1（1972 年至 1978 年开发和建造）和 2（1980 年至 1985 年开发和建造）计算机本质上是 1965 年 BESM-6 RISC 设计，是 LSI 中的超标量、乱序机器，每个 CPU 由几个离散芯片组成。这些机器通过硬件添加了高级语言支持的类型安全和故障安全功能。巴巴扬在 1980 年代中期开始着手于这些机器的继任者。这就是 Elbrus 3。它是建立在卡尔采夫的思想基础上的 VLIW 机器。它放弃了 Elbrus 1 和 2 的高级语言支持，采用了 16 个执行单元的广域设计。第一批 Elbrus 3 芯片于 1991 年制造。根据巴巴扬的说法，Elbrus 3 的一个主要限制是当时俄罗斯的 VLSI 技术并不出色。

1990 年初夏，米哈伊尔·戈尔巴乔夫和十一位苏联计算机科学家访问了硅谷。他们希望与美国公司建立一些合资企业，并在建立良好关系的同时进行技术和思想的分享。戈尔巴乔夫随后邀请了苏联团队会面的一些人访问俄罗斯。其中包括瑟曼·约翰·罗杰斯和罗杰·D·罗斯。在莫斯科的一次会议上，巴巴扬介绍了 Elbrus 3。罗杰斯回到美国后，发表了一篇关于 Elbrus 3 的论文。比尔·乔伊读了这篇论文，于 1990 年底飞往莫斯科与巴巴扬会面。他们在一家餐馆大量消费食物和伏特加，并交谈了数小时。

接下来到达的一组人员包括[Sun Microsystems](https://www.abortretry.fail/p/the-network-is-the-computer)（乔伊回归）和惠普的代表。惠普主要是对获取信息感兴趣，而 Sun，特别是戴夫·迪茨尔（在比尔·乔伊的指示下），愿意资助 Elbrus 3 设计和实现的进一步工作。这导致了莫斯科 SPARC 技术中心的建立，而前苏联其他部分的计算机世界正在崩溃。Sun 与 MCST 之间的工作持续了几年。

HP 在 1989 年聘请了乔希·费舍尔。乔希·费舍尔生于 1946 年 7 月 22 日，出生地在布朗克斯区。他在纽约大学获得数学学士学位，然后于 1979 年获得博士学位。在他的论文中，他创建了追踪调度编译器算法，提出了指令级并行性和 VLIW（Very Long Instruction Word）的概念。当时，费舍尔并不知道卡尔采夫的工作，因为苏联不会发布有关军事系统的任何信息。HP 根据费舍尔的工作基于 VLIW 实现了 EPIC（显式并行指令计算），它旨在成为 PA-RISC 的后继者，最初的芯片代号为 PA-WideWord。英特尔在 1989 年推出了 i860，这也是一款基于费舍尔工作的 VLIW 芯片，但该芯片在市场上失败了。这个失败主要是由于需要复杂的编译器来准确预测任何给定指令在芯片中的运行路径。随着编译器的改进，i860 的性能也在提高。问题在于到 i860 的性能真正可接受的时候，传统的 RISC 机器已经占领了市场，并且更容易开发，而且价格更便宜。这与巴巴扬对 Elbrus 的评价形成了鲜明对比：

> *当西方计算机出现时，那些年轻人来找我，说西方计算机中无法调试所有这些。Elbrus 非常适合调试。软件设计的生产率提高了十倍，我们的调试时间缩短了十倍，这是因为类型安全。还有信任，因为如果程序没有中断，一切都是正确的。再加上容错能力，非常强大的信任度，没有程序错误，没有硬件故障。不幸的是，经济变化之后，继续在安全领域工作变得不可能。我也尝试在英特尔做到这一点，但很难引入，尽管这是非常、非常、非常先进的技术。*

东西方之间的接触引发了许多西方公司的急剧转向。据巴巴扬称，Elbrus 3 远远领先于西方设计。这在一定程度上得到了证实，因为这些公司看到这一点后都想要。Sun 立即启动了一个 VLIW 项目，惠普和英特尔合作开发了新的 64 位 VLIW 设计。对于惠普来说，生产自己的芯片不是一个好主意。他们没有足够的量来使企业变得经济实惠，但英特尔有。对于英特尔来说，分担开发成本是一个明显的胜利，因此 PA-RISC 和 i860 将有一个共同的继任者。这种合作关系于 1994 年正式形成，约翰·克劳福德表示：“*当我们看到 WideWord 时，我们看到了许多我们只是在考虑的事情，已经以它们完全的荣耀出现*。”然而，对于 Sun 来说，他们的 VLIW 项目被放弃了。大卫·迪策尔离开了 Sun，于 1995 年与鲍勃·克梅里克、科林·亨特、埃德·凯利、道格·莱德、马尔科姆·温格和格雷格·齐纳共同创立了 Transmeta。他们的新公司专注于 VLIW 芯片，但这家公司的故事留待以后叙述。

在这个时期的西方，竞争变得异常激烈。Alpha、PowerPC、SPARC、MIPS 和 32 位 x86 都在争夺工作站和数据中心的空间。有一些新兴的想法认为，RISC 在并行性和动态指令调度方面存在缺陷。一些人也担心时钟速度无法增加。流水线处理（以及更重要的超标量设计{多个流水线}）、推测执行、分支预测和乱序执行是当时某些设计解决这个问题的方式。这些方法的问题在于，如果分支预测不正确，整个流水线都是无关的，必须被清除。流水线越深，性能损失就越严重。对于 VLIW/EPIC，这种复杂性转移到了编译器，编译器告诉 CPU 哪些指令可以同时运行。这确实简化了流水线处理等方面的设计，但软件生态系统随之变得极其复杂。对于 Elbrus 团队来说，这不是一个很大的问题，因为软件和硬件都是内部设计的，软件是针对硬件定制的。Elbrus CPU 的用例对设计人员来说也是非常了解的，因此可以轻松进行优化。

英特尔和惠普的合作被称为 Merced，并且遭遇了许多延迟。这些延迟并没有阻止狂热的热潮。1998 年，DEC 的大部分资产被卖给了康柏，康柏选择淘汰 Alpha，转而支持 Merced。SGI 将 MIPS 分拆为自己的公司，因为他们也选择专注于 Merced。惠普显然打算终止 PA-RISC，支持 Merced。竞争对手的数量迅速减少了。

与 Elbrus 团队不同，梅赛德项目中的公司需要与当前行业标准兼容的软件。为此，IBM、SCO、Sequent 和英特尔于 1998 年 10 月 26 日宣布了蒙特利项目。希望他们能建立一个可以在多种架构上运行的单一 UNIX 操作系统。IBM 贡献了 POWER ISA 支持，SCO 提供了 32 位 x86 支持，Sequent 提供了多处理支持，英特尔提供了梅赛德架构信息。实际上，大部分的集成工作和梅赛德软件开发都是由 SCO 完成的。在五个月内，SCO UNIX（本质上是[XENIX](https://www.abortretry.fail/p/the-history-of-xenix)）在梅赛德上运行，并在 1999 年 4 月 8 日完成测试和宣布。在接下来的大约七个月里，SCO 将其他参与者的技术纳入了他们的 x86 产品，并使得在梅赛德上运行 x86 二进制文件成为可能。然而，在 1999 年 5 月，IBM 和英特尔与[Caldera](https://www.abortretry.fail/p/the-history-of-caldera-part-1)、CERN、Cygnus、HP、[Red Hat](https://www.abortretry.fail/p/the-history-of-red-hat)、SGI、SusE、TurboLinux 和 VA Linux Systems 共同启动了 Trillian 项目，重点是将 Linux 移植到梅赛德上。该项目于 2000 年 2 月 2 日完成。IBM 转向 Linux 并且蒙特利项目失败可能有助于 Caldera 的成功以及 SCO 的失败。Caldera 收购了 SCO，UNIX 移植没有任何进展。然而，这确实导致了一些[后续诉讼](https://www.abortretry.fail/p/the-history-of-caldera-part-2)。

经过三年的延误，梅赛德（Merced）在 2001 年 5 月 29 日以 Itanium 的形式发货。来自惠普（HP）、IBM 和戴尔（Dell）的第一批原始设备制造商系统于 6 月发货。Itanium 的架构现在被称为 IA-64，是一款 6-wide VLIW 芯片，运行速度在 733 至 800 MHz 之间，前端总线速度为 266 MT/s。它有 16K 的 L1 缓存，96K 的 L2 缓存，2 或 4 MB 的 L3 缓存，并且是一个单核芯片，插座为 PAC418，采用 180 纳米工艺。说这个芯片性能不佳简直是个婉转的说法。考虑到长时间的开发周期、数十亿美元的开发成本、巨大的宣传和声称它将在市场上击败一切的说法……Itanium 是一个巨大的失败。当时的 32 位 x86 芯片在大多数工作负载上都能胜过它。令人尴尬的是，即使是性能并不那么好的奔腾 4 也在整数性能和内存带宽上击败了 Itanium。这个芯片的强项是事务处理和科学应用。英特尔梅赛德项目负责人约翰·克劳福德（John Crawford）反思道：“*一切都很疯狂。我们在所有地方都在冒险。一切都是新的。当你这样做时，你会失败的。*”负责该芯片的五百人团队也相对经验不足，并且惠普和英特尔之间的分歧导致了设计上的许多妥协。

Intel Itanium 芯片截图，由 der8auer 提供。

HP 和英特尔之间的激烈分歧导致 HP 从 1996 年开始着手 Merced 的继任者 McKinley 的工作。负责继任芯片的团队由 HP 而不是英特尔领导，并在首批 Merced 芯片发货之前于 2000 年 12 月完成了芯片的设计。McKinley 通过减少内存延迟和增加内存带宽、增加 L2 缓存以及将浮点排除在 L1 缓存之外来解决了 Merced 的许多缺点。L3 缓存也被移至芯片上，这增加了其总线带宽并减少了其延迟。虽然 McKinley 将流水线深度减少到了八个阶段（Merced 有十个），但这是通过增加时钟速度、总线速度和缓存来弥补的。McKinley 的推出名为 Itanium 2，于 2002 年 7 月 8 日首次亮相。它是在 180 纳米工艺上制造的，芯片上有 2.21 亿个晶体管。时钟速度为 900 MHz，前端总线速度为 400 MT/s，是一个单核机器，采用 PAC611 插槽。

不幸的是，对于所有参与其中的公司来说，这些改进对于 Itanium 来说来得太迟了。1999 年 10 月 5 日，AMD 宣布了他们对 IA-64 的竞争对手。SledgeHammer 微架构（K8，AMD64 ISA）将实现 16 位、32 位和 64 位 x86 兼容性。2000 年 8 月 10 日，AMD 发布了 x86-64 体系结构程序员概述。这是新体系结构的指令手册。重要的是，在发布开发人员手册之前确保了 Linux 和 Windows 的软件兼容性。到 Itanium 推出的时候，Itanium 系统的用户可以选择 Windows XP 64 位版、Linux 或 HP-UX 作为潜在的操作系统。然而，Itanium 的 x86 仿真非常糟糕，以至于为 Windows 或 Linux 编写并编译为 x86 的任何软件都将运行得非常糟糕。最终，这意味着大多数出售的机器都在运行 HP 自己的 HP-UX。AMD64 完全没有遇到这些问题。它可以本地运行任何 32 位 x86 操作系统和相应的软件。

AMD Opteron 于 2003 年 4 月 22 日推出。很快，Opteron 的性价比使其成为广泛市场的不错选择。它在与 IBM POWER、Alpha 和 Itanium 2 的竞争中表现出色。它得到了 Microsoft（Windows Server 2003）、Red Hat、SuSE、[Mandrake](https://www.abortretry.fail/p/the-history-of-linux-mandrake)和 Sun 的支持，IBM 甚至在 Opteron 上移植了 DB2 到 Linux。对 Itanium 2 的直接回应是 Madison 的修订版。这使得 L3 缓存增加到 6M，时钟速度增加到 1.5 GHz，总线速度增加到 667 MT/s。Madison 采用了新的 130nm 工艺，有助于控制插座的功耗。2004 年 11 月，Madison 9M 跟进，进一步将 L3 缓存增加到 9M，时钟速度增加到 1.6 GHz。对于科学计算至关重要的是，Itanium 2 仍然具有超越 Opteron 的浮点性能，并且 Itanium 的缓存速度要快得多。

Intel 希望 2004 年 Itanium 的销售额达到 280 亿美元（相当于 2024 年约 455 亿美元）。但公司过于乐观了。实际的 Itanium 销售额为 14 亿美元（相当于 2024 年约 22.8 亿美元）。虽然这比 2003 年的销售额（约 4.79 亿美元，相当于 2024 年约 7.99 亿美元）有显著提高，但仍然不够。HP 在 2004 年占据了销售额的 76%，IBM 占了 10%，戴尔占了 5%，SGI 占了 4%，富士通占了 1%，其余销售由 Bull 集团、NEC、Legend、LangChao 和 Unisys 完成。令人惊讶的是，富士通在 2004 年仅卖出了 233 台 Itanium 系统，这显示了 Itanium 的销售量有多低，以及价格有多高。实际上，随着 Alpha、MIPS 和 PA-RISC 的消失，消费者没有选择 Itanium，而是转向了 IBM POWER、Sun SPARC 和 AMD Opteron。HP 的 UNIX 服务器销量下降了 10%，而 IBM 则增长了 13%。虽然对 Itanium 来说是个糟糕的一年，但 Babayan 在 2004 年加入了 Intel。随着 Babayan 的加入，Elbrus E2k 也随之而来，它可以执行 Elbrus VLIW 和 x86 机器码，并且 Babayan 领导的团队成为了 Intel 的俄罗斯研发部门。E2k 能够每个时钟周期执行 20 条指令。虽然它的运行速度仅为 300 MHz，但大量的并行性使其在其他芯片中具有竞争力。在软件方面，E2k 可以运行 Linux 或为其开发的多种实时操作系统。该芯片建立在 130nm 工艺上，拥有 7580 万个晶体管，并且仅消耗 6 瓦的功率。在 Intel，Babayan 成为了软件与解决方案集团的架构总监，也是莫斯科 Intel 研发中心的科学顾问。他的工作重点是编译器、二进制翻译和安全性。他是第二位成为 Intel 院士的欧洲人。

2005 年 1 月，惠普将 OpenVMS 移植到 Itanium 平台，而 IBM 则放弃了 Itanium，转而支持 x86-64 的*Nocona* Xeon（NetBurst，EM64T）。在 IBM 放弃 Itanium 的同时，来自 Bull、富士通、西门子、日立、惠普、英特尔、NEC、SGI 和 Unisys 的高管们在旧金山会面，制定了 Itanium 架构的成功之路。结果是宣布成立 Itanium Solutions Alliance，其目标是到本年度末使 Itanium 成为行业中的主导产品。该集团的总投资额为 100 亿美元（相当于 2024 年的约 157.2 亿美元），用于推广该架构和移植软件。

2006 年 7 月 18 日，英特尔推出了 Itanium 2 9000（Montecito）。这是一款采用 90 纳米工艺制造的双核、超线程处理器，拥有 17.2 亿个晶体管。缓存大小和频率都有所增加，而功耗则降低了。Montecito 之后推出了 Montvale，以 Itanium 9100 的名义销售，主要是为了修复 Montecito 存在的问题。这些是由惠普主导设计的最后一批芯片。英特尔聘请了惠普的工程师，并购买了惠普的相关资产，惠普同意继续投资。

HP ZX6000 Itanium 2 工作站，图片由 Thomas Schanz CCASA 3 提供。

从 2001 年到 2007 年，总共销售了约 18.4 万台 Itanium 系统，惠普继续占据了大部分销量，约占百分之九十五。到 2008 年，惠普的销售额约为 44 亿美元（相当于 2024 年的约 62.74 亿美元）。到 2009 年，这个数字降至 35 亿美元（相当于 2024 年的约 50 亿美元），到 2016 年，这些数字实际上减少了一半。2009 年底，Red Hat 宣布停止对新产品的 Itanium 支持。Red Hat Enterprise Linux 5 将是最后一个可用版本。2010 年 4 月，微软宣布 Windows Server 2008 R2、SQL Server 2008 R2 和 Visual Studio 2010 将是最后一个获得 Itanium 支持的微软产品。2010 年 10 月，英特尔发布了新版本的 C 和 Fortran 编译器，支持 x86-64，并明确不提供 Itanium 版本。Oracle 对 Itanium 的支持在 2011 年结束，惠普对此并不满意。惠普以违约为由起诉 Oracle，最终[裁决对惠普有利](https://web.archive.org/web/20211019155316/https://www.pcworld.com/article/415486/hpe-has-won-3-billion-in-a-lawsuit-against-oracle.html)。

2008 年，惠普向英特尔支付了大约 440 亿美元（2024 年约合 627 亿美元）来继续开发和生产 Itanium，直到 2009 年至 2014 年。另一项交易发生在 2010 年，约为 2.5 亿美元（2024 年约为 3.52 亿美元），将时间框架延长到 2017 年。英特尔这样做了，但正如其自己的软件平台支持所显示的那样，这仅仅是因为与惠普的协议。惠普拥有自己的 HP-UX 和 OpenVMS 工具，并且几乎代表了所有 Itanium 的出货量。正如最后一笔交易所述，最后一颗 Itanium 芯片是于 2017 年 5 月 11 日推出的 Itanium 9700。顶级产品是 9760，具有八个核心、十六个线程，时钟频率为 2.66 GHz，并搭载 32 MB 的缓存。然而，到了这个时候，甚至连惠普似乎也失去了兴趣。他们从 2015 年开始在以前是 Itanium 产品线的产品系列中销售 x86-64 服务器。最后一批 Itanium 订单是在 2020 年 1 月 30 日下达的，最后一批货物是在 2021 年 7 月 29 日发出的。另一方面，Elbrus 仍在继续，最新的芯片采用 16nm 工艺制造，具有十六个核心，并能够使用 8 通道 ECC RAM 的 4TB。一些系统可以配置为四个 CPU，将 RAM 限制提高到 16TB。考虑到这些系统运行 Elbrus Linux，并且不能本地运行 x86 或 ARM 软件，标准基准测试并不是很有用。

Itanium 旨在成为 x86 的普遍替代品，但未能与 AMD64 竞争。主要问题是其价格远高于 AMD，而性能并未能证明价格溢价的合理性。对于特定的工作负载，它是一个不错的产品，因此为惠普赚取了可观的一笔钱。它的表现比人们通常想象的要好，我想如果 Merced 被取消而 McKinley 被交付，该产品可能市场份额会略大一些。最终，Itanium 的失败归结为与公司先前的软件投资不匹配，价格极高，从未完全将芯片性能提升到最高水平，因为高度优化的编译器从未出现，并且与 Opteron 发货时间相距不远。其他公司制造了 VLIW 芯片，并在嵌入式市场、图形市场和特别是 DSP 中使用。然而，对于 Itanium 来说，这只是无法实现。虽然创新和有趣，但 Itanic 在其处女航上沉没了。

* * *

现在，我有来自我涵盖的许多公司的读者，你们中的许多人在我涵盖的时间段内都在场。我的文章中提到了你们中的一些人。欢迎对记录进行任何更正；请随时留下评论。
