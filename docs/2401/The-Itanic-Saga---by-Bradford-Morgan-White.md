<!--yml

分类：未分类

日期：2024年5月27日 15:08:16

-->

# 《Itanic Saga》 - 作者：布拉德福德·摩根·怀特

> 来源：[https://www.abortretry.fail/p/the-itanic-saga](https://www.abortretry.fail/p/the-itanic-saga)

米哈伊尔·亚历山德罗维奇·卡尔采夫生于1923年5月10日。他出生在一个从事教育的苏联家庭。当时，这个国家刚刚经历了一场革命而重生。他于1941年6月21日毕业于高中，第二天纳粹德国入侵了苏联。卡尔采夫与他的同胞一起被征入红军。他于当年10月加入了一支坦克团，开始了对国家的服务。他参与了北高加索、乌克兰、罗马尼亚、匈牙利、捷克斯洛伐克和奥地利的战斗。命运眷顾着卡尔采夫，他在战争中没有遭受严重的身体伤害。他的服役于1947年2月结束，期间他获得了勇气勋章、布达佩斯的俘虏勋章、红星勋章和战胜德国的勋章。

米哈伊尔·亚历山德罗维奇·卡尔采夫

战后，卡尔采夫在军队的时间结束了，他开始在莫斯科电力工程学院无线电系学习。他在短短三年内获得了学位，并于1950年开始了研究生学习。这使他参与了一个相当令人兴奋的新项目，将决定他职业生涯的方向，即M-1。这是苏联最早的计算机之一，也是世界上最早的存储程序计算机之一。该项目由伊萨克·布鲁克和尼古拉·马提欣领导。卡尔采夫被证明既有才华又聪明，这些品质使他在布鲁克的实验室中获得了永久职位，并成为M-2的负责人。 M-2项目在一年半的时间内由一个非常小的团队完成。它并不是苏联最强大的机器，但卡尔采夫说它是一个*可靠的计算机*。 M-1和M-2是为民用情况而设计的计算机。

在1957年底或1958年初，苏联科学院电子控制机械研究所开设了第二个实验室，卡尔采夫担任该实验室的负责人。他的第一个项目是EUM M-4，随后是M-4M。 M-4M每秒可进行两万次操作。该机器使用23位二进制数字带有固定点。其RAM为1K 24位数字，程序ROM为1280个30位数字。I/O控制与主CPU分开，并具有自己的RAM。 I/O具有14个通道，每秒的组合吞吐量为六千个数字。这是一台完全晶体管化和实时机器，主要用于军事武器控制。因此工作，卡尔采夫获得了苏联国家奖（我了解这是苏联最高奖项之一）。

1962年，不满意M-4M的性能，卡尔采夫开始设计一台新的计算机。M4-2M在1963年3月14日完成（总共不到一年的开发时间）。这台机器能够每秒执行22万次操作，适用于存储在ROM中的程序。对于加载到RAM中的程序，性能大致减半。RAM取决于配置，范围从4K到16K字，每个字29位。ROM根据配置为4K或8K。I/O速度略高于M-4M，但构造类似。M4-2M的一个关键是算术、逻辑和控制操作（包括矩阵乘法）在一个机器周期内执行，而且这台机器能够执行浮点运算。如果这还不够强大，这台机器可以配备M4-3M外围计算器和硬件接口系统。通过使用磁鼓，安装后可以扩展RAM。配备3M的M4-2M每秒能执行大约40万次操作。在一些地方，M4-2M已经运行了大约三十年，故障时间通常超过一千小时。

1966年，利用M4-2M算术和控制的单周期特性，卡尔采夫设计了一个能够每秒执行十亿次操作的系统。为了实现这一目标，拟议的M-9将利用类似RISC的明确并行体系结构。在一个周期内，该机器将能够执行32条指令。这台机器从未投入生产，但它是非常长指令字（VLIW）机器的第一个设计。使VLIW系统与其他任何系统不同的主要思想是每个指令字携带多条指令。然后，这些指令的调度成为语言编译器或汇编器（软件或人类）的职责。M-9并未实现，而是选择了谢尔盖·列别杰夫的BESM-6，用于M-9本来可能有用的应用。

1969年，卡尔采夫开始研究M-10。这是一台带有矢量处理器的M-9（基本上是）。到1973年，这台机器主要用于导弹探测和警告系统以及苏联太空计划中的用途。在70年代中期，M-10开始用于科学研究，首先是固体物质研究，后来是等离子体建模和坍缩。这台机器后来被1978年的M-13取代，通过LSI的使用在大多数方面改进了M-10。M-13…… 极其宽，具有两百二十五个并行执行单元。这台机器还在苏联太空计划中使用。关于这些VLIW机器的工作被记录在卡尔采夫的书“计算系统和同步算术”中。在他的职业生涯中，M·A·卡尔采夫被授予劳动红旗勋章、列宁勋章、荣誉奖章、红星勋章、国家奖（如前所述）和无数奖章。

鲍里斯·巴巴扬1933年出生于阿塞拜疆巴库。1957年毕业于莫斯科物理技术学院。他因在列别杰夫研究所对Elbrus 2的工作而被授予苏联国家奖和列宁勋章。Elbrus 1（1972年至1978年开发和建造）和2（1980年至1985年开发和建造）计算机本质上是1965年BESM-6 RISC设计，是LSI中的超标量、乱序机器，每个CPU由几个离散芯片组成。这些机器通过硬件添加了高级语言支持的类型安全和故障安全功能。巴巴扬在1980年代中期开始着手于这些机器的继任者。这就是Elbrus 3。它是建立在卡尔采夫的思想基础上的VLIW机器。它放弃了Elbrus 1和2的高级语言支持，采用了16个执行单元的广域设计。第一批Elbrus 3芯片于1991年制造。根据巴巴扬的说法，Elbrus 3的一个主要限制是当时俄罗斯的VLSI技术并不出色。

1990年初夏，米哈伊尔·戈尔巴乔夫和十一位苏联计算机科学家访问了硅谷。他们希望与美国公司建立一些合资企业，并在建立良好关系的同时进行技术和思想的分享。戈尔巴乔夫随后邀请了苏联团队会面的一些人访问俄罗斯。其中包括瑟曼·约翰·罗杰斯和罗杰·D·罗斯。在莫斯科的一次会议上，巴巴扬介绍了Elbrus 3。罗杰斯回到美国后，发表了一篇关于Elbrus 3的论文。比尔·乔伊读了这篇论文，于1990年底飞往莫斯科与巴巴扬会面。他们在一家餐馆大量消费食物和伏特加，并交谈了数小时。

接下来到达的一组人员包括[Sun Microsystems](https://www.abortretry.fail/p/the-network-is-the-computer)（乔伊回归）和惠普的代表。惠普主要是对获取信息感兴趣，而Sun，特别是戴夫·迪茨尔（在比尔·乔伊的指示下），愿意资助Elbrus 3设计和实现的进一步工作。这导致了莫斯科SPARC技术中心的建立，而前苏联其他部分的计算机世界正在崩溃。Sun与MCST之间的工作持续了几年。

HP在1989年聘请了乔希·费舍尔。乔希·费舍尔生于1946年7月22日，出生地在布朗克斯区。他在纽约大学获得数学学士学位，然后于1979年获得博士学位。在他的论文中，他创建了追踪调度编译器算法，提出了指令级并行性和VLIW（Very Long Instruction Word）的概念。当时，费舍尔并不知道卡尔采夫的工作，因为苏联不会发布有关军事系统的任何信息。HP根据费舍尔的工作基于VLIW实现了EPIC（显式并行指令计算），它旨在成为PA-RISC的后继者，最初的芯片代号为PA-WideWord。英特尔在1989年推出了i860，这也是一款基于费舍尔工作的VLIW芯片，但该芯片在市场上失败了。这个失败主要是由于需要复杂的编译器来准确预测任何给定指令在芯片中的运行路径。随着编译器的改进，i860的性能也在提高。问题在于到i860的性能真正可接受的时候，传统的RISC机器已经占领了市场，并且更容易开发，而且价格更便宜。这与巴巴扬对Elbrus的评价形成了鲜明对比：

> *当西方计算机出现时，那些年轻人来找我，说西方计算机中无法调试所有这些。Elbrus非常适合调试。软件设计的生产率提高了十倍，我们的调试时间缩短了十倍，这是因为类型安全。还有信任，因为如果程序没有中断，一切都是正确的。再加上容错能力，非常强大的信任度，没有程序错误，没有硬件故障。不幸的是，经济变化之后，继续在安全领域工作变得不可能。我也尝试在英特尔做到这一点，但很难引入，尽管这是非常、非常、非常先进的技术。*

东西方之间的接触引发了许多西方公司的急剧转向。据巴巴扬称，Elbrus 3远远领先于西方设计。这在一定程度上得到了证实，因为这些公司看到这一点后都想要。Sun立即启动了一个VLIW项目，惠普和英特尔合作开发了新的64位VLIW设计。对于惠普来说，生产自己的芯片不是一个好主意。他们没有足够的量来使企业变得经济实惠，但英特尔有。对于英特尔来说，分担开发成本是一个明显的胜利，因此PA-RISC和i860将有一个共同的继任者。这种合作关系于1994年正式形成，约翰·克劳福德表示：“*当我们看到WideWord时，我们看到了许多我们只是在考虑的事情，已经以它们完全的荣耀出现*。”然而，对于Sun来说，他们的VLIW项目被放弃了。大卫·迪策尔离开了Sun，于1995年与鲍勃·克梅里克、科林·亨特、埃德·凯利、道格·莱德、马尔科姆·温格和格雷格·齐纳共同创立了Transmeta。他们的新公司专注于VLIW芯片，但这家公司的故事留待以后叙述。

在这个时期的西方，竞争变得异常激烈。Alpha、PowerPC、SPARC、MIPS和32位x86都在争夺工作站和数据中心的空间。有一些新兴的想法认为，RISC在并行性和动态指令调度方面存在缺陷。一些人也担心时钟速度无法增加。流水线处理（以及更重要的超标量设计{多个流水线}）、推测执行、分支预测和乱序执行是当时某些设计解决这个问题的方式。这些方法的问题在于，如果分支预测不正确，整个流水线都是无关的，必须被清除。流水线越深，性能损失就越严重。对于VLIW/EPIC，这种复杂性转移到了编译器，编译器告诉CPU哪些指令可以同时运行。这确实简化了流水线处理等方面的设计，但软件生态系统随之变得极其复杂。对于Elbrus团队来说，这不是一个很大的问题，因为软件和硬件都是内部设计的，软件是针对硬件定制的。Elbrus CPU的用例对设计人员来说也是非常了解的，因此可以轻松进行优化。

英特尔和惠普的合作被称为Merced，并且遭遇了许多延迟。这些延迟并没有阻止狂热的热潮。1998年，DEC的大部分资产被卖给了康柏，康柏选择淘汰Alpha，转而支持Merced。SGI将MIPS分拆为自己的公司，因为他们也选择专注于Merced。惠普显然打算终止PA-RISC，支持Merced。竞争对手的数量迅速减少了。

与Elbrus团队不同，梅赛德项目中的公司需要与当前行业标准兼容的软件。为此，IBM、SCO、Sequent和英特尔于1998年10月26日宣布了蒙特利项目。希望他们能建立一个可以在多种架构上运行的单一UNIX操作系统。IBM贡献了POWER ISA支持，SCO提供了32位x86支持，Sequent提供了多处理支持，英特尔提供了梅赛德架构信息。实际上，大部分的集成工作和梅赛德软件开发都是由SCO完成的。在五个月内，SCO UNIX（本质上是[XENIX](https://www.abortretry.fail/p/the-history-of-xenix)）在梅赛德上运行，并在1999年4月8日完成测试和宣布。在接下来的大约七个月里，SCO将其他参与者的技术纳入了他们的x86产品，并使得在梅赛德上运行x86二进制文件成为可能。然而，在1999年5月，IBM和英特尔与[Caldera](https://www.abortretry.fail/p/the-history-of-caldera-part-1)、CERN、Cygnus、HP、[Red Hat](https://www.abortretry.fail/p/the-history-of-red-hat)、SGI、SusE、TurboLinux和VA Linux Systems共同启动了Trillian项目，重点是将Linux移植到梅赛德上。该项目于2000年2月2日完成。IBM转向Linux并且蒙特利项目失败可能有助于Caldera的成功以及SCO的失败。Caldera收购了SCO，UNIX移植没有任何进展。然而，这确实导致了一些[后续诉讼](https://www.abortretry.fail/p/the-history-of-caldera-part-2)。

经过三年的延误，梅赛德（Merced）在2001年5月29日以Itanium的形式发货。来自惠普（HP）、IBM和戴尔（Dell）的第一批原始设备制造商系统于6月发货。Itanium的架构现在被称为IA-64，是一款6-wide VLIW芯片，运行速度在733至800 MHz之间，前端总线速度为266 MT/s。它有16K的L1缓存，96K的L2缓存，2或4 MB的L3缓存，并且是一个单核芯片，插座为PAC418，采用180纳米工艺。说这个芯片性能不佳简直是个婉转的说法。考虑到长时间的开发周期、数十亿美元的开发成本、巨大的宣传和声称它将在市场上击败一切的说法……Itanium是一个巨大的失败。当时的32位x86芯片在大多数工作负载上都能胜过它。令人尴尬的是，即使是性能并不那么好的奔腾4也在整数性能和内存带宽上击败了Itanium。这个芯片的强项是事务处理和科学应用。英特尔梅赛德项目负责人约翰·克劳福德（John Crawford）反思道：“*一切都很疯狂。我们在所有地方都在冒险。一切都是新的。当你这样做时，你会失败的。*”负责该芯片的五百人团队也相对经验不足，并且惠普和英特尔之间的分歧导致了设计上的许多妥协。

Intel Itanium芯片截图，由der8auer提供。

HP和英特尔之间的激烈分歧导致HP从1996年开始着手Merced的继任者McKinley的工作。负责继任芯片的团队由HP而不是英特尔领导，并在首批Merced芯片发货之前于2000年12月完成了芯片的设计。McKinley通过减少内存延迟和增加内存带宽、增加L2缓存以及将浮点排除在L1缓存之外来解决了Merced的许多缺点。L3缓存也被移至芯片上，这增加了其总线带宽并减少了其延迟。虽然McKinley将流水线深度减少到了八个阶段（Merced有十个），但这是通过增加时钟速度、总线速度和缓存来弥补的。McKinley的推出名为Itanium 2，于2002年7月8日首次亮相。它是在180纳米工艺上制造的，芯片上有2.21亿个晶体管。时钟速度为900 MHz，前端总线速度为400 MT/s，是一个单核机器，采用PAC611插槽。

不幸的是，对于所有参与其中的公司来说，这些改进对于Itanium来说来得太迟了。1999年10月5日，AMD宣布了他们对IA-64的竞争对手。SledgeHammer微架构（K8，AMD64 ISA）将实现16位、32位和64位x86兼容性。2000年8月10日，AMD发布了x86-64体系结构程序员概述。这是新体系结构的指令手册。重要的是，在发布开发人员手册之前确保了Linux和Windows的软件兼容性。到Itanium推出的时候，Itanium系统的用户可以选择Windows XP 64位版、Linux或HP-UX作为潜在的操作系统。然而，Itanium的x86仿真非常糟糕，以至于为Windows或Linux编写并编译为x86的任何软件都将运行得非常糟糕。最终，这意味着大多数出售的机器都在运行HP自己的HP-UX。AMD64完全没有遇到这些问题。它可以本地运行任何32位x86操作系统和相应的软件。

AMD Opteron于2003年4月22日推出。很快，Opteron的性价比使其成为广泛市场的不错选择。它在与IBM POWER、Alpha和Itanium 2的竞争中表现出色。它得到了Microsoft（Windows Server 2003）、Red Hat、SuSE、[Mandrake](https://www.abortretry.fail/p/the-history-of-linux-mandrake)和Sun的支持，IBM甚至在Opteron上移植了DB2到Linux。对Itanium 2的直接回应是Madison的修订版。这使得L3缓存增加到6M，时钟速度增加到1.5 GHz，总线速度增加到667 MT/s。Madison采用了新的130nm工艺，有助于控制插座的功耗。2004年11月，Madison 9M跟进，进一步将L3缓存增加到9M，时钟速度增加到1.6 GHz。对于科学计算至关重要的是，Itanium 2仍然具有超越Opteron的浮点性能，并且Itanium的缓存速度要快得多。

Intel希望2004年Itanium的销售额达到280亿美元（相当于2024年约455亿美元）。但公司过于乐观了。实际的Itanium销售额为14亿美元（相当于2024年约22.8亿美元）。虽然这比2003年的销售额（约4.79亿美元，相当于2024年约7.99亿美元）有显著提高，但仍然不够。HP在2004年占据了销售额的76%，IBM占了10%，戴尔占了5%，SGI占了4%，富士通占了1%，其余销售由Bull集团、NEC、Legend、LangChao和Unisys完成。令人惊讶的是，富士通在2004年仅卖出了233台Itanium系统，这显示了Itanium的销售量有多低，以及价格有多高。实际上，随着Alpha、MIPS和PA-RISC的消失，消费者没有选择Itanium，而是转向了IBM POWER、Sun SPARC和AMD Opteron。HP的UNIX服务器销量下降了10%，而IBM则增长了13%。虽然对Itanium来说是个糟糕的一年，但Babayan在2004年加入了Intel。随着Babayan的加入，Elbrus E2k也随之而来，它可以执行Elbrus VLIW和x86机器码，并且Babayan领导的团队成为了Intel的俄罗斯研发部门。E2k能够每个时钟周期执行20条指令。虽然它的运行速度仅为300 MHz，但大量的并行性使其在其他芯片中具有竞争力。在软件方面，E2k可以运行Linux或为其开发的多种实时操作系统。该芯片建立在130nm工艺上，拥有7580万个晶体管，并且仅消耗6瓦的功率。在Intel，Babayan成为了软件与解决方案集团的架构总监，也是莫斯科Intel研发中心的科学顾问。他的工作重点是编译器、二进制翻译和安全性。他是第二位成为Intel院士的欧洲人。

2005年1月，惠普将OpenVMS移植到Itanium平台，而IBM则放弃了Itanium，转而支持x86-64的*Nocona* Xeon（NetBurst，EM64T）。在IBM放弃Itanium的同时，来自Bull、富士通、西门子、日立、惠普、英特尔、NEC、SGI和Unisys的高管们在旧金山会面，制定了Itanium架构的成功之路。结果是宣布成立Itanium Solutions Alliance，其目标是到本年度末使Itanium成为行业中的主导产品。该集团的总投资额为100亿美元（相当于2024年的约157.2亿美元），用于推广该架构和移植软件。

2006年7月18日，英特尔推出了Itanium 2 9000（Montecito）。这是一款采用90纳米工艺制造的双核、超线程处理器，拥有17.2亿个晶体管。缓存大小和频率都有所增加，而功耗则降低了。Montecito之后推出了Montvale，以Itanium 9100的名义销售，主要是为了修复Montecito存在的问题。这些是由惠普主导设计的最后一批芯片。英特尔聘请了惠普的工程师，并购买了惠普的相关资产，惠普同意继续投资。

HP ZX6000 Itanium 2工作站，图片由Thomas Schanz CCASA 3提供。

从2001年到2007年，总共销售了约18.4万台Itanium系统，惠普继续占据了大部分销量，约占百分之九十五。到2008年，惠普的销售额约为44亿美元（相当于2024年的约62.74亿美元）。到2009年，这个数字降至35亿美元（相当于2024年的约50亿美元），到2016年，这些数字实际上减少了一半。2009年底，Red Hat宣布停止对新产品的Itanium支持。Red Hat Enterprise Linux 5将是最后一个可用版本。2010年4月，微软宣布Windows Server 2008 R2、SQL Server 2008 R2和Visual Studio 2010将是最后一个获得Itanium支持的微软产品。2010年10月，英特尔发布了新版本的C和Fortran编译器，支持x86-64，并明确不提供Itanium版本。Oracle对Itanium的支持在2011年结束，惠普对此并不满意。惠普以违约为由起诉Oracle，最终[裁决对惠普有利](https://web.archive.org/web/20211019155316/https://www.pcworld.com/article/415486/hpe-has-won-3-billion-in-a-lawsuit-against-oracle.html)。

2008年，惠普向英特尔支付了大约440亿美元（2024年约合627亿美元）来继续开发和生产Itanium，直到2009年至2014年。另一项交易发生在2010年，约为2.5亿美元（2024年约为3.52亿美元），将时间框架延长到2017年。英特尔这样做了，但正如其自己的软件平台支持所显示的那样，这仅仅是因为与惠普的协议。惠普拥有自己的HP-UX和OpenVMS工具，并且几乎代表了所有Itanium的出货量。正如最后一笔交易所述，最后一颗Itanium芯片是于2017年5月11日推出的Itanium 9700。顶级产品是9760，具有八个核心、十六个线程，时钟频率为2.66 GHz，并搭载32 MB的缓存。然而，到了这个时候，甚至连惠普似乎也失去了兴趣。他们从2015年开始在以前是Itanium产品线的产品系列中销售x86-64服务器。最后一批Itanium订单是在2020年1月30日下达的，最后一批货物是在2021年7月29日发出的。另一方面，Elbrus仍在继续，最新的芯片采用16nm工艺制造，具有十六个核心，并能够使用8通道ECC RAM的4TB。一些系统可以配置为四个CPU，将RAM限制提高到16TB。考虑到这些系统运行Elbrus Linux，并且不能本地运行x86或ARM软件，标准基准测试并不是很有用。

Itanium旨在成为x86的普遍替代品，但未能与AMD64竞争。主要问题是其价格远高于AMD，而性能并未能证明价格溢价的合理性。对于特定的工作负载，它是一个不错的产品，因此为惠普赚取了可观的一笔钱。它的表现比人们通常想象的要好，我想如果Merced被取消而McKinley被交付，该产品可能市场份额会略大一些。最终，Itanium的失败归结为与公司先前的软件投资不匹配，价格极高，从未完全将芯片性能提升到最高水平，因为高度优化的编译器从未出现，并且与Opteron发货时间相距不远。其他公司制造了VLIW芯片，并在嵌入式市场、图形市场和特别是DSP中使用。然而，对于Itanium来说，这只是无法实现。虽然创新和有趣，但Itanic在其处女航上沉没了。

* * *

现在，我有来自我涵盖的许多公司的读者，你们中的许多人在我涵盖的时间段内都在场。我的文章中提到了你们中的一些人。欢迎对记录进行任何更正；请随时留下评论。
