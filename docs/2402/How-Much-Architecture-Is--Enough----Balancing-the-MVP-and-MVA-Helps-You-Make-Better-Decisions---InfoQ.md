<!--yml

category: 未分类

date: 2024-05-27 14:29:33

-->

# “足够”的架构有多少？平衡MVP和MVA有助于做出更好的决策- InfoQ

> 来源：[https://www.infoq.com/articles/mva-enough-architecture/](https://www.infoq.com/articles/mva-enough-architecture/)

### 关键点

+   避免在MVA上过度投资：关键挑战在于解决MVP当前的挑战，同时预测但实际上不解决未来的挑战。

+   如果MVP不成功，那么MVA就是在浪费精力，但如果MVP成功，那么MVA对产品的健康演化至关重要。

+   MVP和MVA就像两个攀岩者，用绳子系在一起。MVP领先，但不能走得太远，否则MVA将阻碍其发展。

+   MVA超前于MVP也是没有意义的，因为关于MVP价值的反馈可能会使创建MVA的决策失效。

+   在初版发布的开发过程中，MVA将基于可能不成立的假设，因此可能会有些过度投资，但一旦反馈循环运作起来，这将得到纠正。

+   当MVP基于反馈演化时，必须重新考虑MVA。当为一个应用程序创建的架构被另一个应用程序重用时，尤其如此。应用程序支持不同的MVP，因此满足不同的需求。

在一系列先前的[文章](https://www.infoq.com/articles/minimum-viable-architecture/)中，我们介绍了一个称为*最小可行架构*或*MVA*的概念。MVA是*最小可行产品*或*MVP*的架构补充。MVA通过确保MVP在技术上可行、可持续和可扩展，来平衡MVP；这是MVP与一次性概念验证的区别，也是使MVP成为新产品种子的关键因素。

在敏捷环境中扩展MVP概念，我们将每个新产品发布视为延展前一个MVP并提供额外客户成果的新MVP。MVP对应的MVA演化到足以支持对MVP的增量改进。通过这种方式，产品及其关联的软件架构都在一系列增量中演化。这种共同演化如图 1 所示。

![](img/e586a3c7430617c9924e917c23a7d358.png)

**图 1：MVP及其MVA在一系列增量交付中共同演化**

#### 相关赞助内容

这一切听起来都很好，直到我们开始问一些基本问题，比如，“最小”到底是什么，我们怎么知道？同样，“可行”又是什么？

在许多情况下，回答问题并没有花费太多时间或精力；团队被要求快速交付一个“新”产品（即MVP），旨在刺激更多客户需求，他们会做一些技术架构工作（即MVA），以使MVP可发布。

MVP及其相关的MVA都是由时间和资源限制定义的，而不是通过深思熟虑的分析未满足客户需求的结果。

但如果我们花时间了解这些结果并相应地塑造MVP和MVA会怎么样呢？那会是什么样子？

## 如何知道MVP是否最小？

产品是向客户提供结果的工具。产品的最小可能增量是一个提供单一改进结果的产品。每次发布必须至少向某些用户群体提供至少一个改进的结果。如果没有改进至少一个结果，它就不值得发布。如果它提供了多个改进的结果，它可能不是“最小的”。因此，最小的MVP向某些用户群体确切地提供一个改进的结果。

如果产品发布对产品的不同用户群体改善了多个结果，产品组织就错失了通过更频繁地发布较小增量以收集产品发布效果反馈的机会。

当询问一个产品增量是否足够最小时，我们喜欢记住的一条观察来自作者安托万·德·圣埃克苏佩里：

> “完美不是在无可增加的时候，而是在无可减少的时候实现的。”

团队往往希望在发布中再添加“只是一件事”，但是如果尊重“单一结果规则”，团队将比延迟发布以添加一个更快地交付价值并获得反馈。

这讨论强调了使用结果来管理范围而不是特性的价值。如果您的MVP没有以结果的方式表达，那么更难以管理范围，因为更难看到哪些特性是改进目标结果所需的，哪些只是多余的。

稀有的是，一个组织很少能确定一个MVP会改善其所针对的客户结果，因此MVP通常以使用从[精益UX](https://www.interaction-design.org/literature/article/a-simple-introduction-to-lean-ux#:~:text=Creating%20a%20Hypothesis%20in%20Lean%20UX,-The%20hypotheses%20created&text=There's%20a%20simple%20format%20that,level%20of%20sign%20up%20completions.)借鉴的实验技术来表达，例如：

> “我们相信使人们能够[执行某些任务]将导致改善[某种期望的结果]。当我们观察到[该结果的某种度量]时，我们将证明这一点。”

## 如何知道MVP是否可行？

如果关于其交付价值的前提被证明是真实的，同时开发和维护其关联的MVA的成本不超过其经济效益，那么MVP就是可行的。只有一种方法可以证明这一点：让实际用户/客户使用产品并提供反馈。"真实的用户/客户"很重要；内部利益相关者是不够的，并且可能受到确认偏见的影响，因为他们的意见首先塑造了关于MVP的原始想法。手选的焦点小组可能无法代表广大客户群体的需求，因为它们是由塑造MVP概念的人选择的，并且同样受到确认偏见的影响。

对于某些产品来说，确定MVP的可行性可能需要较长的时间，可能是几周，甚至几个月。尽早的反馈可能能够快速确定MVP的价值，即使不能完全确定其价值。在考虑MVP应该是什么时，考虑一下您将如何知道它是有价值的，以及需要多长时间才能知道这一点。

可行性还包括财务可行性的估计。在不深入财务决策过程的情况下，开发产品的成本的现值不能超过产品未来产生的收益的现值。开发MVP和MVA有助于组织确定这个方程式的成本方面，但他们也需要找到评估收益方面的方法。

对于MVP来说，它还必须在产品的生命周期内得到支持才能可行。如果产品在客户需要时出现停止工作的情况，对客户来说是没有价值的。这就是产品的MVA发挥作用的地方：当公司向客户交付MVP时，他们隐含地承诺要支持该MVP，直到告知客户他们将不再支持为止。MVA的目的是确保MVP交付的成果的支持能力。

## 如何确定MVA是否足够小？

MVP和MVA共同回答了一个问题："我们的产品（及其相关软件架构）是否可行，例如在产品的整个生命周期内是否支持和可靠？"每个MVA都试图满足与MVP相关联的质量属性需求（QARs）。如果还满足与MVP无关的其他QARs，则该MVA不是最小的。换句话说，MVA仅支持包含在MVP中的结果，并且必须在产品的预期生命周期内这样做，预期未来需求*应该*在QARs中表达。

MVA必须解决的关键挑战是，它必须解决MVP当前的挑战，同时预见但实际上不解决未来的挑战。换句话说，MVA不能要求进行不可接受的重做来真正解决这些未来的问题。一些重做是可以接受和预期的，但“完全重写”的话意味着架构已失败，所有对可行性的赌注都没有了。

因此，MVA在解决可能从未存在的未来问题和让技术债务堆积到导致“架构破产”的动态平衡中摇摆。在这两种力量之间取得平衡正是经验派发挥作用的地方。

典型问题是开发团队认为他们对MVP暗示的未来架构挑战了解很多。这可能导致对MVA进行过度投资，然后稍后不得不撤销大量工作。例如，他们可能会说：

> "我们知道我们将需要一个消息传递机制，所以让我们在等待业务真正需要什么时开发它。"

是否需要消息传递机制取决于QARs。如果它们无法在产品的预期寿命内满足MVP，他们可能是对的，但他们应该问的问题是："我们现在需要吗？"

如果MVP不成功，他们将花费大量时间和精力开发一个无用的东西。如果他们不开发它，他们可能会发现MVP在某个时候变得无法支持，因此他们也将承担大量技术债务。做出这个决定至关重要，这是一个需要有经验进行权衡的地方。一些早期证据表明MVP将实现其目标也很有帮助，因为它让团队感觉到他们在MVA上的工作是否有用。

在规划MVA内容时，开发团队会问："为了可靠地交付长期的MVP，我们需要满足哪些QARs，以及需要进行什么技术工作？" 架构不需要完全发展来满足这些未来的需求，但它确实需要预见到未来可能需要的变化。

## 第一个MVA需要多少架构？

开发团队根据对MVA需要解决的问题的最初和通常不完整的理解创建初始MVA。他们通常不会有太多的QARs，也许只有更多抱负性而不准确的广泛组织“标准”。这些初始声明通常太模糊以至于没有帮助，例如，“系统必须支持非常大量的并发用户”，“系统必须易于支持和维护”，“系统必须抵御外部威胁”等。

开发团队还将从利益相关者那里得到一些关于他们认为系统需要做什么的初步声明。项目/产品赞助人不会因为在MVP成功的大预测而胆怯。这可能导致开发团队在获得反馈之前过度构建MVA

但是...有时项目赞助人对他们的预测是正确的，即使是过度构建的MVA在用户高需求下也可能遇到困难。而且有一些绝对的事实，即使是最基本的MVA; 大多数组织也无法承受发布安全性差的甚至最简单的产品。

现实情况是，初始MVA与MVP一样，都是基于经验指导的有教养的猜测。你可能不得不建立一些你认为可能是浪费的东西，但你不能不建。初始MVA在某些领域可能会过度构建，而在其他领域可能会不足，只有通过创建、发布和收集反馈才能知道具体情况。MVA应该足够获取反馈，而不是：

+   将组织暴露于对其业务或声誉不可接受的风险中，或

+   花费太多时间开发和完善MVA以延迟重要的反馈

有一件事需要注意，那就是撤销最初的假设/决策可能带来的成本。[技术债务](https://www.infoq.com/articles/technical-debt-tells-you/)是初始MVA不可避免的后果，正如大多数MVP的某些方面最终可能至少部分错误一样。这就是为什么你想要快速获得反馈。

开发团队有时会受到诱惑，复制成功系统的架构作为开始的一种方式，包括使用供应商解决方案。如果能够以不锁定自己的方式进行，这可能是一种不错的方法。只是不要复制比你需要的架构更多，否则可能会创造你负担不起的技术债务余额。此外，在MVP演变时，不要过长时间地保留初始MVA的诱惑。

## 如何确定 MVA 是否可行？

在发布产品增量之前，你不知道。你无法知道。关于MVP是否有用，你绝对没有任何反馈，没有这个，你不知道MVA只是浪费，还是可能需要在产品生命周期内支持一组产品功能。因此，MVA必须通过的第一个门槛是对MVP价值的评估。

我们认为每个产品增量本质上都是一个新的MVP。保持尽可能小的原因很简单：MVP越大，包含不必要内容的可能性就越大。如果MVA的目标是确保MVP的长期可行性，那么保持MVP的小也有助于避免MVA中的臃肿。

MVP 和其 MVA 就像两名被绳索系在一起的攀登者一样（见图 2）。MVP 是领头的攀登者，而 MVA 不能落后太远，否则会伤及 MVP。由于 MVP 就像领头的攀登者，MVA 也没有必要超过 MVP。唯一的例外是系统初始发布的 MVA 必须有一个起点，并且开发团队对初始 MVA 使用的假设可能会导致一些过度投资。一旦反馈循环运转起来，这种情况将自行纠正。

就像一个探索未攀登峰的攀登者一样，MVP 可能会根据反馈调整他们的路线。两名攀登者可以并肩前行，但这并不是最佳解决方案；在构建 MVP 过程中，您将学到一些信息，这些信息有助于决定是否以及如何构建 MVA（包括是否建造它 - 比喻性地，放弃攀登）。

下面是来自早期 [文章](https://www.infoq.com/articles/minimum-viable-architecture) 的一些粗略启发，我们发现这些启发非常有用：

+   "如果做出（或不做出）某个决策会影响产品的可行性和可持续性，或者更改决策在金钱或时间方面成本如此之高，以至于这样做会使产品变得经济不可行、不切实际或不可能，那么这个决策必须作为 MVA 的一部分做出。"

+   "使架构决策透明化有助于组织更好地理解为何做出某些选择，这有助于他们在如何使产品适应不断变化的市场条件和客户需求方面做出更好的决策。"

![](img/435af13eddbf49578d8cfe9ae40c4e67.png)

**图 2：MVP 和 MVA 必须保持紧密联系，以保持其最小和可行性**

一旦您知道 MVP 是有价值和有用的，评估 MVA 将告诉您 MVP 是否是可行的，或者它只是对用户的空头承诺。除非 MVA 可行，否则 MVP 将无法在长期内提供有价值的成果。回到“绳索攀登者”的比喻，如果 MVP 成功，它也可能为自己的失败埋下伏笔，因为它经常会产生大量的技术债务，需要尽快偿还，以确保产品在长期内可行。

如果开发团队遵循了强有力的 [Done 定义](https://www.infoq.com/articles/definition-of-done-mva/)，则可以防止部分技术债务的累积。大部分由 MVP 创建的技术债务需要在开发团队确信 MVP 有价值后尽快解决。延伸“攀登者”隐喻，两名攀登者之间绳索的长度代表了开发团队在保持产品可行性的同时愿意承担的技术债务量。

## 对 MVP 变化的响应

有时提供MVP的反馈并不是组织所希望的。当这种情况发生时，开发团队必须根据反馈进行重大改进。有时甚至意味着更多或更少地重新开始并创建一个新的MVP，甚至完全停止工作，如果业务概念证明不够有价值。

当MVP发生重大变化时，开发团队 *应该* 重新评估相关的MVA，即使过去证明是有用的。也许并非所有内容都是必需的。也许根本不需要。也许需要新的不同的东西。坚持使用旧的MVA，或者从另一个应用程序借用的MVA，有点像走在已经建好的道路上：只有当它带你去想去的地方时才有价值。

当一个组织发现MVP存在缺陷，并且需要进行重大重新考虑时，它也需要重新评估MVA，即使他们已经大量投资于其中。即使只是MVP的一部分被证明是可行的；因为MVA可能主要是为支持不再需要的MVP部分而建立的。重大的范围或视野变化需要触发对MVA的重新考虑，问：“这仍然是最小的吗？”或者“这仍然是可行的吗？”以及“我们将如何知道？”

## 结论

开发团队及其组织很难将产品发布降到绝对的最低程度，因为他们认为，如果将更多的功能打包进去，发布会更有价值。这 *可能* 会更有价值，但也会延迟发布。由于知道发布是否有价值的唯一方法是发布并测量结果，延迟发布以增加更多功能可能会降低发布的价值，如果添加的功能不具备价值性。因此，我们喜欢将增量的最小可行产品（MVP）限制为单一用户/客户群体的单一结果。

同时考虑MVA及其相关的MVP也是很重要的。如果MVP不具有价值，那么MVA也不具有价值。MVA需要支持MVP的长期可行性，但前提是MVP具有价值。MVA必须 *预见* MVP的未来发展，但不需要在发布MVP时解决这些未来的问题。甚至在MVP发布时也不一定需要解决这些问题。

MVP和最小可行动作（MVA）是相互关联的，两者之间经常存在一段时间滞后，以避免在MVP未达到目标时过度投入于MVA。但是它不能落后太远，否则MVP在长期内可能无法得到支持。此外，系统初始版本的MVA必须从某个地方开始，并且开发团队用于初始MVA的假设可能导致一些过度投资。一旦反馈循环运作起来，这种情况将自行纠正。
