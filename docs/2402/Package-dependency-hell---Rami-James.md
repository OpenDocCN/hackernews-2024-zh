<!--yml

category: 未分类

date: 2024-05-29 13:23:05

-->

# 包依赖地狱 — Rami James

> 来源：[https://www.ramijames.com/thoughts/package-dependency-hell](https://www.ramijames.com/thoughts/package-dependency-hell)

像 npm 这样的包管理器为你提供了快速简便的方式访问他们的功能生态系统。不幸的是，你可以快速添加包到项目中的便利性，却使你继承了复杂性。通过使用别人的代码，你节省了一些时间，但未来你可能要付出未知的代价。这取决于上游包维护者。如果他们更新并在你的堆栈中破坏了某些东西，那就是你的责任去更新它。你的代码今天可能能工作，但它原样工作五年后的可能性相当低。随着导入的包越来越多，你将花费大量精力保持更新。这是一场噩梦。你花在维护上的精力本应用于创造新的功能。我认为这是一个相当高的代价。

就像软件开发中的一切，这是一个你可以用一个问题来提出的权衡：你花时间构建别人已经构建过的东西，还是你构建一些新的东西？

当然，你不必使用外部包。你可以所有东西都自己构建。不过让我们面对现实：从头开始构建所有东西非常困难，超出了大多数开发者的能力范围。如果你只是想启动一个项目，你得咬紧牙关，接受这个事实：在它的生命周期内，你将用你的时间来弥补你缺乏深度专业知识的问题。你现在陷入了依赖地狱。最好还是适应一下，因为你会在这里待上一段时间。

这与我正在更加个人化处理的许多现实问题相映成趣。

当你成长起来时，会有一个给你的生活提供路线图的故事，你被期望按照这个路线图来走。今天，我相信这个路线图主要不是为了你的利益，而是为了生产市场经济中胜任的契约仆人。你学习，你工作，你繁衍，然后你死去。你不是为了自己做这些事情；你是为了“更大的利益”。你是为了有用。

我讨厌这个世界的结构。它让我太多地想起我之前描述过的 JavaScript 生态系统中的依赖地狱。

开始新的生活？“让我们走捷径，添加所有必要的包！别担心未来的开销；一切都会好的！”

> ```
> npm add education 
> ```
> 
> ```
> npm add student-loans
> ```
> 
> ```
> npm add degree
> ```
> 
> ```
> npm add kids
> ```
> 
> ```
> npm add partner
> ```
> 
> ```
> npm add career
> ```
> 
> ```
> npm add mortgage
> ```
> 
> ```
> npm add house
> ```
> 
> ```
> npm add car
> ```
> 
> ```
> npm add white-picket-fence
> ```

大多数人在添加这些依赖项时确实能得到一些好处，但我们集体付出的代价是一个充斥着不断、无意识辛劳的社会。每增加一个包都意味着更多的复杂性和维护工作。我们被困在这种依赖循环中，因为我们太贫困、不感兴趣、胆小、害怕或者疲惫，无法获得让我们完全独立的技能。我们并不需要所有这些包，但我们添加它们是因为被告知这就是事情该做的方式。大多数人在添加生活中的依赖时并不是特别深思熟虑。一旦你拥有了它们，你就必须处理它们。

我花了很长时间才明白，我的抑郁和焦虑并非无缘无故。我没有意识到添加包是可选的。我添加了太多，无法处理如此多的压力。我只是按照路线图告诉我的去做。一切都感觉不对，但我一直跟着走，直到我无法承受所有这些了。

当我年轻的时候，我从来不觉得起床去上学被强迫接受别人决定的所谓知识是对的。我做了因为别人告诉我要做，直到我意识到我可以说“不”。

作为一个成年人，我无法接受无休止、残酷的工作时间。我从15岁起就一直这样做，现在仍然勉强维持生计。我的生命中的近30年都已经过去了。

社会的设计方式是，如果你幸运的话，你每个月的收入会比支出多一点。你应该在一生中慢慢积累价值，并在接近70岁时退休。我不认为我的这一代（以及之后的几代人）相信我们会退休。我们都被搞了。对我父母来说是真的。我妈妈54岁就去世了，所以她就这样被搞了。我爸爸现在82岁了还在工作，所以他以另一种方式被搞了。这对我来说不合理。我希望避免像他们那样结束。

我继续前进的能力已经消失了。我对工作已经到了“不行”的阶段。我做不到了。我接过的每份工作，我都辞职了。我已经精疲力竭，感觉一无所有。我希望不参与这种虚假承诺安全的系统，而以我们的能量、创造力和幸福为代价。我的本质已被抽干。一切都花在了维护其他人不断更新的包上。

我觉得我已经尽了全力，但现在我却陷入困境。我再也不在建立任何让我满足的东西了。我成了依赖地狱的奴隶。

问题是，当你已经陷入困境时，如何精简事物？如何移除正确的依赖项而不造成混乱？

我不确定答案是什么。我有一些想法，但它们还没有完全成形，我还不准备公开写出来。如果你有任何想法，我很乐意听听。
