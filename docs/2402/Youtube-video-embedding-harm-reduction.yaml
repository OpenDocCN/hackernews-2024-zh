- en: <!--yml
  prefs: []
  type: TYPE_NORMAL
- en: 'category: 未分类'
  prefs: []
  type: TYPE_NORMAL
- en: 'date: 2024-05-29 13:27:30'
  prefs: []
  type: TYPE_NORMAL
- en: -->
  prefs: []
  type: TYPE_NORMAL
- en: Youtube video embedding harm reduction
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 来源：[https://dustri.org/b/youtube-video-embedding-harm-reduction.html](https://dustri.org/b/youtube-video-embedding-harm-reduction.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Embedding external content on a website in the current enshittocene period
    is more annoying than ever, so here is a copy-pasteable snippet to embed a youtube
    video while reducing its tracking and nuisance capabilities as much as possible:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: '[`credentialless`](https://developer.mozilla.org/en-US/docs/Web/Security/IFrame_credentialless)
    to load youtube in a blank disposable context, without access to the origin''s
    network, cookies, and storage data.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`allowfullscreen` because some people like it'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`referrerpolicy` set to not leak your [referer](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Referer)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`sandbox` to only allow javascript execution and SOP. Downloads, forms, modals,
    screen orientation, pointer lock, popups, presentation session, [storage access](https://developer.mozilla.org/en-US/docs/Web/API/Storage_Access_API)
    and thus third-party cookies, top-navigation, … are all denied.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`allow` with [every single directives](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Permissions-Policy#directives)
    set to "absolutely-fucking-not", and yes, they have to be all set one by one,
    and check regularly is new directive were added, because there is [no deny-all](https://github.com/w3c/webappsec-permissions-policy/issues/208)
    in the [spec](https://w3c.github.io/webappsec-permissions-policy/). It seems that
    every browser has its own list of directives, chrome is using [this one](https://github.com/w3c/webappsec-permissions-policy/blob/main/features.md)
    while firefox'' prefers the [MDN one](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Permissions-Policy#directives),
    and of course the two differ. No doubt this was designed with privacy, simplicity,
    maintainability and security in mind.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`src` set to `www.youtube-nocookie.com` instead of `youtube.com`. Both are
    official Google urls, but the former doesn''t do tracking via cookies, and disables
    API and interaction and interaction logging. Amusingly, it''s the player used
    on `whitehouse.gov`.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`csp` set to `sandbox allow-scripts allow-same-origin;` for compatibility''s
    sake, just in case. I''d love to use a more restrictive policy, but the spec doesn''t
    allow to provide one, except if the embedded website explicitly allows it, and
    of course youtube doesn''t.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`loading="lazy"` in case people don''t scroll far enough to see the video,
    no need to make them do queries to Google for no reasons.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Don't forget to put a `title` for [accessibility's sake](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe#accessibility_concerns).
  prefs: []
  type: TYPE_NORMAL
