<!--yml

category: 未分类

date: 2024-05-29 13:24:52

-->

# 谷歌的页面排名算法如何改变建筑空间

> 来源：[https://www.chokoon.com/post/how-google-s-page-rank-algorithm-changes-architectural-layout](https://www.chokoon.com/post/how-google-s-page-rank-algorithm-changes-architectural-layout)

/ 当建筑师分析城市中的场地并试图将其可视化时，他们会通过将更多“相关”和关键的信息放置到场地平面图中来实现：产权界线、退让距离、车道、停车场、景观特征和城市元素。然而，有一个元素突出，许多人认为它至关重要，或者至少在多种情况下非常有用。

（场地平面图示例）

那就是空间的**整合**水平。这意味着测量空间内的公共流动，以确定每个区域的流通情况及其受到多少人的关注。术语“空间”涵盖了许多内容：房间、道路、人行道、街道或走廊。基本上是绘制热力图，以可视化空间相对于彼此的“繁忙”或“私密”程度。

这些信息引发了一个问题：“空间能做什么？”一个设计良好的空间可以组织运动，分配土地使用，影响犯罪和安全，影响城市碳足迹，并确定土地价值，这对于开发商和购房者来说都是至关重要的底线。能够测量空间整合水平，可以看到可能产生的生产力水平是不难理解的。

不过，我们开始意识到，即使借助人工智能的帮助，计算这样的事情也会特别棘手。这是因为人们是不可预测的，而且他们的行为经常会与最基本的原则相抵触。至少，这是我们过去的信念。

蒂姆·斯通纳的《空间布局效率》

原来有一位英国建筑师发表了一篇非常引人入胜的文章，他指出了他发现的描述空间的解决方案。那就是测量空间的总深度，或者在这种情况下，一个房间的深度。数字指示了每个房间到其他每个房间的步数得分。颜色代表数值，提供了空间布局中同时关系的有效可视化。得分越低，步行到那个房间所需的步数就越少，因此更繁忙，反之亦然。他得出结论，空间内人员的移动主要（约70%）由空间布局决定，而非内容。

/ 然而，我们遇到了另一个可行的解决方案；**PageRank**算法，它从不同的角度解决了这个问题，并由谷歌的联合创始人（包括以此命名算法的拉里·佩奇）创建。

当像Google这样的搜索引擎显示搜索结果时，它们会将更“重要”和更高质量的页面排在比不那么重要的页面更靠前的位置。但搜索引擎如何知道哪些页面比其他页面更重要呢？在PageRank算法中，如果一个网站被其他重要网站链接，那么它就更重要，而来自不那么重要网站的链接则权重较低。这个定义似乎有点循环，但事实证明有多种策略可以计算这些排名。

想象我们随机从第5页开始采样。然后我们别无选择，只能去第6页，然后再去第5页，然后再去第6页，依此类推。我们会得到第5页和第6页的PageRank估计为0.5，而其余页面的PageRank估计为0，因为我们把所有时间都花在了第5页和第6页，没有访问任何其他页面。

为了确保我们始终可以访问到网页语料库中的其他位置，我们将引入一个阻尼因子**d**到我们的模型中。以概率**d**（通常设置为约**0.85**），随机冲浪者将从当前页面的链接中随机选择一个。但否则（以概率**1 - d**），随机冲浪者将从语料库中的所有页面中随机选择一个（包括当前所在的页面）。

我们的随机冲浪者现在从随机选择一个页面开始，并且对于我们想要生成的每个额外样本，根据当前页面的链接随机选择一个链接的概率为**d**，并且以概率**1 - d**随机选择任意页面。如果我们跟踪每个页面作为样本出现的次数，我们可以将出现在特定页面的状态比例视为其PageRank。

我们还可以使用递归的数学表达式定义页面的PageRank。设**PR(p)**为给定页面**p**的PageRank：随机冲浪者最终停留在该页面的概率。我们如何定义**PR(p)**呢？我们知道随机冲浪者可以以两种方式停留在页面上：

1.  以概率**1 - d**，冲浪者随机选择一个页面，最终停留在页面**p**上。

1.  以概率**d**，冲浪者从页面**i**跟随一个链接到达页面**p**。

第一个条件在数学上表达相当直接：这是**1 - d**除以整个语料库中页面总数**N**，因为随机选择页面的**1 - d**概率均匀分布在所有**N**个可能页面之间。

对于第二个条件，我们需要考虑每一个可能链接到页面**p**的页面**i**。对于这些传入页面中的每一个，让**NumLinks(i)**表示页面**i**上的链接数。每一个链接到**p**的页面**i**都有自己的PageRank，**PR(i)**，代表我们在任意时刻位于页面**i**的概率。由于从页面**i**到其任何链接的概率相等，我们将**PR(i)**除以链接数**NumLinks(i)**来得到我们位于页面**i**并选择链接到页面**p**的概率。

这为上述页面**p**的PageRank定义如下。

在这个公式中，**d**是阻尼因子，**N**是语料库中页面的总数，**i**遍历所有链接到页面**p**的页面，并且**NumLinks(i)**是页面**i**上存在的链接数。

那么，我们如何计算每个页面的PageRank值呢？我们可以通过迭代来完成：首先假设每个页面的PageRank都是**1 / N**（即在任何页面上均等可能）。然后，根据上述公式，基于先前的PageRank值计算每个页面的新PageRank值。如果我们不断重复这个过程，根据先前的PageRank值计算每个页面的新PageRank值，最终PageRank值将会收敛。

/ 公式看起来很有前景。但是它如何与空间的整合水平相关联呢？物理空间呢？

当我们看算法功能的主要思想时，我们可以开始建立一个连接以翻译该启发式方法。算法的目的是对网页进行排名，以确定哪一个比其他网页更重要。思考如何将该算法集成到帮助我们找出哪个空间比其他空间更重要或质量更高。

以我们的案例研究为例：

这是建筑物内部某一区域的结构平面图。平面图包括10个通过开放通道连接的房间。Room 1连接到Room 2、3和4。Room 2只连接到Room 1。Room 3连接到Room 1、5等等。有了这些信息，我们就可以构建一个语料库，基本上是一个Python字典，将房间号映射到所有与之相连房间的集合。

"Room1": {"Room2","Room3","Room4"},

"Room3": {"Room1","Room5"},

"Room4": {"Room1","Room5","Room6"},

"Room5": {"Room3","Room4","Room7","Room8"},

"Room6": {"Room4","Room8"},

"Room7": {"Room5","Room9"},

"Room8": {"Room5","Room6","Room9"},

"Room9": {"Room7","Room8","Room10"},

迭代函数从给每个房间分配**1 / N**的等级开始，其中**N**是语料库中的总房间数，共10个。

函数然后根据所有当前排名值根据PageRank公式重复计算新的排名值。（即根据所有连接到它的房间的排名计算房间的排名）。一个没有任何链接的房间被解释为每个语料库中的房间（包括它自己）都有一个链接。

该算法已经进行了100次迭代，这是我们得到的结果：

如从可视化中看到的，房间5被认为具有最高的参与度，因为它与其他房间有丰富的连接；大多数附近的高质量房间都与它相连。另一方面，位于角落且每个只有一个连接的房间2和房间10，参与度较低并倾向于更加私密。

让我们再来看一个城市规模的例子：

（曼谷Pathum Wan区）

/ 城市规划通过颜色显示了道路的排名；红色表示较高质量，蓝色表示较低质量。计算只考虑了主要、次要和三级道路线。结果可能看起来很诱人，但请记住，特别是这个例子，已经被大大简化。在现实世界中，高速公路有多车道，并且交叉口并不一定意味着所有通往它的道路都彼此连接。街道遵循法律，汽车运动受限。

这些只是我们启发式方法动态约束的一些因素。语料库中信息越精确，计算结果就越准确。 /

这是最后的例子：

/ 该算法还与零售计划管理内容集成，忽略货架内容。同样，该计划展示了每个走廊的参与质量；红色表示较高质量，蓝色表示较低质量。主要走廊展示了更高的价值和更好的连通性；这意味着它们有更多通往它们的路径。相反，仅连接到主要走廊的次级走廊之间的概率平均值在它们之间保持较低的曝光。因此，在这里展示的产品可能会有较少的访客。

这个实验的挑战在于确定空间的边界；走廊何时结束以及它涵盖多少区域？由于零售内部空间非常独特；没有门，也没有明确的障碍。这在思考我们应该如何在语料库中设置内容时可能变得棘手。 /

/ 无论如何，所有三个案例研究都强调了令人鼓舞的结果。该算法不仅仅依赖于尽可能精确地可视化现有问题，还依赖于提出未曾见过的解决方案。其目的不是确定并接受现有结果看起来是什么样子，而是构成它可能是什么样子。

总之，这个算法还在不断发展之中，并且只能通过研究物理设施中的公众参与行为来进一步完善。毫无疑问，能够描述空间的能力为设计高性能体系结构起到了至关重要的作用，而定义方法只是在想象力的边界中结束。人工智能的主题非常强大，它并不仅仅局限于计算机工程师的领域。
