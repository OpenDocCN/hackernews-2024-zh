<!--yml

category: 未分类

date: 2024-05-27 14:41:12

-->

# Robotic Tendencies » Flathub：直接上传的利与弊

> 来源：[https://ramcq.net/2024/02/06/flathub-pros-and-cons-of-direct-uploads/](https://ramcq.net/2024/02/06/flathub-pros-and-cons-of-direct-uploads/)

我上周末参加了 FOSDEM 并有幸参加了周六的[Flathub / Flatpak BOF](https://fosdem.org/2024/schedule/event/fosdem-2024-3715-flathub-flatpak-bof/)。很大一部分时间用于讨论是否允许直接上传与在 Flathub 基础设施上集中构建之间的优缺点，以及自动化安全/依赖项扫描等相关问题。

我最初考虑这个想法的动机基本上有两点。第一点是为使用语言特定构建工具、通过互联网解析和检索其自身依赖项的应用程序提供一种更简单的前进方式。Flathub 在构建过程中不允许网络访问，因此目前需要大量手动工作和额外的工具支持（参见[Python](https://docs.flatpak.org/en/latest/python.html) 和 [Electron](https://docs.flatpak.org/en/latest/electron.html) Flatpak 指南）。第二点是为其他平台的开发人员提供一种可能更为熟悉的流程，他们只需构建应用程序，然后运行另一个命令将其上传到商店，而无需学习新的构建工具的语法。会议室里提出了许多合理的担忧，我认为仔细思考后，这仍然值得做，但可能并不像我最初希望的那样是 Flathub 的有价值前进方式。

当然，对于一个专有应用程序，在 Flathub 从未见过源代码或构建过的情况下，无论二进制文件是由我们上传还是由我们下载，这并没有太大变化。但对于自由开源软件应用程序，由开发者驱动的直接上传在多个方面会导致退步。我们不会过分纠结于“恶意开发者在二进制文件中插入恶意代码”的情况，因为 Flathub 已经在验证开发者的模型上运行，用户在决定信任该应用程序时已做出决定 - 毕竟我们不审查源代码。但我们确实会失去其他一些东西，比如我们的基础设施在多种架构上构建的能力，以及构建环境或上传凭据是否未经开发者知晓而被破坏的可见性。

现在对于应用程序更改其元数据（如名称、图标、许可和权限）的手动审查过程，也适用于任何直接上传。有人建议，如果只允许高度沙箱化的应用程序（例如没有适当使用门户的直接文件系统访问）进行直接上传，这些担忧的影响可能会在一定程度上得到缓解。

然而，也有人指出我的“Electron应用开发者可以用一个命令上传到Flathub”的例子实际上有些虚构。目前，没有一个应用能通过更严格的沙盒要求。几乎所有Electron应用都使用旧版本的Chromium，并且支持不完整的门户支持，需要绕过沙盒才能正确运行，而Electron（和Chromium的）沙盒仍然需要额外的工具/下游补丁才能在Flatpak内运行。噢呵。

我认为对于已经从自己的集中/可信基础设施中发布自己的二进制文件的已建立项目以及对二进制完整性有可理解敏感性的开发者，我们能够直接设置与这些项目的直接上传是一个明显的改进。已经有相当多的应用程序 - 包括经过验证的应用程序 - 其构建配方简单地从其他地方构建的二进制文件并解压，如果这已经由开发者集中完成，那么在Flathub服务器上重复此过程将增加的价值不大。

然而，对于个人开发者的体验来说，我认为我们需要稍微放大视角，思考如何从工具和基础设施的角度改进这一点，特别是在我们推广Flathub的过程中，以及我们寻求为这些改进筹集资金的不同来源。在BOF期间，我记录了所有被提及作为工具限制的内容，以及关于如何改进这些问题的一些想法，并希望很快作为RFP/RFI（请求提案/信息请求）流程的一部分与大家分享。我们目前还没有资金，但如果我们有一些潜在的合作伙伴能帮助我们精细化范围并估算成本/工作量，我们可以利用这一点去追求资金机会。
