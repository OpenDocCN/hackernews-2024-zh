- en: <!--yml
  id: totrans-split-0
  prefs: []
  type: TYPE_NORMAL
- en: 'category: 未分类'
  id: totrans-split-1
  prefs: []
  type: TYPE_NORMAL
- en: 'date: 2024-05-27 14:55:23'
  id: totrans-split-2
  prefs: []
  type: TYPE_NORMAL
- en: -->
  id: totrans-split-3
  prefs: []
  type: TYPE_NORMAL
- en: Forgetting the history of Unix is coding us into a corner • The Register
  id: totrans-split-4
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 来源：[https://www.theregister.com/2024/02/16/what_is_unix/](https://www.theregister.com/2024/02/16/what_is_unix/)
  id: totrans-split-5
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: FOSDEM 2024 There are vital lessons to be learned from the history of Unix,
    but they're being forgotten. This is leading to truly vast amounts of wasted effort.
  id: totrans-split-6
  prefs: []
  type: TYPE_NORMAL
- en: This article is the second in [a series of pieces](https://www.theregister.com/Tag/One%20Way%20Forward)
    based on *The Reg* FOSS desk's [talk](https://fosdem.org/2024/schedule/event/fosdem-2024-3095-one-way-forward-finding-a-path-to-what-comes-after-unix/)
    at FOSDEM 2024.
  id: totrans-split-7
  prefs: []
  type: TYPE_NORMAL
- en: 'FOSDEM is a conference all about free and open source software, and these days,
    perhaps regrettably, FOSS is about Unix. Increasingly, [Unix today is Linux](https://www.theregister.com/2023/01/17/unix_is_dead/).
    The problem is that everyone is forgetting what UNIX really is and knowing your
    history is essential. As George Santayana said, often misquoted:'
  id: totrans-split-8
  prefs: []
  type: TYPE_NORMAL
- en: 'It''s often misquoted, which may be why Henry Spencer (who did the original
    [FOSS implementation](https://groups.google.com/g/mod.sources/c/OqVZYQNSmDs/m/G_T2jHu5QI8J)
    of regex) [paraphrased it](https://groups.google.com/g/sci.space.shuttle/c/L8-Upf8gZoY/m/NN6ngTI0K0QJ)
    as:'
  id: totrans-split-9
  prefs: []
  type: TYPE_NORMAL
- en: What Santayana predicted is coming true around the world today, and so is what
    Spencer predicted. There are other options, but few even look at them. Why is
    that?
  id: totrans-split-10
  prefs: []
  type: TYPE_NORMAL
- en: What is 'Unix' anyway?
  id: totrans-split-11
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: First things first, it doesn't mean anything related to the original AT&T codebase.
    That definition hasn't been true since 1993\. [Novell bought Unix from AT&T](https://www.theregister.com/2013/07/25/novell_peaked_with_netware_four/)
    31 years ago, kept the code, and donated the UNIX trademark to the Open Group.
    Since then, the name "Unix" has meant "passes Open Group testing," which is broadly
    what POSIX *used* to mean. The original codebase is effectively gone. [SCO Group
    offshoot Xinuos](https://www.theregister.com/2021/03/31/ibm_redhat_xinuos/) still
    sells things based on it, but their main product is based on FreeBSD.
  id: totrans-split-12
  prefs: []
  type: TYPE_NORMAL
- en: But alongside macOS on both x86-64 and Arm64 and a handful of other OSes, such
    as HP/UX and IBM AIX, in the [Open Group register of UNIX® certified products](https://www.opengroup.org/openbrand/register/),
    there used to be two different Linux distros, [Huawei EulerOS](https://www.opengroup.org/openbrand/register/brand3622.htm)
    and [Inspur K/UX](https://www.opengroup.org/openbrand/register/brand3617.htm),
    both Chinese CentOS Linux derivatives. Like it or not, this means that Linux isn't
    "a Unix-like OS" any more. It is a Unix.
  id: totrans-split-13
  prefs: []
  type: TYPE_NORMAL
- en: 'It''s a member of a [big family of Unixes](https://en.wikipedia.org/wiki/History_of_Unix#/media/File:Unix_history-simple.svg).
    Even the [simplified version](https://www.cl.cam.ac.uk/teaching/0708/OSFounds/P04-4.pdf)
    [PDF] from Cambridge University shows nearly 30 branches. The Wikipedia family
    tree shows lots of branches and lines: Version 1 to 4, then Version 5 to 6, then
    Version 7, System III and System V … plus lots and lots of derivatives, mostly
    proprietary, and all the BSDs. And of course Linux, with zero shared code, but
    a shared *design*.'
  id: totrans-split-14
  prefs: []
  type: TYPE_NORMAL
- en: But if you take another step back, given that Unix now means compatibility,
    *they are all one branch*. It's not about lines of descent any more, because in
    a sense, what was once the POSIX definition *became* Unix. But if your goal is
    simply to pass compatibility tests, you can do that with a shim, some kind of
    compatibility layer. That's why several versions of IBM z/OS are on the Open Group
    List. That seems strange because they are not Unix-like at all.
  id: totrans-split-15
  prefs: []
  type: TYPE_NORMAL
- en: 'This leads to other questions, such as what constitutes a "Unix-like" OS anyway?
    Anyone who has a basic idea of how to work with Linux, or macOS from inside the
    terminal, knows what a Unix looks like. Some identifying characteristics are:'
  id: totrans-split-16
  prefs: []
  type: TYPE_NORMAL
- en: One file system, rooted at `/`.
  id: totrans-split-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'A shell. (It doesn''t matter which one: `bash`, `tcsh`, `zsh`.)'
  id: totrans-split-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Commands like `ls`, `cat`, `echo`, `mkdir`, `rmdir`, `touch`.
  id: totrans-split-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: A case-sensitive file system.
  id: totrans-split-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Plain text files, and commands connected with redirection and pipes.
  id: totrans-split-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Certainly, there can be exceptions to these. For instance, macOS is a Unix™.
    It passes the tests, and Apple pays for the certification. But it hides most of
    the real Unix directory tree, its `/etc` is relatively empty, it doesn't have
    an X server – it's an [optional extra](https://www.xquartz.org/). And most of
    all, it's not case sensitive.
  id: totrans-split-22
  prefs: []
  type: TYPE_NORMAL
- en: But all the same, it's still recognizably a Unix.
  id: totrans-split-23
  prefs: []
  type: TYPE_NORMAL
- en: So taking that list of general characteristics, and adding a less visible one
    – that it's programmed mainly in C or something C-like – and requiring that the
    OS looks like Unix *and nothing else*, meaning there's no other native layer underneath,
    then the family is bigger.
  id: totrans-split-24
  prefs: []
  type: TYPE_NORMAL
- en: So if it's just about compatibility and we don't care about who inherited code
    from where any more, this raises other questions. How can we categorize them?
    What is a Unix-like OS anyway?
  id: totrans-split-25
  prefs: []
  type: TYPE_NORMAL
- en: Generations and the gaps between
  id: totrans-split-26
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Looking at the successive projects in the original Unix family within AT&T is
    very instructive. For its first decade, Unix was a research project, not a commercial
    product, and in that time it went through about seven generations.
  id: totrans-split-27
  prefs: []
  type: TYPE_NORMAL
- en: The thing is that even when other projects started branching off from it and
    going their own way from between Unix V4 and V8, the original research project
    kept going. Both the Wikipedia and Cambridge family trees show the AT&T line stopping
    after the Tenth Edition. But actually, there were two more generations.
  id: totrans-split-28
  prefs: []
  type: TYPE_NORMAL
- en: 'If we consider that whole extended family to be one unit, one box on the chart,
    that leaves a few outliers. Linux is one. Minix is another. There are others that
    aren''t shown, and a whole category of them are very much Unix-like systems: the
    microkernels.'
  id: totrans-split-29
  prefs: []
  type: TYPE_NORMAL
- en: The original microkernel, [CMU Mach](https://www.cs.cmu.edu/afs/cs/project/mach/public/www/mach.html),
    led to a whole bunch of Unix OSes, including the [Open Group's OSF/1](https://kb.iu.edu/d/agoq)
    and [DEC Tru64](https://kb.iu.edu/d/agoo), as well as [MkLinux](https://www.mklinux.org/)
    and famously the [GNU HURD](https://www.gnu.org/software/hurd/). The only one
    that isn't a historical curiosity or a tiny neglected niche is Apple's macOS family,
    including iOS, iPadOS and so on.
  id: totrans-split-30
  prefs: []
  type: TYPE_NORMAL
- en: Dr Andy Tanenbaum's Minix, which was an indirect progenitor of Linux itself,
    is another, although Minix 1 and 2 were largely monolithic. [Minix 3](https://www.minix3.org/),
    though, is a true microkernel, and a version runs inside most modern Intel CPUs'
    management processors.
  id: totrans-split-31
  prefs: []
  type: TYPE_NORMAL
- en: There are others. The research on Mach led to [L4](http://os.inf.tu-dresden.de/L4/)
    and [others](https://www.l4ka.org/), and work's [still going on](https://sel4.systems/).
    [QNX](https://blackberry.qnx.com/en) is a commercial microkernel Unix-like OS,
    and it's used in billions of embedded devices … although the only time you might
    have played with it was [Blackberry 10](https://www.theregister.com/2015/10/02/bb10_five_reasons_why_it_failed/).
  id: totrans-split-32
  prefs: []
  type: TYPE_NORMAL
- en: Although they have enjoyed more success than you might think, microkernels are
    hard to get working well. Tiny kernels with lots of user-space processes doing
    stuff are not so hard – AmigaOS did this successfully in the mid-1980s. The problem
    is keeping the various processes isolated, yet able to communicate with each other.
    AmigaOS ran on machines with no memory management hardware – everything was in
    one address space. It's easy to communicate with another process when you can
    read and write its memory.
  id: totrans-split-33
  prefs: []
  type: TYPE_NORMAL
- en: The idea of a true microkernel is that the kernel runs in ring 0, in supervisor
    mode. It schedules processes, it allocates memory, and that's about it. Everything
    else is implemented in "servers" in user space. Getting them to talk to each other
    *quickly* is the hard problem.
  id: totrans-split-34
  prefs: []
  type: TYPE_NORMAL
- en: For instance, macOS uses Mach, but to provide Unix-compatible APIs so it looks
    like a Unix, it took a big chunk of the BSD kernel and called it a "Unix server."
    Mach still manages the processes, not this Unix server, but even so, the server
    is still big and complicated. And it still wasn't that fast, so NeXT moved it
    inside the Mach kernel, meaning it's in kernel space too, running in the same
    memory space as the not-so-micro-any-more Mach kernel.
  id: totrans-split-35
  prefs: []
  type: TYPE_NORMAL
- en: This leaves us with two families of Unix-like OSes. Monolithic kernels, which
    includes almost all the old proprietary commercial Unixes, and all the BSDs –
    and Linux. Plus microkernels, which we can very loosely group into two families.
    One is commercial, and today mainly means Apple's OSes and QNX. QNX is proprietary,
    while Apple's kernel and userland is open source but hasn't influenced much else.
  id: totrans-split-36
  prefs: []
  type: TYPE_NORMAL
- en: And an open source family, including Minix 3, the GNU Hurd, L4, seL4, and many
    others. Some are used in embedded control systems – such as [Intel's ME](https://www.intel.com/content/www/us/en/support/articles/000008927/software/chipset-software.html)
    – but there is little visible mainstream use.
  id: totrans-split-37
  prefs: []
  type: TYPE_NORMAL
- en: But that is not the end of the line. It is all that most histories show, but
    there is a third line of descent. Dennis Ritchie and Ken Thompson's work didn't
    end in 1979 with Unix 7, even if that's where most commercial Unix originated.
  id: totrans-split-38
  prefs: []
  type: TYPE_NORMAL
- en: Turn it up to 11
  id: totrans-split-39
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: The versions of Unix after the Seventh Edition are sometimes collectively called
    [Research Unix](https://en.wikipedia.org/wiki/Research_Unix), and when I have
    asked about this online, it has resulted more in people telling me that's *wrong*
    than much useful information.
  id: totrans-split-40
  prefs: []
  type: TYPE_NORMAL
- en: Even so, the lesser-known editions within AT&T's Unix System Laboratories were
    the Eighth Edition in 1985, the Ninth Edition in 1986, and in 1989 the Tenth Edition.
    Some fragmentary [source code is available](https://www.theregister.com/2017/03/30/old_unix_source_code_opened_for_study/),
    but little information. (Working links or references to what was in these are
    welcome!)
  id: totrans-split-41
  prefs: []
  type: TYPE_NORMAL
- en: What came after the Tenth Edition is, for this writer, where it gets interesting.
    By 1992, Unix was big commercial news, of course. FreeBSD and NetBSD were happening,
    and Linux was gathering attention.
  id: totrans-split-42
  prefs: []
  type: TYPE_NORMAL
- en: Meanwhile, Bell Labs did something else.
  id: totrans-split-43
  prefs: []
  type: TYPE_NORMAL
- en: Think about what constitutes traditional, old-school Unix. It's about ["everything
    is a file,"](http://ibgwww.colorado.edu/~lessem/psyc5112/usail/concepts/filesystems/everything-is-a-file.html)
    streams of bytes, the familiar shell, and so on. But there are important things
    on all modern computers that aren't covered by this.
  id: totrans-split-44
  prefs: []
  type: TYPE_NORMAL
- en: Graphics, notably, don't really form part of the classic Unix kernel. macOS
    and Linux are both Unixes, as is BSD, but they have radically different GUI layers.
    This is because Unix was a [minicomputer](https://www.britannica.com/technology/minicomputer)
    OS. As [Dennis Ritchie himself described](https://www.bell-labs.com/usr/dmr/www/hist.html),
    it was written on a [DEC PDP-7](https://www.soemtron.org/pdp7.html), and later
    ported to the bigger [DEC PDP-11](https://gunkies.org/wiki/PDP-11/20).
  id: totrans-split-45
  prefs: []
  type: TYPE_NORMAL
- en: These were departmental-scale, multiuser computers. A host machine, plus dumb
    text terminals on serial connections, with no graphics and no networking – even
    so, high-end kit for the 1970s.
  id: totrans-split-46
  prefs: []
  type: TYPE_NORMAL
- en: 'During the period when commercial Unix flowered, in the 1980s there were very
    expensive *workstations*: effectively, personal, single-user minicomputers. It
    took until the late 1980s for equipment like inexpensive 32-bit computers with
    onboard graphics, reasonably fast expansion buses (and thus, reasonably fast networking
    as a fairly cheap option) to start to be mainstream. Then Unix acquired networking
    support, as it still has. But ways for one Unix machine to talk to another wasn''t
    considered in the original design. Instead, it has files of terminal type definitions.
    Even today, decades later, networking and graphics need auxiliary, helper tools,
    such as NFS, SSH, X11, and so on. It works, and it works very well, but these
    are bolted-on extras that appeared years after the design was set in stone.'
  id: totrans-split-47
  prefs: []
  type: TYPE_NORMAL
- en: This is the point at when Unix Tenth Edition appeared, in 1989, when networking
    and GUIs were proliferating everywhere.
  id: totrans-split-48
  prefs: []
  type: TYPE_NORMAL
- en: 'Today, the Wayland enthusiasts like to talk about how they are modernizing
    the Linux graphics stack. But Linux is a Unix, and in Unix, [everything is meant
    to be a file](https://hackmd.io/@jkyang/unix-everything-is-a-file). So any Wayland
    evangelists out there, tell us: where in the file system can I find the files
    describing a window on the screen under the Wayland protocol? What file holds
    the coordinates of the window, its place in the Z-order, its colour depth, its
    contents?'
  id: totrans-split-49
  prefs: []
  type: TYPE_NORMAL
- en: If this stuff is not in the file system, are you sure this is a Unix tool?
  id: totrans-split-50
  prefs: []
  type: TYPE_NORMAL
- en: Research Unix 10 started to address some of this, but it was too little, too
    late. The industry had taken much older, simpler versions, commercialized them,
    and the results were mutating and metastasizing across the world.
  id: totrans-split-51
  prefs: []
  type: TYPE_NORMAL
- en: So Dennis Ritchie and Ken Thompson did [what Niklaus Wirth did](https://www.theregister.com/2024/01/04/niklaus_wirth_obituary/)
    with Modula-2 and later with Oberon. They ignored what the industry was doing,
    went back to their original ideas, and kept working on refining them.
  id: totrans-split-52
  prefs: []
  type: TYPE_NORMAL
- en: The result is the next step in the development of Unix, and in this era of spiralling
    software complexity and bloat, it's time to examine it afresh and see if the geniuses
    who invented Unix didn't have the right ideas, just as Linux was being created.
    ®
  id: totrans-split-53
  prefs: []
  type: TYPE_NORMAL
- en: '*This is the second part of a [multi-part series](https://www.theregister.com/Tag/One%20Way%20Forward)
    stemming from our vulture''s FOSDEM 2024 talk. Next part to follow...*'
  id: totrans-split-54
  prefs: []
  type: TYPE_NORMAL
