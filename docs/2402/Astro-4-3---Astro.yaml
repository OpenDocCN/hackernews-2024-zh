- en: <!--yml
  prefs: []
  type: TYPE_NORMAL
- en: 'category: 未分类'
  prefs: []
  type: TYPE_NORMAL
- en: 'date: 2024-05-27 14:30:07'
  prefs: []
  type: TYPE_NORMAL
- en: -->
  prefs: []
  type: TYPE_NORMAL
- en: Astro 4.3 | Astro
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 来源：[https://astro.build/blog/astro-430/](https://astro.build/blog/astro-430/)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Astro 4.3 is now available! This release includes a new experimental i18n feature
    to try out, and improvements to working with your build output, component prop
    types, Markdown images, and more.
  prefs: []
  type: TYPE_NORMAL
- en: 'Highlights include:'
  prefs: []
  type: TYPE_NORMAL
- en: How to upgrade
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'To take advantage of the latest features, make sure you’re running the latest
    version of Astro. You can upgrade to Astro 4.3 by running the `@astrojs/upgrade`
    command:'
  prefs: []
  type: TYPE_NORMAL
- en: 'or by running the upgrade command for your package manager:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'Experimental: Add domain support for i18n'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Astro 4.3 adds an experimental `domains` i18n configuration. This allows you
    to specify different domains or subdomains for different supported locales.
  prefs: []
  type: TYPE_NORMAL
- en: 'For example, you could now use `example.com` for your English site, `fr.example.com`
    for your French site, and `example.es` for your Spanish site. Enable the experimental
    flag `i18nDomains` and map any or all of your locales to domains using `i18n.domains`
    in your `astro.config.mjs` file:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: Note that this feature requires an entirely server-rendered site with no prerendered
    pages. Currently, the `@astrojs/node` and `@astrojs/vercel` adapters are supported
    with more adapter compatibility to come!
  prefs: []
  type: TYPE_NORMAL
- en: See more in our [internationalization documentation](https://docs.astro.build/en/guides/internationalization/#domains-experimental)
    for more details and limitations on this experimental routing feature.
  prefs: []
  type: TYPE_NORMAL
- en: More control over your HTML file output
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: This release adds a new `build.format` option called `preserve` to give you
    more control over the resulting HTML files in your production build.
  prefs: []
  type: TYPE_NORMAL
- en: The current configuration options (`file` and `directory`) either build all
    of your HTML pages as files matching the route name (e.g. `/about.html`) or build
    all of your files as `index.html` within a nested directory structure (e.g. `/about/index.html`),
    respectively. It is not possible to create individual index pages (e.g. `/about/index.html`)
    when using the `file` configuration option.
  prefs: []
  type: TYPE_NORMAL
- en: 'Rather than introduce a breaking change to `file`, we added the new `preserve`
    format which will preserve how the filesystem is structured and make sure that
    is mirrored over to production:'
  prefs: []
  type: TYPE_NORMAL
- en: '`about.astro` becomes `about.html`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`about/index.astro` becomes `about/index.html`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: What you see is what you get! This feature unlocks better compatibility with
    certain web servers who have strict requirements on how files are structured.
  prefs: []
  type: TYPE_NORMAL
- en: See the [`build.format` configuration options reference](https://docs.astro.build/en/reference/configuration-reference/#buildformat)
    for more details.
  prefs: []
  type: TYPE_NORMAL
- en: Add `ComponentProps` type utility
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Astro now includes a new `ComponentProps` type export from `astro/types` to
    get the props type of an Astro component. This is similar to `React.ComponentProps`
    or Svelte’s `ComponentProps`.
  prefs: []
  type: TYPE_NORMAL
- en: This type export allows you to reference the `Props` accepted by another component,
    even if that component doesn’t export that `Props` type directly.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: Fix using images in Markdown without a relative specifier
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Previously, using images in Markdown without using a relative specifier (such
    as `./` or `../`) would cause Astro to throw an error.
  prefs: []
  type: TYPE_NORMAL
- en: 'Now, you can use the standard `![](img.png)` syntax in Markdown files for images
    colocated in the same folder: no relative specifier required!'
  prefs: []
  type: TYPE_NORMAL
- en: There is no need to update your project; your existing images will still continue
    to work. However, you can safely remove any relative specifiers from these Markdown
    images as they are no longer necessary… as the Markdown spec intended!
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: Thanks to [Oliver Speir](https://github.com/OliverSpeir) for contributing this
    fix!
  prefs: []
  type: TYPE_NORMAL
- en: Bug Fixes
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: As always, additional bug fixes are included in this release. Check out the
    [release notes](https://github.com/withastro/astro/blob/refs/heads/main/packages/astro/CHANGELOG.md#430)
    to learn more.
  prefs: []
  type: TYPE_NORMAL
