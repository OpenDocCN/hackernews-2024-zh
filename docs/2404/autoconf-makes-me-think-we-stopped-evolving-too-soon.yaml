- en: <!--yml
  id: totrans-split-0
  prefs: []
  type: TYPE_NORMAL
- en: 'category: 未分类'
  id: totrans-split-1
  prefs: []
  type: TYPE_NORMAL
- en: 'date: 2024-05-27 12:55:30'
  id: totrans-split-2
  prefs: []
  type: TYPE_NORMAL
- en: -->
  id: totrans-split-3
  prefs: []
  type: TYPE_NORMAL
- en: autoconf makes me think we stopped evolving too soon
  id: totrans-split-4
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 来源：[https://rachelbythebay.com/w/2024/04/02/autoconf/](https://rachelbythebay.com/w/2024/04/02/autoconf/)
  id: totrans-split-5
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: autoconf makes me think we stopped evolving too soon
  id: totrans-split-6
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: I've gotten a few bits of feedback asking for my thoughts and/or reactions to
    the whole "xz backdoor" thing that happened over the past couple of days. Most
    of my thoughts on the matter apply to autoconf and friends, and they aren't great.
  id: totrans-split-7
  prefs: []
  type: TYPE_NORMAL
- en: I don't have to cross paths with those tools too often these days, but there
    was a point quite a while back when I was constantly building things from source,
    and a ./configure --with-this --with-that was a given. It was a small joy when
    the thing let me reuse the old configure invocation so I didn't have to dig up
    the specifics again.
  id: totrans-split-8
  prefs: []
  type: TYPE_NORMAL
- en: 'I got that the whole reason for autoconf''s derpy little "recipes" is that
    you want to know if the system you''re on supports X, or can do Y, or exactly
    what flavor of Z it has, so you can #ifdef around it or whatever. It''s not quite
    as relevant today, but sure, there was once a time when a great many Unix systems
    existed and they all had their own ways of handling stuff, and no two were the
    same.'
  id: totrans-split-9
  prefs: []
  type: TYPE_NORMAL
- en: So, okay, fine, at some point it made sense to run programs to empirically determine
    what was supported on a given system. What I don't understand is why we kept running
    those stupid little shell snippets and little bits of C code over and over. It's
    like, okay, we established that this particular system does <library function
    foobar> with two args, not three. So why the hell are we constantly testing for
    it over and over?
  id: totrans-split-10
  prefs: []
  type: TYPE_NORMAL
- en: Why didn't we end up with a situation where it was just a standard thing that
    had a small number of possible values, and it would just be set for you somewhere?
    Whoever was responsible for building your system (OS company, distribution packagers,
    whatever) could leave something in /etc that says "X = flavor 1, Y = flavor 2"
    and so on down the line.
  id: totrans-split-11
  prefs: []
  type: TYPE_NORMAL
- en: And, okay, fine, I get that there would have been all kinds of "real OS companies"
    that wouldn't have wanted to stoop to the level of the dirty free software hippies.
    Whatever. Those same hippies could have run the tests ONCE per platform/OS combo,
    put the results into /etc themselves, and then been done with it.
  id: totrans-split-12
  prefs: []
  type: TYPE_NORMAL
- en: Then instead of testing all of that shit every time we built something from
    source, we'd just drag in the pre-existing results and go from there. It's not
    like the results were going to change on us. They were a reflection of the way
    the kernel, C libraries, APIs and userspace happened to work. Short of that changing,
    the results wouldn't change either.
  id: totrans-split-13
  prefs: []
  type: TYPE_NORMAL
- en: But no, we never got to that point, so it's still normal to ship a .tar.gz with
    an absolute crap-ton of dumb little macro files that run all kinds of inscrutable
    tests that give you the same answers that they did the last time they ran on your
    machine or any other machine like yours, and WILL give the same answers going
    forward.
  id: totrans-split-14
  prefs: []
  type: TYPE_NORMAL
- en: That means it's totally normal to ship all kinds of really crazy looking stuff,
    and so when someone noticed that and decided to use that as their mechanism for
    extracting some badness from a so-called "test file" that was actually laden with
    their binary code, is it so surprising that it happened? To me, it seems inevitable.
  id: totrans-split-15
  prefs: []
  type: TYPE_NORMAL
- en: Incidentally, I want to see what happens if people start taking tarballs from
    various projects and diff them against the source code repos for those same projects.
    Any file that "appears" in the tarball that's allegedly due to auto[re]conf being
    run on the project had better match something from the actual trees of autoconf,
    automake, ranlib, gettext, or whatever else goofy meta-build stuff is being used
    these days.
  id: totrans-split-16
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  id: totrans-split-17
  prefs: []
  type: TYPE_PRE
- en: '... there''s no build-to-host.m4 with that sha1sum out there, *except* for
    the bad one in the xz release. That part was caught... but what about every other
    auto* blob in every other project out there? Who or what is checking those?'
  id: totrans-split-18
  prefs: []
  type: TYPE_NORMAL
- en: And finally, yes, I'm definitely biased. My own personal build system has a
    little file that gets installed on a machine based on how the libs and whatnot
    work on it. That means all of the Macs of a particular version of the OS get the
    same file. All of the Debian boxes running the same version get the same file,
    and so on down the line.
  id: totrans-split-19
  prefs: []
  type: TYPE_NORMAL
- en: I don't keep asking the same questions every time I go to build stuff. That's
    just madness.
  id: totrans-split-20
  prefs: []
  type: TYPE_NORMAL
