- en: <!--yml
  id: totrans-split-0
  prefs: []
  type: TYPE_NORMAL
  zh: <!--yml
- en: 'category: æœªåˆ†ç±»'
  id: totrans-split-1
  prefs: []
  type: TYPE_NORMAL
  zh: ç±»åˆ«ï¼šæœªåˆ†ç±»
- en: 'date: 2024-05-27 12:47:49'
  id: totrans-split-2
  prefs: []
  type: TYPE_NORMAL
  zh: æ—¥æœŸï¼š2024-05-27 12:47:49
- en: -->
  id: totrans-split-3
  prefs: []
  type: TYPE_NORMAL
  zh: -->
- en: Bypassing Denuvo in Hogwarts Legacy | Maurice's Blog ğŸ
  id: totrans-split-4
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: åœ¨ã€Šéœæ ¼æ²ƒèŒ¨ä¼ å¥‡ã€‹ä¸­ç»•è¿‡Denuvo | Mauriceçš„åšå®¢ ğŸ
- en: æ¥æºï¼š[https://momo5502.com/posts/2024-03-31-bypassing-denuvo-in-hogwarts-legacy/](https://momo5502.com/posts/2024-03-31-bypassing-denuvo-in-hogwarts-legacy/)
  id: totrans-split-5
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: æ¥æºï¼š[https://momo5502.com/posts/2024-03-31-bypassing-denuvo-in-hogwarts-legacy/](https://momo5502.com/posts/2024-03-31-bypassing-denuvo-in-hogwarts-legacy/)
- en: When I announced my Black Ops 3 integrity bypass, someone commented that my
    research was not impressive and I should try analyzing Denuvo instead.
  id: totrans-split-6
  prefs: []
  type: TYPE_NORMAL
  zh: å½“æˆ‘å®£å¸ƒæˆ‘çš„ã€Šé»‘è‰²è¡ŒåŠ¨3ã€‹å®Œæ•´æ€§ç»•è¿‡æ—¶ï¼Œæœ‰äººè¯„è®ºè¯´æˆ‘çš„ç ”ç©¶ä¸ä»¤äººå°è±¡æ·±åˆ»ï¼Œå»ºè®®æˆ‘å°è¯•åˆ†æDenuvoã€‚
- en: That kinda stuck with me, so I did what everyone would do and spent the last
    5 months of my free time reverse engineering and bypassing the Denuvo DRM in Hogwarts
    Legacy.
  id: totrans-split-7
  prefs: []
  type: TYPE_NORMAL
  zh: é‚£ç§æƒ³æ³•ä¸€ç›´è¦ç»•åœ¨æˆ‘å¿ƒä¸­ï¼Œæ‰€ä»¥æˆ‘åšäº†æ¯ä¸ªäººéƒ½ä¼šåšçš„äº‹æƒ…ï¼Œå¹¶åœ¨è¿‡å»çš„äº”ä¸ªæœˆé‡Œåˆ©ç”¨ç©ºé—²æ—¶é—´é€†å‘å·¥ç¨‹å¹¶ç»•è¿‡ã€Šéœæ ¼æ²ƒèŒ¨ä¼ å¥‡ã€‹ä¸­çš„Denuvo DRMã€‚
- en: I am obviously not as skilled and experienced as EMPRESS, who managed to do
    it within days, but thatâ€™s ok ğŸ˜ƒ
  id: totrans-split-8
  prefs: []
  type: TYPE_NORMAL
  zh: æ˜¾ç„¶ï¼Œæˆ‘æ²¡æœ‰EMPRESSé‚£æ ·çš„æŠ€æœ¯å’Œç»éªŒï¼Œåœ¨å‡ å¤©å†…å°±å®Œæˆè¿™é¡¹ä»»åŠ¡ï¼Œä½†æ²¡å…³ç³» ğŸ˜ƒ
- en: How does Denuvo work?[#](#how-does-denuvo-work)
  id: totrans-split-9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Denuvoæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ[#](#how-does-denuvo-work)
- en: '![](img/c3455a23c82a01c7d2d2405ea61a9b69.png)'
  id: totrans-split-10
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c3455a23c82a01c7d2d2405ea61a9b69.png)'
- en: The game collects hardware/software features into a fingerprint and generates
    a Steam Ticket (proof of game ownership).
  id: totrans-split-11
  prefs: []
  type: TYPE_NORMAL
  zh: æ¸¸æˆæ”¶é›†ç¡¬ä»¶/è½¯ä»¶ç‰¹å¾å½¢æˆæŒ‡çº¹ï¼Œå¹¶ç”ŸæˆSteamç¥¨æ®ï¼ˆæ¸¸æˆæ‹¥æœ‰çš„è¯æ®ï¼‰ã€‚
- en: Fingerprint and Ticket are then sent to Denuvo Servers.
  id: totrans-split-12
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶åæŒ‡çº¹å’Œç¥¨æ®è¢«å‘é€åˆ°DenuvoæœåŠ¡å™¨ã€‚
- en: From there the Steam Ticket is sent to Steam to make sure the user really owns
    the game (I obviously donâ€™t know whatâ€™s going on in their servers, so this is
    only an assumption, but it should be accurate enough).
  id: totrans-split-13
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶åï¼ŒSteamç¥¨æ®å‘é€åˆ°Steamä»¥ç¡®ä¿ç”¨æˆ·ç¡®å®æ‹¥æœ‰è¯¥æ¸¸æˆï¼ˆæ˜¾ç„¶æˆ‘ä¸çŸ¥é“ä»–ä»¬æœåŠ¡å™¨ä¸Šåœ¨å‘ç”Ÿä»€ä¹ˆï¼Œæ‰€ä»¥è¿™åªæ˜¯ä¸€ä¸ªå‡è®¾ï¼Œä½†åº”è¯¥è¶³å¤Ÿå‡†ç¡®ï¼‰ã€‚
- en: If the user really owns the game, a Denuvo Token is generated, that only works
    on a PC with the exact fingerprint.
  id: totrans-split-14
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœç”¨æˆ·çœŸçš„æ‹¥æœ‰æ¸¸æˆï¼Œå°†ç”Ÿæˆä¸€ä¸ªä»…åœ¨å…·æœ‰å®Œå…¨åŒ¹é…æŒ‡çº¹çš„PCä¸Šæœ‰æ•ˆçš„Denuvo Tokenã€‚
- en: Using that token, the player can now run the game.
  id: totrans-split-15
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨è¯¥Tokenï¼Œç©å®¶ç°åœ¨å¯ä»¥è¿è¡Œæ¸¸æˆã€‚
- en: The game can not run without the token, as it is used to e.g. decrypt certain
    values at runtime and similar things.
  id: totrans-split-16
  prefs: []
  type: TYPE_NORMAL
  zh: è¯¥æ¸¸æˆæ— æ³•åœ¨æ²¡æœ‰Tokençš„æƒ…å†µä¸‹è¿è¡Œï¼Œå› ä¸ºå®ƒç”¨äºä¾‹å¦‚åœ¨è¿è¡Œæ—¶è§£å¯†æŸäº›å€¼ç­‰ç”¨é€”ã€‚
- en: Ontop of using the token to decrypt values, Denuvo regularly verifies the hardware
    features for the fingerprint still match with the token, at runtime.
  id: totrans-split-17
  prefs: []
  type: TYPE_NORMAL
  zh: é™¤äº†ä½¿ç”¨Tokenè§£å¯†å€¼å¤–ï¼ŒDenuvoè¿˜å®šæœŸåœ¨è¿è¡Œæ—¶éªŒè¯ç¡¬ä»¶ç‰¹å¾ä»¥ç¡®ä¿ä¸TokenåŒ¹é…ã€‚
- en: What was my goal?[#](#what-was-my-goal)
  id: totrans-split-18
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æˆ‘çš„ç›®æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ[#](#what-was-my-goal)
- en: Cracking the game was not a goal I had. I like Hogwarts Legacy and thus causing
    any harm is not my intention. I wanted to do research purely for myself.
  id: totrans-split-19
  prefs: []
  type: TYPE_NORMAL
  zh: ç ´è§£æ¸¸æˆä¸æ˜¯æˆ‘çš„ç›®æ ‡ã€‚æˆ‘å–œæ¬¢ã€Šéœæ ¼æ²ƒèŒ¨ä¼ å¥‡ã€‹ï¼Œå› æ­¤ä¸æ‰“ç®—é€ æˆä»»ä½•ä¼¤å®³ã€‚æˆ‘ä»…ä¸ºè‡ªå·±è¿›è¡Œçº¯ç ”ç©¶ã€‚
- en: Therefore this post is going to be intentionally vague and not going to show
    how I analyzed and patched the game in detail, because I donâ€™t need anymore legal
    trouble than I already have.
  id: totrans-split-20
  prefs: []
  type: TYPE_NORMAL
  zh: å› æ­¤ï¼Œæœ¬æ–‡å°†æ•…æ„ä¿æŒæ¨¡ç³Šï¼Œä¸è¯¦ç»†å±•ç¤ºæˆ‘å¦‚ä½•åˆ†æå’Œè¯¦ç»†ä¿®è¡¥æ¸¸æˆï¼Œå› ä¸ºæˆ‘ä¸æƒ³å†å¤šæƒ¹ä»»ä½•æ³•å¾‹éº»çƒ¦ã€‚
- en: The actual goal I had in mind was to find all features the game uses to derive
    the fingerprint and to patch them. Ontop of that, I want to patch most of the
    runtime checks.
  id: totrans-split-21
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘å¿ƒä¸­çš„çœŸæ­£ç›®æ ‡æ˜¯æ‰¾åˆ°æ¸¸æˆç”¨äºç”ŸæˆæŒ‡çº¹çš„æ‰€æœ‰ç‰¹å¾ï¼Œå¹¶ä¿®è¡¥å®ƒä»¬ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘è¿˜æƒ³ä¿®è¡¥å¤§éƒ¨åˆ†è¿è¡Œæ—¶æ£€æŸ¥ã€‚
- en: For a real crack, it is obviously needed to patch all of the runtime checks.
    Finding all of them is still an extremely time consuming task, so everyone who
    has achieved that deserves my utmost respect.
  id: totrans-split-22
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹äºçœŸæ­£çš„ç ´è§£ï¼Œæ˜¾ç„¶éœ€è¦ä¿®è¡¥æ‰€æœ‰è¿è¡Œæ—¶æ£€æŸ¥ã€‚æ‰¾åˆ°æ‰€æœ‰æ£€æŸ¥ä»ç„¶æ˜¯ä¸€é¡¹æå…¶è€—æ—¶çš„ä»»åŠ¡ï¼Œæ‰€ä»¥ä»»ä½•èƒ½å¤Ÿå®Œæˆçš„äººéƒ½å€¼å¾—æˆ‘æœ€é«˜çš„å°Šé‡ã€‚
- en: However, I do believe that once I have patched some/most of the runtime checks
    and discovered all hardware features, I would be capable to patch all of them
    with enough time and motivation.
  id: totrans-split-23
  prefs: []
  type: TYPE_NORMAL
  zh: ä½†æ˜¯ï¼Œæˆ‘ç¡®ä¿¡ä¸€æ—¦æˆ‘ä¿®è¡¥äº†å¤§éƒ¨åˆ†è¿è¡Œæ—¶æ£€æŸ¥å¹¶å‘ç°äº†æ‰€æœ‰ç¡¬ä»¶ç‰¹å¾ï¼Œæˆ‘å°†èƒ½å¤Ÿåœ¨è¶³å¤Ÿçš„æ—¶é—´å’ŒåŠ¨åŠ›ä¸‹ä¿®è¡¥æ‰€æœ‰è¿è¡Œæ—¶æ£€æŸ¥ã€‚
- en: The real challenge I saw for myself was to analyze the protection to discover
    all the bindings it uses for the fingerprint.
  id: totrans-split-24
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä¸ºè‡ªå·±è®¾å®šçš„çœŸæ­£æŒ‘æˆ˜æ˜¯åˆ†æä¿æŠ¤æªæ–½ï¼Œä»¥å‘ç°å®ƒç”¨äºæŒ‡çº¹çš„æ‰€æœ‰ç»‘å®šã€‚
- en: How did I do it?[#](#how-did-i-do-it)
  id: totrans-split-25
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æˆ‘æ˜¯å¦‚ä½•åšåˆ°çš„ï¼Ÿ[#](#how-did-i-do-it)
- en: 'Using a Denuvo Token on a PC that has a mismatching fingerprint shows the following
    dialog:'
  id: totrans-split-26
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨åœ¨å…·æœ‰ä¸åŒ¹é…æŒ‡çº¹çš„PCä¸Šçš„Denuvo Tokenå°†æ˜¾ç¤ºä»¥ä¸‹å¯¹è¯æ¡†ï¼š
- en: '![](img/d35fd0a6c1f4108a66e128c50a5e3fca.png)'
  id: totrans-split-27
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d35fd0a6c1f4108a66e128c50a5e3fca.png)'
- en: Therefore the goal is to get past that dialog.
  id: totrans-split-28
  prefs: []
  type: TYPE_NORMAL
  zh: å› æ­¤ï¼Œç›®æ ‡æ˜¯è·³è¿‡è¯¥å¯¹è¯æ¡†ã€‚
- en: This is the part I wish I could talk more about, but I donâ€™t think thatâ€™s a
    good idea. Instead I will roughly scratch the surface and at least outline the
    tools I used.
  id: totrans-split-29
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯æˆ‘å¸Œæœ›èƒ½æ›´å¤šè°ˆè®ºçš„éƒ¨åˆ†ï¼Œä½†æˆ‘è®¤ä¸ºè¿™ä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚ç›¸åï¼Œæˆ‘å°†ç²—ç•¥åœ°æ¦‚è¿°æˆ‘ä½¿ç”¨çš„å·¥å…·ã€‚
- en: To figure out what features the game collects I used the [Qiling](https://qiling.io/)
    reverse engineering framework.
  id: totrans-split-30
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†å¼„æ¸…æ¥šæ¸¸æˆæ”¶é›†äº†å“ªäº›åŠŸèƒ½ï¼Œæˆ‘ä½¿ç”¨äº†[Qiling](https://qiling.io/)åå‘å·¥ç¨‹æ¡†æ¶ã€‚
- en: 'Qiling emulates any kind of binary allowing to fully instrument it. It is truly
    a powerful framework:'
  id: totrans-split-31
  prefs: []
  type: TYPE_NORMAL
  zh: Qilingæ¨¡æ‹Ÿä»»ä½•ç±»å‹çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå…è®¸å®Œå…¨å¯¹å…¶è¿›è¡Œä»ªå™¨åŒ–ã€‚è¿™çœŸæ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ¡†æ¶ï¼š
- en: '![Qiling](img/775b82dff2e264bcdbf38313b5a14063.png)'
  id: totrans-split-32
  prefs: []
  type: TYPE_IMG
  zh: '![Qiling](img/775b82dff2e264bcdbf38313b5a14063.png)'
- en: However, it requires a whole lot of scripting and adaption. It is by far not
    a tool that does all the work for you out-of-the-box.
  id: totrans-split-33
  prefs: []
  type: TYPE_NORMAL
  zh: ä½†æ˜¯ï¼Œå®ƒéœ€è¦å¤§é‡çš„è„šæœ¬ç¼–å†™å’Œé€‚åº”ã€‚è¿™ç»å¯¹ä¸æ˜¯ä¸€ä¸ªå¯ä»¥ä¸€é”®å®Œæˆæ‰€æœ‰å·¥ä½œçš„å·¥å…·ã€‚
- en: 'In fact, it even has quite a lot of bugs (e.g. wrongly emulated Windows APIs)
    and lacks quite a few essential features: I had to implement so many basics that
    I expected the framework to handle, e.g. TLS support ğŸ¥².'
  id: totrans-split-34
  prefs: []
  type: TYPE_NORMAL
  zh: äº‹å®ä¸Šï¼Œå®ƒç”šè‡³æœ‰ç›¸å½“å¤šçš„bugï¼ˆä¾‹å¦‚é”™è¯¯ä»¿çœŸçš„Windows APIï¼‰å’Œç¼ºå°‘ç›¸å½“å¤šçš„åŸºæœ¬åŠŸèƒ½ï¼šæˆ‘ä¸å¾—ä¸å®ç°å¾ˆå¤šæˆ‘å¸Œæœ›æ¡†æ¶å¤„ç†çš„åŸºç¡€åŠŸèƒ½ï¼Œä¾‹å¦‚TLSæ”¯æŒ
    ğŸ¥²ã€‚
- en: It feels like it is mainly designed for Linux, so maybe one day I can either
    upstream my patches/fixes or write my own framework. Who knows.
  id: totrans-split-35
  prefs: []
  type: TYPE_NORMAL
  zh: å®ƒä¼¼ä¹ä¸»è¦æ˜¯ä¸ºLinuxè®¾è®¡çš„ï¼Œæ‰€ä»¥ä¹Ÿè®¸æœ‰ä¸€å¤©æˆ‘å¯ä»¥å°†æˆ‘çš„è¡¥ä¸/ä¿®å¤ä¸Šæ¸¸ï¼Œæˆ–è€…ç¼–å†™æˆ‘è‡ªå·±çš„æ¡†æ¶ã€‚è°çŸ¥é“å‘¢ã€‚
- en: But even with all these flaws, I can not stress enough how helpful of a tool
    it was.
  id: totrans-split-36
  prefs: []
  type: TYPE_NORMAL
  zh: ä½†å³ä½¿å­˜åœ¨è¿™äº›ç¼ºé™·ï¼Œæˆ‘è¿˜æ˜¯ä¸èƒ½å¼ºè°ƒè¿™ä¸ªå·¥å…·æœ‰å¤šä¹ˆæœ‰å¸®åŠ©ã€‚
- en: Getting fully accomodated to Qiling and finding most of the fingerprint features
    took me about two months. Discovering the last one took the remaining 3 months
    and I only discovered it on accident.
  id: totrans-split-37
  prefs: []
  type: TYPE_NORMAL
  zh: å®Œå…¨é€‚åº”Qilingå¹¶æ‰¾åˆ°å¤§éƒ¨åˆ†æŒ‡çº¹ç‰¹å¾èŠ±äº†æˆ‘å¤§çº¦ä¸¤ä¸ªæœˆçš„æ—¶é—´ã€‚å‘ç°æœ€åä¸€ä¸ªç‰¹å¾èŠ±äº†å‰©ä¸‹çš„ä¸‰ä¸ªæœˆï¼Œè€Œä¸”æˆ‘æ˜¯å¶ç„¶å‘ç°çš„ã€‚
- en: To verify that a certain feature really is part of the fingerprint, I patched/spoofed
    it and checked that my previously valid Denuvo Token is now invalid and shows
    the error dialog.
  id: totrans-split-38
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†éªŒè¯æŸä¸ªåŠŸèƒ½æ˜¯å¦çœŸçš„æ˜¯æŒ‡çº¹çš„ä¸€éƒ¨åˆ†ï¼Œæˆ‘å¯¹å…¶è¿›è¡Œäº†è¡¥ä¸/æ¬ºéª—ï¼Œå¹¶æ£€æŸ¥äº†ä¹‹å‰æœ‰æ•ˆçš„Denuvoä»¤ç‰Œç°åœ¨æ— æ•ˆå¹¶æ˜¾ç¤ºé”™è¯¯å¯¹è¯æ¡†ã€‚
- en: For most of my patches, I had to use quite a lot of runtime disassembling to
    dynamically build my hooks and stubs, which lead me to discover quite a few bugs
    in various disassemblers ğŸ˜‚. (In hindsight, thinking about this, folks at Denuvo
    might have intentionally included instructions that cause bugs with those disassemblers.
    I donâ€™t know if thatâ€™s the case, but if it is, thatâ€™s hella smart.)
  id: totrans-split-39
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹äºæˆ‘çš„å¤§éƒ¨åˆ†è¡¥ä¸ï¼Œæˆ‘ä¸å¾—ä¸ä½¿ç”¨ç›¸å½“å¤šçš„è¿è¡Œæ—¶åæ±‡ç¼–æ¥åŠ¨æ€æ„å»ºæˆ‘çš„é’©å­å’Œå­˜æ ¹ï¼Œè¿™è®©æˆ‘åœ¨å„ç§åæ±‡ç¼–å™¨ä¸­å‘ç°äº†ä¸å°‘bug ğŸ˜‚ã€‚ï¼ˆäº‹åçœ‹æ¥ï¼Œæƒ³æƒ³è¿™ä¸ªï¼ŒDenuvoçš„äººå¯èƒ½æœ‰æ„åœ°åŒ…å«äº†å¯¼è‡´è¿™äº›åæ±‡ç¼–å™¨å‡ºbugçš„æŒ‡ä»¤ã€‚æˆ‘ä¸çŸ¥é“æ˜¯ä¸æ˜¯è¿™æ ·ï¼Œä½†å¦‚æœæ˜¯çš„è¯ï¼Œé‚£çœŸæ˜¯å¤ªèªæ˜äº†ã€‚ï¼‰
- en: However, as making a portable crack was not a goal, I made extensive use of
    my own [hypervisor](https://github.com/momo5502/hypervisor). I used it for example
    to install EPT hooks at a few locations that were otherwise too tedious to patch
    manually.
  id: totrans-split-40
  prefs: []
  type: TYPE_NORMAL
  zh: ä½†æ˜¯ï¼Œç”±äºåˆ¶ä½œä¾¿æºå¼ç ´è§£å¹¶ä¸æ˜¯ç›®æ ‡ï¼Œæˆ‘å¤§é‡ä½¿ç”¨äº†æˆ‘è‡ªå·±çš„[hypervisor](https://github.com/momo5502/hypervisor)ã€‚ä¾‹å¦‚ï¼Œæˆ‘ç”¨å®ƒåœ¨å‡ ä¸ªä½ç½®å®‰è£…äº†EPTé’©å­ï¼Œå¦åˆ™è¿™äº›ä½ç½®å°†å¤ªç¹çä»¥æ‰‹åŠ¨ä¿®è¡¥ã€‚
- en: With all features at hand, I forced the game to generate a token on my PC, using
    a fingerprint for my PC. Using all my patches and hooks (~2000 in total), I now
    wanted to run the game on my laptop using the token generated for my PC.
  id: totrans-split-41
  prefs: []
  type: TYPE_NORMAL
  zh: æœ‰äº†æ‰€æœ‰åŠŸèƒ½ï¼Œæˆ‘å¼ºåˆ¶æ¸¸æˆåœ¨æˆ‘çš„PCä¸Šç”Ÿæˆä¸€ä¸ªä»¤ç‰Œï¼Œä½¿ç”¨æˆ‘çš„PCçš„æŒ‡çº¹ã€‚ä½¿ç”¨æ‰€æœ‰æˆ‘çš„è¡¥ä¸å’Œé’©å­ï¼ˆæ€»å…±çº¦2000ä¸ªï¼‰ï¼Œæˆ‘ç°åœ¨æƒ³è¦ä½¿ç”¨ä¸ºæˆ‘çš„PCç”Ÿæˆçš„ä»¤ç‰Œåœ¨æˆ‘çš„ç¬”è®°æœ¬ç”µè„‘ä¸Šè¿è¡Œæ¸¸æˆã€‚
- en: 'After some time, I managed to get it to run until the start screen:'
  id: totrans-split-42
  prefs: []
  type: TYPE_NORMAL
  zh: è¿‡äº†ä¸€æ®µæ—¶é—´ï¼Œæˆ‘æˆåŠŸåœ°è®©å®ƒè¿è¡Œåˆ°å¯åŠ¨ç”»é¢ï¼š
- en: '![](img/6a7caeade614fbe897ae83813141dddc.png)'
  id: totrans-split-43
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6a7caeade614fbe897ae83813141dddc.png)'
- en: This is the point I wanted to reach. The game can now launch with a token issued
    for a different machine and I am absolutely happy.
  id: totrans-split-44
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯æˆ‘æƒ³è¾¾åˆ°çš„ç‚¹ã€‚ç°åœ¨æ¸¸æˆå¯ä»¥ä½¿ç”¨ä¸ºå¦ä¸€å°æœºå™¨å‘è¡Œçš„ä»¤ç‰Œå¯åŠ¨ï¼Œæˆ‘éå¸¸é«˜å…´ã€‚
- en: The game obviously still crashes here and there with the PC token. Sometimes
    I can launch into the game and play, sometimes it crashes. This is where one would
    need to patch all runtime checks.
  id: totrans-split-45
  prefs: []
  type: TYPE_NORMAL
  zh: æ˜¾ç„¶æ¸¸æˆä»ç„¶ä¼šå¶å°”åœ¨PCä»¤ç‰Œä¸Šå´©æºƒã€‚æœ‰æ—¶æˆ‘å¯ä»¥å¯åŠ¨æ¸¸æˆå¹¶è¿›è¡Œæ¸¸æˆï¼Œæœ‰æ—¶ä¼šå´©æºƒã€‚è¿™æ˜¯éœ€è¦å¯¹æ‰€æœ‰è¿è¡Œæ—¶æ£€æŸ¥è¿›è¡Œè¡¥ä¸çš„åœ°æ–¹ã€‚
- en: Knowing how the game performs these, it is just a matter of time and motivation.
  id: totrans-split-46
  prefs: []
  type: TYPE_NORMAL
  zh: äº†è§£æ¸¸æˆå¦‚ä½•æ‰§è¡Œè¿™äº›æ“ä½œåªæ˜¯æ—¶é—´å’ŒåŠ¨åŠ›çš„é—®é¢˜ã€‚
- en: However, as previously mentioned, this is still a huge task task to pull off,
    so everyone who managed to do that deserves my utmost respect.
  id: totrans-split-47
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶è€Œï¼Œæ­£å¦‚å‰é¢æåˆ°çš„ï¼Œè¿™ä»ç„¶æ˜¯ä¸€ä¸ªå·¨å¤§çš„ä»»åŠ¡ï¼Œå› æ­¤æ¯ä¸ªæˆåŠŸåšåˆ°è¿™ä¸€ç‚¹çš„äººéƒ½å€¼å¾—æˆ‘æœ€å´‡é«˜çš„å°Šé‡ã€‚
- en: Are there no details I can tell you?[#](#are-there-no-details-i-can-tell-you)
  id: totrans-split-48
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æˆ‘å¯ä»¥å‘Šè¯‰ä½ æ²¡æœ‰ç»†èŠ‚å—ï¼Ÿ[#](#are-there-no-details-i-can-tell-you)
- en: 'There is one thing Denuvo does, that is extremely simple, yet so sophisticated.
    It doesnâ€™t make up a huge part of the protection and I havenâ€™t seen it being documented
    anywhere, yet:'
  id: totrans-split-49
  prefs: []
  type: TYPE_NORMAL
  zh: Denuvoæœ‰ä¸€ä»¶äº‹éå¸¸ç®€å•ï¼Œä½†å´å¦‚æ­¤å¤æ‚ã€‚å®ƒå¹¶ä¸å ä¿æŠ¤çš„å¤§éƒ¨åˆ†ï¼Œæˆ‘è¿˜æ²¡çœ‹åˆ°å®ƒåœ¨ä»»ä½•åœ°æ–¹æœ‰æ–‡æ¡£è®°å½•ï¼š
- en: Denuvo doesnâ€™t always use the stack in a linear fashion.
  id: totrans-split-50
  prefs: []
  type: TYPE_NORMAL
  zh: Denuvoå¹¶ä¸æ€»æ˜¯ä»¥çº¿æ€§æ–¹å¼ä½¿ç”¨å †æ ˆã€‚
- en: On modern computers, the stack usually grows downwards. If something is pushed
    onto the stack, the stack pointer is decremented. If it is removed from the stack,
    the pointer is incremented.
  id: totrans-split-51
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ç°ä»£è®¡ç®—æœºä¸Šï¼Œå †æ ˆé€šå¸¸å‘ä¸‹å¢é•¿ã€‚å¦‚æœå°†æŸäº›å†…å®¹æ¨é€åˆ°å †æ ˆä¸Šï¼Œå †æ ˆæŒ‡é’ˆä¼šé€’å‡ã€‚å¦‚æœä»å †æ ˆä¸­ç§»é™¤ï¼ŒæŒ‡é’ˆä¼šé€’å¢ã€‚
- en: That means all memory above the pointer is reserved, everything below is free.
  id: totrans-split-52
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ„å‘³ç€æŒ‡é’ˆä¸Šæ–¹çš„æ‰€æœ‰å†…å­˜éƒ½è¢«ä¿ç•™ï¼Œä¸‹æ–¹çš„æ‰€æœ‰å†…å®¹éƒ½æ˜¯ç©ºé—²çš„ã€‚
- en: This concept does not apply with Denuvo in place. Elements are stored above
    the pointer, as well as below.
  id: totrans-split-53
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªæ¦‚å¿µåœ¨Denuvoå­˜åœ¨çš„æƒ…å†µä¸‹å¹¶ä¸é€‚ç”¨ã€‚å…ƒç´ å­˜å‚¨åœ¨æŒ‡é’ˆä¸Šæ–¹ï¼Œä»¥åŠä¸‹æ–¹ã€‚
- en: As long as everyone else adheres to that, everything works out fine. However,
    as soon as someone tries to use the stack linearly, values in the seemingly free
    region are going to be overwritten, resulting in the game to crash.
  id: totrans-split-54
  prefs: []
  type: TYPE_NORMAL
  zh: åªè¦æ¯ä¸ªäººéƒ½éµå®ˆè¿™ä¸€ç‚¹ï¼Œä¸€åˆ‡éƒ½ä¼šå¾ˆé¡ºåˆ©ã€‚ä½†æ˜¯ï¼Œä¸€æ—¦æœ‰äººè¯•å›¾çº¿æ€§ä½¿ç”¨å †æ ˆï¼Œçœ‹ä¼¼ç©ºé—²åŒºåŸŸä¸­çš„å€¼å°±ä¼šè¢«è¦†ç›–ï¼Œå¯¼è‡´æ¸¸æˆå´©æºƒã€‚
- en: This happens for example when using hardware breakpoints. When the exception
    triggered by the breakpoint is dispatched to the application, the exception context
    is stored on the stack, overwriting values the game uses.
  id: totrans-split-55
  prefs: []
  type: TYPE_NORMAL
  zh: ä¾‹å¦‚ï¼Œå½“ä½¿ç”¨ç¡¬ä»¶æ–­ç‚¹æ—¶ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µã€‚å½“ç”±æ–­ç‚¹è§¦å‘çš„å¼‚å¸¸åˆ†æ´¾åˆ°åº”ç”¨ç¨‹åºæ—¶ï¼Œå¼‚å¸¸ä¸Šä¸‹æ–‡å­˜å‚¨åœ¨å †æ ˆä¸Šï¼Œè¦†ç›–äº†æ¸¸æˆä½¿ç”¨çš„å€¼ã€‚
- en: This essentially makes hardware breakpoints and many other techniques either
    extremely difficult to use, or even impossible.
  id: totrans-split-56
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™åŸºæœ¬ä¸Šä½¿å¾—ç¡¬ä»¶æ–­ç‚¹å’Œè®¸å¤šå…¶ä»–æŠ€æœ¯è¦ä¹ˆæå…¶éš¾ä»¥ä½¿ç”¨ï¼Œè¦ä¹ˆç”šè‡³ä¸å¯èƒ½ã€‚
- en: What I did instead, to still be able to use hardware breakpoints, was to write
    a small debugger. It is attached to the game and its only job is to receive the
    exceptions triggered by the hardware breakpoints. That way, the exceptions are
    not dispatched to the game, thus not corrupting the stack.
  id: totrans-split-57
  prefs: []
  type: TYPE_NORMAL
  zh: ç›¸åï¼Œæˆ‘æ‰€åšçš„æ˜¯ï¼Œä¸ºäº†ä»ç„¶èƒ½å¤Ÿä½¿ç”¨ç¡¬ä»¶æ–­ç‚¹ï¼Œæˆ‘ç¼–å†™äº†ä¸€ä¸ªå°å‹è°ƒè¯•å™¨ã€‚å®ƒé™„åŠ åˆ°æ¸¸æˆä¸Šï¼Œå…¶å”¯ä¸€å·¥ä½œæ˜¯æ¥æ”¶ç”±ç¡¬ä»¶æ–­ç‚¹è§¦å‘çš„å¼‚å¸¸ã€‚è¿™æ ·ï¼Œå¼‚å¸¸å°±ä¸ä¼šåˆ†æ´¾åˆ°æ¸¸æˆï¼Œå› æ­¤ä¹Ÿä¸ä¼šç ´åå †æ ˆã€‚
- en: Such a technique is so simple, but still results in all hooks having to take
    that into account and thus becoming vastly more complex. Very impressive.
  id: totrans-split-58
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ ·çš„æŠ€æœ¯éå¸¸ç®€å•ï¼Œä½†ä»å¯¼è‡´æ‰€æœ‰é’©å­éƒ½å¿…é¡»è€ƒè™‘åˆ°è¿™ä¸€ç‚¹ï¼Œä»è€Œå˜å¾—æä¸ºå¤æ‚ã€‚éå¸¸ä»¤äººå°è±¡æ·±åˆ»ã€‚
- en: What about performance?[#](#what-about-performance)
  id: totrans-split-59
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: é‚£æ€§èƒ½å‘¢ï¼Ÿ[#](#what-about-performance)
- en: Everyone knows the rumors that Denuvo kills performance, but is that actually
    true?
  id: totrans-split-60
  prefs: []
  type: TYPE_NORMAL
  zh: æ¯ä¸ªäººéƒ½çŸ¥é“Denuvoä¼šé™ä½æ€§èƒ½ï¼Œä½†è¿™æ˜¯å¦çœŸçš„å±å®ï¼Ÿ
- en: Precisely measuring the performance impact Denuvo causes is extremely difficult.
    It requires knowing all the exact pieces of code Denuvo executes. Identifying
    these is an insanely huge amount of work.
  id: totrans-split-61
  prefs: []
  type: TYPE_NORMAL
  zh: å‡†ç¡®æµ‹é‡Denuvoé€ æˆçš„æ€§èƒ½å½±å“éå¸¸å›°éš¾ã€‚éœ€è¦çŸ¥é“Denuvoæ‰§è¡Œçš„æ‰€æœ‰ç¡®åˆ‡ä»£ç ç‰‡æ®µã€‚è¯†åˆ«è¿™äº›æ˜¯ä¸€é¡¹æå…¶åºå¤§çš„å·¥ä½œã€‚
- en: What Iâ€™ll do instead is to reason about it using measurements done by my hooks.
  id: totrans-split-62
  prefs: []
  type: TYPE_NORMAL
  zh: ç›¸åï¼Œæˆ‘å°†ä½¿ç”¨æˆ‘çš„é’©å­å®Œæˆè¿™é¡¹å·¥ä½œçš„ç†ç”±ã€‚
- en: This is not going to measure the performance impact directly, but it will give
    us is an estimate, a feeling, of how relevant it is to even talk about performance
    loss in combination with Denuvo.
  id: totrans-split-63
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ä¼šç›´æ¥æµ‹é‡Denuvoå¯¹æ€§èƒ½çš„å½±å“ï¼Œä½†å®ƒä¼šç»™æˆ‘ä»¬ä¸€ä¸ªä¼°è®¡ï¼Œä¸€ä¸ªæ„Ÿè§‰ï¼Œå…³äºä¸Denuvoç»“åˆè°ˆè®ºæ€§èƒ½æŸå¤±çš„ç›¸å…³æ€§ã€‚
- en: 'A good analogy to visualize what Iâ€™m going to measure is the following:'
  id: totrans-split-64
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªå¾ˆå¥½çš„ç±»æ¯”æ¥å½¢è±¡åŒ–æˆ‘å³å°†æµ‹é‡çš„æ˜¯ï¼š
- en: Imagine you are a developer and want to measure how much meetings slow down
    your pace of development. This is what I consider hard to measure.
  id: totrans-split-65
  prefs: []
  type: TYPE_NORMAL
  zh: æƒ³è±¡ä¸€ä¸‹ä½ æ˜¯ä¸€åå¼€å‘è€…ï¼Œæƒ³è¦è¡¡é‡ä¼šè®®å¯¹ä½ å¼€å‘é€Ÿåº¦çš„å½±å“ã€‚è¿™æ­£æ˜¯æˆ‘è®¤ä¸ºéš¾ä»¥è¡¡é‡çš„äº‹æƒ…ã€‚
- en: 'Instead, what Iâ€™m going to measure is: Do you even have that many meetings,
    so that it is relevant to even think about how much they slow you down?'
  id: totrans-split-66
  prefs: []
  type: TYPE_NORMAL
  zh: ç›¸åï¼Œæˆ‘è¦æµ‹é‡çš„æ˜¯ï¼šä½ æ˜¯å¦æœ‰è¿™ä¹ˆå¤šä¼šè®®ï¼Œä»¥è‡³äºè€ƒè™‘å®ƒä»¬å‡æ…¢ä½ çš„é€Ÿåº¦æ˜¯ç›¸å…³çš„ï¼Ÿ
- en: As in, if you have one meeting per year, doing the exhaustive test is just not
    worth it, because it doesnâ€™t really matter that much.
  id: totrans-split-67
  prefs: []
  type: TYPE_NORMAL
  zh: æ¢å¥è¯è¯´ï¼Œå¦‚æœä½ ä¸€å¹´åªå¼€ä¸€æ¬¡ä¼šè®®ï¼Œåšè¯¦å°½çš„æµ‹è¯•æ ¹æœ¬ä¸å€¼å¾—ï¼Œå› ä¸ºå®ƒå¹¶ä¸çœŸæ­£é‚£ä¹ˆé‡è¦ã€‚
- en: Note that this analysis only applies to Hogwarts Legacy. I donâ€™t know if any
    of that applies to other games protected by Denuvo!
  id: totrans-split-68
  prefs: []
  type: TYPE_NORMAL
  zh: è¯·æ³¨æ„ï¼Œæ­¤åˆ†æä»…é€‚ç”¨äºéœæ ¼æ²ƒèŒ¨ä¼ å¥‡ã€‚æˆ‘ä¸çŸ¥é“å…¶ä»–ç”±Denuvoä¿æŠ¤çš„æ¸¸æˆæ˜¯å¦é€‚ç”¨ï¼
- en: '[https://www.youtube.com/embed/6JriEmiZ1t0](https://www.youtube.com/embed/6JriEmiZ1t0)'
  id: totrans-split-69
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://www.youtube.com/embed/6JriEmiZ1t0](https://www.youtube.com/embed/6JriEmiZ1t0)'
- en: VIDEO
  id: totrans-split-70
  prefs: []
  type: TYPE_NORMAL
  zh: è§†é¢‘
- en: Every time the console prints `[MOMO] OVERHEAD` one of my hooks triggers. This
    essentially means Denuvo intervenes in the execution of the game (that I had to
    patch). This in turn means Denuvo causes at least â€œsomeâ€ (non-zero) performance
    overhead during those times.
  id: totrans-split-71
  prefs: []
  type: TYPE_NORMAL
  zh: æ¯æ¬¡æ§åˆ¶å°æ‰“å°`[MOMO] OVERHEAD`æ—¶ï¼Œæˆ‘çš„ä¸€ä¸ªé’©å­å°±ä¼šè§¦å‘ã€‚è¿™åŸºæœ¬ä¸Šæ„å‘³ç€ Denuvo å¹²é¢„äº†æ¸¸æˆçš„æ‰§è¡Œï¼ˆæˆ‘ä¸å¾—ä¸å¯¹å…¶è¿›è¡Œè¡¥ä¸ï¼‰ã€‚è¿™åè¿‡æ¥æ„å‘³ç€
    Denuvo åœ¨è¿™äº›æ—¶å€™è‡³å°‘ä¼šé€ æˆâ€œä¸€äº›â€ï¼ˆéé›¶ï¼‰æ€§èƒ½å¼€é”€ã€‚
- en: 'One can see that Denuvo does indeed intervene from time to time, but what one
    can clearly see: It doesnâ€™t do that very often, definitely not every frame.'
  id: totrans-split-72
  prefs: []
  type: TYPE_NORMAL
  zh: äººä»¬å¯ä»¥çœ‹åˆ° Denuvo ç¡®å®ä¸æ—¶å¹²é¢„ï¼Œä½†å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°ï¼šå®ƒå¹¶ä¸ç»å¸¸è¿™æ ·åšï¼Œç»å¯¹ä¸æ˜¯æ¯ä¸€å¸§ã€‚
- en: Itâ€™s only once every few seconds. Even less, sometimes it doesnâ€™t do anything.
    Only when major things happen, scene switches, loading screens or similar, the
    logs seem to accumulate.
  id: totrans-split-73
  prefs: []
  type: TYPE_NORMAL
  zh: å®ƒåªæ˜¯æ¯éš”å‡ ç§’é’Ÿä¸€æ¬¡ã€‚æœ‰æ—¶ç”šè‡³ä»€ä¹ˆéƒ½ä¸åšã€‚åªæœ‰åœ¨ä¸»è¦äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œåœºæ™¯åˆ‡æ¢ã€åŠ è½½å±å¹•æˆ–ç±»ä¼¼æƒ…å†µæ—¶ï¼Œæ—¥å¿—ä¼¼ä¹ä¼šç´¯ç§¯ã€‚
- en: What this exactly tells us is that during regular gameplay, only a small amount
    of Denuvo code is executed compared to during scene switches or loading screens.
    Potential performance issues during those occasions donâ€™t seem relevant to me
    though.
  id: totrans-split-74
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ç¡®åˆ‡åœ°å‘Šè¯‰æˆ‘ä»¬çš„æ˜¯ï¼Œåœ¨æ­£å¸¸æ¸¸æˆè¿‡ç¨‹ä¸­ï¼Œä¸åœºæ™¯åˆ‡æ¢æˆ–åŠ è½½å±å¹•æœŸé—´ç›¸æ¯”ï¼Œåªæ‰§è¡Œäº†å°‘é‡çš„ Denuvo ä»£ç ã€‚ç„¶è€Œï¼Œåœ¨è¿™äº›æƒ…å†µä¸‹å¯èƒ½å­˜åœ¨çš„æ€§èƒ½é—®é¢˜å¯¹æˆ‘æ¥è¯´ä¼¼ä¹ä¸ç›¸å…³ã€‚
- en: In fact was really surprised how few `OVERHEAD` lines were logged, as I expected
    the rumors to be true and tons of lines to be spamed, but this is not case! I
    donâ€™t see any spamming happening, unlike in other DRMs who interact in every frame.
  id: totrans-split-75
  prefs: []
  type: TYPE_NORMAL
  zh: äº‹å®ä¸Šï¼Œæˆ‘å¯¹è®°å½•çš„`OVERHEAD`è¡Œæ•°éå¸¸æƒŠè®¶ï¼Œå› ä¸ºæˆ‘é¢„æœŸä¼ è¨€æ˜¯çœŸå®çš„ï¼Œä¼šæœ‰å¤§é‡çš„è¡Œè¢«åˆ·å±ï¼Œä½†äº‹å®å¹¶éå¦‚æ­¤ï¼æˆ‘æ²¡æœ‰çœ‹åˆ°ä»»ä½•åˆ·å±å‘ç”Ÿï¼Œä¸åƒå…¶ä»–åœ¨æ¯å¸§ä¸­äº¤äº’çš„
    DRMã€‚
- en: I donâ€™t know the exact overhead each line implies, but what I know is what I
    had to patch. My hooks only need to change the execution a super tiny bit. While
    that doesnâ€™t mean anything for sure, I conclude that my changes would need to
    be more complex if Denuvo did more.
  id: totrans-split-76
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä¸çŸ¥é“æ¯è¡Œçš„ç¡®åˆ‡å¼€é”€æ˜¯å¤šå°‘ï¼Œä½†æˆ‘çŸ¥é“æˆ‘å¿…é¡»è¿›è¡Œè¡¥ä¸ã€‚æˆ‘çš„é’©å­åªéœ€è¦å¾®è°ƒæ‰§è¡Œã€‚è™½ç„¶è¿™å¹¶ä¸æ„å‘³ç€ä»€ä¹ˆç¡®å®šçš„äº‹æƒ…ï¼Œä½†æˆ‘å¾—å‡ºç»“è®ºæ˜¯ï¼Œå¦‚æœ Denuvo åšå¾—æ›´å¤šï¼Œæˆ‘çš„æ”¹åŠ¨å°±å¿…é¡»æ›´å¤æ‚ã€‚
- en: What I also donâ€™t know is if there are other pieces of code Denuvo executes
    at that time, that I just didnâ€™t need to hook.
  id: totrans-split-77
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä¹Ÿä¸çŸ¥é“åœ¨é‚£ä¸ªæ—¶å€™ Denuvo æ˜¯å¦æ‰§è¡Œäº†å…¶ä»–çš„ä»£ç ç‰‡æ®µï¼Œåªæ˜¯æˆ‘ä¸éœ€è¦æŒ‚é’©è€Œå·²ã€‚
- en: However, with 2000 hooks in place, I patched so many checks that I think it
    should at least give a good approximation and estimate.
  id: totrans-split-78
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶è€Œï¼Œæœ‰äº† 2000 ä¸ªé’©å­ï¼Œæˆ‘è¡¥ä¸äº†è¿™ä¹ˆå¤šæ£€æŸ¥ï¼Œæˆ‘è®¤ä¸ºè¿™è‡³å°‘å¯ä»¥ç»™å‡ºä¸€ä¸ªå¾ˆå¥½çš„è¿‘ä¼¼ä¼°è®¡ã€‚
- en: To me personally, it tells that Denuvo executes checks so infrequently, that
    the likelyhood of it causing major performance issues seems rather low. In terms
    of the analogy, it might more be in the range of one meeting per year.
  id: totrans-split-79
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹æˆ‘ä¸ªäººè€Œè¨€ï¼Œè¿™è¡¨æ˜ Denuvo æ£€æŸ¥çš„é¢‘ç‡å¦‚æ­¤ä¹‹ä½ï¼Œä»¥è‡³äºå®ƒå¼•èµ·ä¸»è¦æ€§èƒ½é—®é¢˜çš„å¯èƒ½æ€§ä¼¼ä¹ç›¸å½“ä½ã€‚åœ¨ç±»æ¯”ä¸Šï¼Œå®ƒå¯èƒ½æ›´åƒæ˜¯æ¯å¹´ä¸€æ¬¡ä¼šè®®çš„èŒƒå›´å†…ã€‚
- en: I donâ€™t know whether this is actually the case or not. This requires a different,
    more time consuming measurement, which to me doesnâ€™t seem worth setting up.
  id: totrans-split-80
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä¸çŸ¥é“è¿™æ˜¯å¦å±å®ã€‚è¿™éœ€è¦ä¸€ç§ä¸åŒã€æ›´è€—æ—¶çš„æµ‹é‡æ–¹æ³•ï¼Œè€Œåœ¨æˆ‘çœ‹æ¥ï¼Œè¿™ä¼¼ä¹ä¸å€¼å¾—è®¾ç«‹ã€‚
- en: Next time I am going to play a Denuvo protected game, I am not going to worry
    about it being the major cause of performance issues.
  id: totrans-split-81
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸‹æ¬¡æˆ‘ç©å— Denuvo ä¿æŠ¤çš„æ¸¸æˆæ—¶ï¼Œæˆ‘ä¸ä¼šæ‹…å¿ƒå®ƒæ˜¯æ€§èƒ½é—®é¢˜çš„ä¸»è¦åŸå› ã€‚
- en: It seems the protection is very well integrated into the game. Being a DRM developer
    myself, I know this is often a super tough challenge and definitely requires the
    protection to be manually integrated and adapted for the game.
  id: totrans-split-82
  prefs: []
  type: TYPE_NORMAL
  zh: çœ‹æ¥è¯¥ä¿æŠ¤éå¸¸å¥½åœ°é›†æˆåˆ°äº†æ¸¸æˆä¸­ã€‚ä½œä¸ºä¸€ä¸ª DRM å¼€å‘è€…ï¼Œæˆ‘çŸ¥é“è¿™é€šå¸¸æ˜¯ä¸€ä¸ªéå¸¸æ£˜æ‰‹çš„æŒ‘æˆ˜ï¼Œç»å¯¹éœ€è¦æ‰‹åŠ¨é›†æˆå’Œé€‚åº”æ¸¸æˆã€‚
- en: Why not measure FPS?[#](#why-not-measure-fps)
  id: totrans-split-83
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ä¸ºä»€ä¹ˆä¸æµ‹é‡ FPSï¼Ÿ[#](#why-not-measure-fps)
- en: I understand that all the previous test measured is the frequency of Denuvo
    interactions. Whatâ€™s missing is their magnitude.
  id: totrans-split-84
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘äº†è§£ä¹‹å‰çš„æ‰€æœ‰æµ‹è¯•æµ‹é‡çš„åªæ˜¯ Denuvo äº¤äº’çš„é¢‘ç‡ã€‚ç¼ºå°‘çš„æ˜¯å®ƒä»¬çš„å¤§å°ã€‚
- en: There is unfortunatly no way I could measure that. Looking at the FPS is not
    going to give me any conclusive results either.
  id: totrans-split-85
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸å¹¸çš„æ˜¯ï¼Œæˆ‘æ²¡æœ‰åŠæ³•æµ‹é‡è¿™äº›å¼€é”€ã€‚å•çº¯çœ‹ FPS ä¹Ÿä¸ä¼šç»™æˆ‘ä»»ä½•ç¡®å®šçš„ç»“æœã€‚
- en: 'This is the case for two reasons:'
  id: totrans-split-86
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯ç”±äºä¸¤ä¸ªåŸå› ï¼š
- en: The places Denuvo was integrated into could itself be complex. That means the
    game itself might be performing complex tasks on its own, that could have caused
    drops regardless of Denuvo executing a check at that time. This is likely going
    to be the case, as those are the locations where DRM checks are usually inserted.
  id: totrans-split-87
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: My hooks cause the overhead. There are many layers of complexity I introduce.
    Using EPT hooks through my hypervisor will cause at least 2 page faults resulting
    in 2 VM exits (due to the permission toggles). Ontop of that, Iâ€™m using `OutputDebugString`
    to log to the console, which is very expensive, due to raising an exception. What
    makes this even worse, however, is that I make the game debug itself. This results
    in the exceptions and console logs being synchronously intercepted by the debugger,
    while the game has to wait.
  id: totrans-split-88
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'So, looking at FPS and measuring drops is going to yield either two scenarios:'
  id: totrans-split-89
  prefs: []
  type: TYPE_NORMAL
- en: There are no drops at all, which means everything is super optimized, or there
    are FPS drops.
  id: totrans-split-90
  prefs: []
  type: TYPE_NORMAL
- en: 'In case of FPS drops, the results are going to be inconclusive, as it could
    mean Denuvo is bad, the game is bad, or the most likely scenario: my hooks are
    bad.'
  id: totrans-split-91
  prefs: []
  type: TYPE_NORMAL
- en: The goal of my measurement was simply to give people a gut feeling in which
    direction things go, regarding performance.
  id: totrans-split-92
  prefs: []
  type: TYPE_NORMAL
- en: And, to me at least, it shows Denuvo is not that bad. And definitely not as
    bad as other DRMs I have seen.
  id: totrans-split-93
  prefs: []
  type: TYPE_NORMAL
- en: Summary[#](#summary)
  id: totrans-split-94
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: This was the last thing I currently had on my bucket list and Iâ€™m so happy to
    cross that one off. It is to note that Denuvo could have done things a bit differently
    that would have made my analysis a lot harder.
  id: totrans-split-95
  prefs: []
  type: TYPE_NORMAL
- en: However, I still have to admit that itâ€™s an extremely strong protection. There
    was definitely more than one occasion when I was about to give up. On top of its
    protection, it seems to be very well integrated into the game and I was not able
    to measure any relevant performance overheads caused by it.
  id: totrans-split-96
  prefs: []
  type: TYPE_NORMAL
- en: Developing DRMs is always a super challenging task. Whether the use of DRMs
    is good or not, whether it feeds capitalism or just protects the hard work done
    by developers is something I canâ€™t decide. After all though, I think Denuvo does
    not deserve all the hate it gets.
  id: totrans-split-97
  prefs: []
  type: TYPE_NORMAL
