<!--yml

category: 未分类

date: 2024-05-27 13:37:47

-->

# 我们正在将持续集成移回开发者的机器

> 来源：[https://world.hey.com/dhh/we-re-moving-continuous-integration-back-to-developer-machines-3ac6c611](https://world.hey.com/dhh/we-re-moving-continuous-integration-back-to-developer-machines-3ac6c611)

在运行 Rubocop 样式规则、Brakeman 安全扫描以及模型-控制器-系统测试之间，我们的远程基于 BuildKite 的持续集成设置大约需要 5 分 30 秒来验证 HEY 的代码更改是否可以发布。而我的基于 Intel 14900K 的 Linux 机器可以在不到一半的时间内完成（而我的 M3 Max 速度也差不多！）。因此，我们打算放弃远程运行器，将持续集成重新移到 37signals 的开发者机器上。

多核开发者机器在过去五到七年间取得了多大的进步，这令人惊叹。在本地机器上以合理的时间运行所有这些检查和验证在不久之前是不可思议的。但是 14900K 有超过 20 个核心，M3 Max 有 16 个核心，甚至是低端的 M2 MacBook 也有 8 个核心。它们都能够并行处理大量工作，在2010年代中期想要在本地做到这些是不可想象的。

HEY 的代码库也相当庞大。大约 55,000 行的 Ruby 代码，通过约 5,000 个测试用例以及另外 300 多个系统测试进行验证。几乎所有这些测试都经过全栈测试并且访问数据库。这些并非全都是模拟测试。

对我来说，现代开发者 CPU 性能提升最令人满意的部分是简化我们的技术栈的可能性。安装、操作和管理远程 CI 设置是一个相当复杂的过程。要么你在自己的硬件上进行操作并直接处理这些复杂性，要么你通过云端设置付出昂贵的代价。能够把所有这些都简化掉，是一个了不起的进步。

就像往常一样，简化的未来并不平等。我不认为像 Shopify 或 GitHub 这样的公司能在短期内在本地运行针对它们数百万行代码的完整测试。但是 99.99% 的 Web 应用程序在广度上更接近于 HEY，而不是这些巨头。小团队应该尽可能去除所有可能的动态部分。永远不要期望一个比你的应用程序所需更复杂的技术栈。

因此，我们需要继续燃烧这些

[复杂性的桥梁](https://world.hey.com/dhh/introducing-propshaft-ee60f4f6)

当我们到达另一边时。我迫不及待地想要放火烧掉在 37signals 这里的所有远程持续集成桥梁。进步就是燃烧的篝火。
