- en: <!--yml
  prefs: []
  type: TYPE_NORMAL
- en: 'category: 未分类'
  prefs: []
  type: TYPE_NORMAL
- en: 'date: 2024-05-27 13:24:58'
  prefs: []
  type: TYPE_NORMAL
- en: -->
  prefs: []
  type: TYPE_NORMAL
- en: Google (and others) please implement link analytics with “ping” or “navigator.sendBeacon”
    | by Christian Bodt | Apr, 2024 | Medium
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 来源：[https://medium.com/@sirk390/google-and-others-please-implement-link-analytics-with-ping-or-navigator-sendbeacon-538508491900](https://medium.com/@sirk390/google-and-others-please-implement-link-analytics-with-ping-or-navigator-sendbeacon-538508491900)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Google (and others) please implement link analytics with “ping” or “navigator.sendBeacon”
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Did you notice that when hovering over some external links on a website, the
    links don’t redirect to the external site, but to an internal redirection link?
  prefs: []
  type: TYPE_NORMAL
- en: Redirect Link on Google News
  prefs: []
  type: TYPE_NORMAL
- en: These links get analytics from users’ clicks before redirecting them.
  prefs: []
  type: TYPE_NORMAL
- en: For example let’s looks at Google News.
  prefs: []
  type: TYPE_NORMAL
- en: '**Google News**'
  prefs: []
  type: TYPE_NORMAL
- en: On my computer for Google News, clicking this link and redirecting to the target
    takes between **1.6 and 2.7 seconds** (over three trials). It also downloads about
    **2.7Mb of HTML, javascript and CSS.** Most of it is cached by the service worker
    so you don’t have to wait for the network, but it code is executed and appears
    to slow down the redirection significantly.
  prefs: []
  type: TYPE_NORMAL
- en: Firefox Performance Analysis when clicking on a Google News article.
  prefs: []
  type: TYPE_NORMAL
- en: This is a lot of time spent just waiting for a redirection. Especially since
    this is the best-case scenario. It can be much longer when you have a bad internet
    connection.
  prefs: []
  type: TYPE_NORMAL
- en: Google Search on desktop is doing much better here, and uses the “ping” attribute.
  prefs: []
  type: TYPE_NORMAL
- en: '**Ping Attribute**'
  prefs: []
  type: TYPE_NORMAL
- en: The ping attribute was invented early in HTML5\. It was initially heavily debated
    and removed due to privacy concerns but is now back later in the HTML living standard.
  prefs: []
  type: TYPE_NORMAL
- en: The `ping` attribute in HTML is used to track clicks for analytics without disrupting
    the user's navigation.
  prefs: []
  type: TYPE_NORMAL
- en: 'Below is an example:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'As you can see, it is very easy to use but it has a small drawback: It works
    on most browsers except Firefox. Firefox doesn’t implement it for privacy reasons
    as you can see in the “Can I Use” screenshot below.'
  prefs: []
  type: TYPE_NORMAL
- en: '[https://caniuse.com/ping](https://caniuse.com/ping)'
  prefs: []
  type: TYPE_NORMAL
- en: '**Alternative: Use navigator.sendBeacon()**'
  prefs: []
  type: TYPE_NORMAL
- en: Another option is to use `[navigator.sendBeacon](https://developer.mozilla.org/en-US/docs/Web/API/Navigator/sendBeacon)`
    This javascript function makes an HTTP request that continues in the background
    even when the navigation changes.
  prefs: []
  type: TYPE_NORMAL
- en: It is supported by all major browsers (including firefox). The drawback is that
    it is more complicated to implement.
  prefs: []
  type: TYPE_NORMAL
- en: '**Major Websites**'
  prefs: []
  type: TYPE_NORMAL
- en: 'Many major websites continue to use redirect links for tracking purposes despite
    newer technologies like the `ping` attribute or `navigator.sendBeacon`. Below
    are some other websites examples:'
  prefs: []
  type: TYPE_NORMAL
- en: Google Search & Google Images on Mobile (Chrome)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Youtube (description or comment links)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Twitter (t.co links)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: And probably many more (If you know some, please send comment and I will add
    them here).
  prefs: []
  type: TYPE_NORMAL
- en: So please for developers at Google and other companies, save us those hundreds
    of milliseconds, sometimes 3 seconds or more when we click on a link and implement
    `ping` or `navigator.sendBeacon` for async analytics.
  prefs: []
  type: TYPE_NORMAL
