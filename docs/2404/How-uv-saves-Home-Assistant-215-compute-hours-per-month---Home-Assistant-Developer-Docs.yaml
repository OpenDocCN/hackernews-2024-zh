- en: <!--yml
  prefs: []
  type: TYPE_NORMAL
- en: 'category: 未分类'
  prefs: []
  type: TYPE_NORMAL
- en: 'date: 2024-05-27 12:55:28'
  prefs: []
  type: TYPE_NORMAL
- en: -->
  prefs: []
  type: TYPE_NORMAL
- en: How uv saves Home Assistant 215 compute hours per month | Home Assistant Developer
    Docs
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 来源：[https://developers.home-assistant.io/blog/2024/04/03/build-images-with-uv/](https://developers.home-assistant.io/blog/2024/04/03/build-images-with-uv/)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: By replacing `pip` with `uv` in our production images, our build pipeline (and
    therefore releasing a new version) is a lot faster. `Uv` is an extremely fast
    Python package installer and resolver written in Rust. It is developed by [Astral](https://astral.sh/)
    and it's open source. Check it out on [GitHub](https://github.com/astral-sh/uv).
  prefs: []
  type: TYPE_NORMAL
- en: In the following table, you can see that we can save around 5 hours of execution
    time on each build.
  prefs: []
  type: TYPE_NORMAL
- en: '| Arch | Pip | UV | Savings |'
  prefs: []
  type: TYPE_TB
- en: '| --- | --- | --- | --- |'
  prefs: []
  type: TYPE_TB
- en: '| aarch64 | 1h 24m 53s | 5m 18s | ~1h 20m |'
  prefs: []
  type: TYPE_TB
- en: '| armhf | 1h 52m 20s | 6m 2s | ~1h 46m |'
  prefs: []
  type: TYPE_TB
- en: '| armv7 | 1h 26m 43s | 5m 28s | ~1h 21m |'
  prefs: []
  type: TYPE_TB
- en: '| amd64 | 22m 10s | 3m 20s | ~19m |'
  prefs: []
  type: TYPE_TB
- en: '| i386 | 17m 37s | 3m 11s | ~14m |'
  prefs: []
  type: TYPE_TB
- en: On average, we run the build pipeline 43 times as we create
  prefs: []
  type: TYPE_NORMAL
- en: 31 nightlies (one nightly per day)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 7 beta releases
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 5 stable releases (including patch ones)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: In total, we save around 215 hours per month. With this massive improvement,
    we can now ship hotfixes even faster, as the pipeline to ship a new version now
    takes around 20 minutes instead of 2.5 hours.
  prefs: []
  type: TYPE_NORMAL
- en: The 215 monthly saved execution hours can be used by other jobs and make the
    CI experience for all developers and our community better. By replacing `pip`
    with `uv`, we improve our sustainability by using fewer resources to build our
    images.
  prefs: []
  type: TYPE_NORMAL
- en: '**A big thank you to Astral for developing this amazing tool.** Please check
    out their [website](https://astral.sh/) and products as they offer, for example,
    a "lightning" fast linter/formatter for Python too.'
  prefs: []
  type: TYPE_NORMAL
