<!--yml

category: 未分类

date: 2024-05-27 13:05:02

-->

# 经典的Win32 ListView如何处理增量搜索？- 旧的新东西

> 来源：[https://devblogs.microsoft.com/oldnewthing/20240408-00/?p=109627](https://devblogs.microsoft.com/oldnewthing/20240408-00/?p=109627)

# 经典的Win32 ListView如何处理增量搜索？

经典的Win32 ListView支持增量搜索：你可以开始键入项目名称来搜索它。但它比这更复杂一些。

你看，人们期望的类型搜索方式不止一种。一种模式是你键入你想要的东西的首字母，系统找到以该字母开头的第一个项目。如果这不是你想要的项目，则再次按下相同的字母，系统会找到以该字母开头的第二个项目。继续按下相同的字母，直到找到你想要的项目为止。这就是Windows 1.0中列表框搜索的方式。

另一种模式是键入你想要的东西的首字母，系统会找到以该字母开头的第一个项目。如果这不是你想要的项目，则键入你想要的东西的第二个字母，系统会找到第一个前两个字母与你键入的字母匹配的项目。继续键入更多字母，直到找到你想要的项目为止。

经典的Win32 ListView控件应该使用哪种模式？

[为什么不两者都有](https://knowyourmeme.com/memes/why-not-both-why-dont-we-have-both "为什么不两者都有？meme解释")？

如果你一遍又一遍地输入相同的字母，那么经典的Win32 ListView会认为你正在使用第一种模式，每次再按下相同的字母，它会选择以该字母开头的下一个项目。但如果你输入不同的字母，那么经典的Win32 ListView会认为你在输入一个前缀，它会选择以该前缀开头的第一个项目。

举个例子，假设你有一个ListView，其中包含以下项目：

+   美洲狮

+   豹子

+   狐猴

+   狮子

+   驼鹿

+   老虎

你键入L，这会选择*Lion*，列表中以L开头的第一个动物。

你键入另一个L。因为现在有两个L，Win32的ListView处于“重复字母”模式，选择第二个以L开头的动物，即*Lemur*。

现在你键入A。这不再是重复相同字母，所以Win32的ListView切换到“前缀”模式，选择以“LLA”开头的第一个项目，即*驼鹿*。
