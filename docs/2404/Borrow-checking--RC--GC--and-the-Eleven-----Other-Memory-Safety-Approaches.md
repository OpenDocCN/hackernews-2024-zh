<!--yml

category: 未分类

date: 2024-05-27 13:29:13

-->

# 借用检查、RC、GC 和另外十一个（！）内存安全方法

> 来源：[https://verdagon.dev/grimoire/grimoire](https://verdagon.dev/grimoire/grimoire)

**13：约束引用** 是参考计数和单所有权（在C++中的意义，与借用检查无关）的结合体。在这种方法中，每个对象都有一个单一所有者，不一定需要在堆上，并且有一个计数器来统计对它的所有引用。当我们试图销毁对象时，我们只需断言没有其他引用指向这个对象。

这种方法出奇地经常被使用。一些[游戏开发者](https://discord.com/channels/402956206529970177/402956206529970180/451828861861101569)长期以来一直在使用这种方法，并且它可以作为整个语言的内存安全模型，如[Gel](https://web.archive.org/web/20220111001720/https://researcher.watson.ibm.com/researcher/files/us-bacon/Dingle07Ownership.pdf)。它支持比借用检查更多的模式（侵入式数据结构、图、观察者、反向引用、依赖引用、回调、委托、多种形式的RAII等）。

然而，这种检查是在运行时进行的。在发布模式下停止通常是不希望的，因此当目标非常明确或者在发布模式下可以切换到不同的策略时，这种技术才能发挥最大的作用。
