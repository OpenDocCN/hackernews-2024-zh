<!--yml

类别：未分类

日期：2024-05-27 12:55:28

-->

# 如何使用uv每月节省Home Assistant 215计算小时 | Home Assistant开发者文档

> 来源：[https://developers.home-assistant.io/blog/2024/04/03/build-images-with-uv/](https://developers.home-assistant.io/blog/2024/04/03/build-images-with-uv/)

通过在我们的生产镜像中用`uv`替换`pip`，我们的构建流水线（因此发布新版本）变得快得多。 `Uv`是一个极快的Python包安装器和解析器，使用Rust编写。它由[Astral](https://astral.sh/)开发，并且是开源的。在[GitHub](https://github.com/astral-sh/uv)上查看它。

在以下表格中，您可以看到我们每次构建可以节省大约5小时的执行时间。

| 架构 | Pip | UV | 节约 |
| --- | --- | --- | --- |
| aarch64 | 1小时24分钟53秒 | 5分钟18秒 | 约1小时20分钟 |
| armhf | 1小时52分钟20秒 | 6分钟2秒 | 约1小时46分钟 |
| armv7 | 1小时26分钟43秒 | 5分钟28秒 | 约1小时21分钟 |
| amd64 | 22m 10s | 3m 20s | 约19分钟 |
| i386 | 17分钟37秒 | 3分钟11秒 | 约14分钟 |

平均而言，我们每次创建时运行43次构建流水线

+   31 nightly（每天一次）

+   7个Beta版本发布

+   5个稳定版本（包括补丁版本）

总体而言，我们每月节省大约215小时。有了这一巨大改进，我们现在可以更快地发布热修复，因为发布新版本的流水线现在只需大约20分钟，而不是2.5小时。

每月节省的215小时的执行时间可以用于其他工作，并且使所有开发者和我们社区的CI体验更好。通过用`uv`替换`pip`，我们通过使用更少的资源来构建我们的镜像来提高我们的可持续性。

**非常感谢Astral开发这个了不起的工具。**请访问他们的[网站](https://astral.sh/)和产品，例如，他们也提供了一个Python的“闪电”快速的代码检查/格式化工具。
