<!--yml

类别：未分类

日期：2024-05-27 14:51:16

-->

# Delphi 是否是一种内存安全的语言？

> 来源：[https://blogs.embarcadero.com/is-delphi-a-memory-safe-language/](https://blogs.embarcadero.com/is-delphi-a-memory-safe-language/)

上周，美国政府发布了报告 “[回到基础：通向安全和可衡量软件的路径](https://www.whitehouse.gov/wp-content/uploads/2024/02/Final-ONCD-Technical-Report.pdf)”。该报告是美国网络安全战略的一部分，重点关注多个领域，包括内存安全漏洞和质量指标。

此报告已被多家在线杂志评论，强调了针对 C 和 C++ 编程语言的重大抵制。

一些这些文章包括：

## 美国政府报告关于内存安全语言的说法是什么？

报告非常关注“内存安全漏洞”，并单独指出“缺乏与内存安全相关的特征并且在关键系统中广泛传播的编程语言”。它继续建议“从一开始就使用内存安全的编程语言，正如《网络安全和基础设施安全局（CISA）开源软件安全路线图》所推荐的那样。

引用的是报告 [NSA 软件内存安全信息单](https://media.defense.gov/2023/Apr/27/2003210083/-1/-1/0/CSI_SOFTWARE_MEMORY_SAFETY_V1.1.PDF)。该文件更详细地解释了内存安全的含义，将其归纳为类型安全、安全分配和释放（可能包括垃圾收集器）。本段核心内容如下：

*使用内存安全语言可以帮助防止程序员引入特定的内存相关问题。内存是作为计算机语言的一部分自动管理的；它不依赖于程序员添加代码来实现内存保护。语言使用编译时和运行时检查的组合来自动提供保护。这些固有语言特性防止程序员无意间引入内存管理错误。内存安全语言的例子包括 Python®、Java®、C#、Go、Delphi/Object Pascal、Swift®、Ruby™、Rust® 和 Ada。即使使用内存安全语言，内存管理也不完全是内存安全的。*

## NSA 是否将 Delphi 列为内存安全语言？

是的，Delphi 被列为内存安全语言。一些文章最初报告了一个较短的安全语言列表，仅包括一些最流行的语言，并排除了 Delphi。该列表后来已经修正，与 NSA 报告相匹配。

Delphi 社区对此进行了一些讨论，考虑该语言是否安全，考虑到它缺乏内存安全的一个特征，即垃圾回收。然而，官方评估是基于多个方面进行的，并考虑到其他因素：

+   安全编程语言的一个核心特征是拥有强类型系统，并在编译时验证数据类型映射，而不是在运行时。动态语言即使有垃圾回收器，也可能存在运行时错误的风险，这可能影响其安全性。

+   另一个要素是不需要借助指针和更直接的内存管理来编写一般代码。尽管Delphi不阻止直接内存访问的使用，但这相当罕见。Delphi提供了自动化和简化内存管理的机制，即使没有垃圾回收也能做到。

## 使用内存安全语言是否意味着我完全免受安全风险？

另一个普遍的考虑是，内存安全被提出作为一个目标，但并非绝对。例如，主要报告强调，在某些需要执行时间可预测性的应用程序类型中（如航空航天行业），垃圾收集器在不可预测的时间触发可能会影响关键时序代码的执行。相比于其他流行的语言，Delphi在工业自动化空间中具有显著优势，正是因为它允许直接控制，同时相对于C++而言在更高级别和更简单的层次上保持。

## NSA和美国政府将Delphi列为内存安全语言 —— 它还推荐了哪些内容？

尽管报告建议向内存安全语言转移，但它也强调了使用形式化方法进行静态代码分析，特别是专注于安全性的分析。我们也注意到Delphi在这一领域的兴趣日益增长，并且我们一直在[推广第三方工具](https://blogs.embarcadero.com/how-secure-is-your-app-static-analysis-finds-security-holes/)来帮助解决这些问题。

还有一个长篇专注于基于硬件或CPU级别的内存安全实施的部分。在同一领域，原始的NSA报告强调了利用诸如控制流守护（CFG）、地址空间布局随机化（ASLR）和数据执行防护（DEP）等功能的重要性。这些安全设置已经在[最近版本的Delphi](https://blogs.embarcadero.com/rad-studio-11-1-and-windows-pe-security-flags/)中实施，并且已成为新项目的默认设置。

## 什么是供应链安全？

最后，还有另一个长篇章节涵盖了库依赖链的安全性，有时也称为“供应链安全”，主张使用正式方法评估库的安全性，包括开源库的安全性。人们越来越担心许多项目的高依赖性增加了安全风险，这并非源于项目代码本身，而是所使用的库。在这方面，报告详细描述了Log4j Java库中的Log4Shell漏洞。这个库漏洞影响了像Java这样的内存安全语言，并且在报告中指出，“这是一个严重的弱点，通过它恶意行为者可以威胁全球计算机系统”。报告继续指出，“这个漏洞突显了确保开源生态系统安全的重要性，这个生态系统在全球范围内促进了巨大的创新。”

## Embarcadero在帮助应对安全风险方面做了哪些工作？

这里明确表明，在各个层面上，从政府机构到各大小企业，对软件安全存在着日益增长的关注。甚至在白宫和NSA发布Delphi作为内存安全语言的报告之前，Embarcadero已经注意到安全问题是客户日益关注的问题。我们继续专注于投资和改进Delphi对现代安全技术的支持，并提供清晰、免炒作的教育，介绍真实的风险和可用的缓解措施。
