<!--yml

category: 未分类

date: 2024-05-27 14:55:54

-->

# 向量数据库创建基准测试及其结果的过程

> 来源：[https://www.adesso.de/en/news/blog/procedure-for-the-creation-of-vector-databases-benchmark-tests-and-their-results.jsp](https://www.adesso.de/en/news/blog/procedure-for-the-creation-of-vector-databases-benchmark-tests-and-their-results.jsp)

#### 向量和向量数据库

向量是一个数学对象，可以表示为有序的数字集合，称为分量，这些分量对应于向量沿不同坐标轴的延伸。在二维空间（平面）中，向量可以表示为 (x,y)，其中 x 和 y 是沿水平和垂直轴的分量。在三维空间中，向量可以表示为 (x,y,z)，分别沿 x、y 和 z 轴的分量。有许多方法可以定义一对向量之间的相似度概念（欧几里得距离和余弦相似度是其中两个例子）。欧几里得距离推广了我们在平面上两点之间距离的自然概念（#pythagoreantheorem），而余弦相似度则捕捉了两个向量如果指向大致相同方向则它们相似的想法。

在其核心，向量数据库旨在存储相同大小的元数据丰富的向量集合，并在这样的集合上执行快速的近似相似度搜索。它们能在短时间内高效地回答以下问题：

> “给定任意向量 X，存储集合中与 X 最接近的 5 个近似向量是什么？”。

当存储的向量作为其关联元数据的语义嵌入时，向量数据库的能力得到释放，并且两个向量之间的相似度捕捉了元数据的语义接近度概念。如果元数据是自然语言，则可以使用诸如word2vec这样的嵌入算法或大型语言模型，例如Aleph Alpha的Luminous或OpenAI GPT模型来实现这一点。

从应用程序的角度来看，这样一个向量化的文档存储可以作为检索增强生成（RAG）架构中检索阶段的知识存储。

您还可以在此博客文章中找到更多关于该主题的信息：“[智能检索信息的巧妙方法：对话代理作为访问公司知识的工具](https://www.adesso.de/en/news/blog/a-clever-way-to-retrieve-information-conversational-agents-as-a-tool-to-access-knowledge-held-at-the-company-2.jsp)”。

#### 向量数据库基准测试

当您构建数据密集型应用程序（或任何应用程序）时，找到每个组件在性能/成本比例上的最佳位置至关重要。对于向量数据库而言，有两个重要的性能问题：

+   1\. 插入一个向量需要多长时间（包括使其可发现以进行相似度搜索）？

+   2\. 给定一个输入向量，查找前 N 个最近向量需要多长时间？

注意：第二个问题的答案应始终根据近似的准确性来看待。毕竟，允许近似程度越差，就越容易快速推导出它。在优化相似性搜索的准确性时，通常需要仔细调整可以强烈影响上传和搜索时间消耗的参数，并且这些选择高度依赖于底层数据集的结构。因此，为了保持我们基准测试中的参数空间可管理性，我们专注于研究上述问题，而不是优化相似性搜索的准确性。

#### 数据库

在我们的实验中，我们对向量数据库竞争中的三个开源竞争者 - Chroma、Qdrant和Weaviate进行了基准测试。

##### Chroma

Chroma是一个AI原生的开源嵌入式数据库。该公司通过Quiet Capital的Astasia Myers领导的一轮1800万美元的种子轮融资，进一步突显了投资者对其潜力的信心。Chroma宣传自己携带电池，允许开发人员快速便捷地启动数据库实例，从而使开发工作更加轻松。

##### Weaviate

Weaviate是一个由总部位于阿姆斯特丹的SeMI Technologies自2019年以来开发的开源搜索引擎和数据库。Weaviate的宣布使命是民主化搜索功能，这些功能以前由少数几家主要技术公司垄断。该公司的软件允许客户在其基础架构上运行它，从而使他们能够在他们的防火墙后维护其数据。该公司还提供托管云服务Weaviate Cloud，为偏好基于云的数据管理方法的组织提供额外的灵活性。

##### Qdrant

Qdrant是一个开源向量数据库，两年多前开始使用Rust作为系统编程语言构建向量数据库的使命。2023年初，Qdrant通过推出Qdrant Cloud扩展了其产品线，这是一个管理的向量数据库解决方案，服务于超过1,000个Qdrant集群。Qdrant目前正在通过为企业客户提供托管的本地解决方案来扩展其产品线，进一步巩固其作为多功能和可访问的向量数据库解决方案的地位。

#### 实验

在我们的基准测试中，我们使用GloVe 100角度数据集测试了Chroma、Qdrant和Weaviate在向量上传和检索性能方面的表现。这个数据集是GloVe算法产生的一个包含1.1百万个100维向量的词表示集合。

您可以在[这里](https://www.tensorflow.org/datasets/catalog/glove100_angular)找到关于glove100_angular的更多信息。

为了测试向量插入性能，我们以大约1000个向量的批次加载了1,183,514个100维向量到每个测试基础设施上的每个数据库中。这测试了数据库快速高效地摄取数据的能力，这对于涉及大量数据的应用案例而言是关键的度量标准。

对于向量检索，我们对加载的数据执行了10,000次查询。这测量了数据库的搜索速度，对于需要快速响应用户查询的应用程序至关重要。

我们的测试基础设施包括三种尺寸的 Azure 虚拟机（VM）- 小型（S）、中型（M）和大型（L）。每台虚拟机都分别使用了硬盘驱动器（HDD）和固态硬盘（SSD）进行了测试。每种 VM 尺寸的规格如下：
