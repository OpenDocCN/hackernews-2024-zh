<!--yml

类别：未分类

日期：2024-05-27 14:40:44

-->

# 唐纳德·克努斯 - 牦牛剃须的守护神

> 来源：[https://yakshav.es/the-patron-saint-of-yakshaves/](https://yakshav.es/the-patron-saint-of-yakshaves/)

# 唐纳德·克努斯 - 牦牛剃须的守护神

2015年，我在一个演讲中称[唐纳德·克努斯为牦牛剃须的守护神](https://speakerdeck.com/skade/tex-the-ultimate-yakshave)。原因是唐纳德·克努斯实现了最完美和最持久的牦牛剃须：TeX。

我觉得这值得重复。

## 如何实现终极的牦牛剃须

终极牦牛剃须是不可能的情况的组合，有能力按照自己的意愿剃须，并有意愿把事情做到底。这是如何在TeX中实现的。这个叙述纯属我个人的，不准确，显然是为了好玩。我会避免每个人都会讲的最无聊的事实，比如[为什么克努斯的支票有自己的维基百科页面](https://en.wikipedia.org/wiki/Knuth_reward_check)。

所以，让我们开始吧。

## 前剃须

TeX是为了排版一本书而发明的。没有复数形式。它是为了《计算机程序设计艺术》第二版而发明的。第二版必须重新排版，因为用于第一版的“热铅”排版不再可用。由于对现有选项不满意，Knuth决定写自己的系统，后来成为TeX。

但是，《计算机程序设计艺术》本身也是一本令人印象深刻的书：尽管未完成，目前跨越了3.5卷（是的，第四卷还未完成，但第一章节已经发布）。它被[美国科学作家](https://web.archive.org/web/20080820030403/http://www.americanscientist.org/bookshelf/pub/100-or-so-books-that-shaped-a-century-of-science)称为世纪之书。

牦牛剃须 -2：写一本世纪之书

深入研究《计算机程序设计艺术》，这本书已经展示了一个命中注定要成就更大事业的牦牛剃须者的作品。本书中的所有程序都参考了一种通用的汇编语言：MIX。这种语言是为了这本书而发明的。

牦牛剃须 -1：为了说明而发明自己的计算机

## 实现

TeX的第一个版本是用[SAIL](https://en.wikipedia.org/wiki/SAIL_(programming_language))编程语言实现的。后来被WEB取代。WEB是什么？这是一种编程语言，由…你现在肯定已经猜到了，唐纳德·克努斯发明。它转译为PASCAL。Knuth在WEB变酷之前就已经转译了WEB。

牦牛剃须 1：沿途某处，实现自己的编程语言…

WEB是一种特殊的语言：在WEB中，任何裸文本都只是文本。它与标记的代码片段交错，这些代码片段后来用于程序代码。文档可以通过特殊程序运行以生成…一个TeX文件。这一概念被称为“文学编程”，由…唐纳德·克努斯引入。

牦牛剃须 2：为此发明自己的编程范式

那么，TeX究竟是做什么的呢？主要是文本布局和其他几件事情。因为Knuth以其在算法研究上的贡献而闻名，他当然离不开自己的算法，后来与Michael Plass一起发表。这个算法做什么呢？它找到了在页面上排列段落的视觉上令人愉悦的方式，而不会让行尾看起来突兀（例如通过调整“粘合剂”，即单词之间的空白）。这里有一个[很好的解释](https://www.ugrad.cs.ubc.ca/~cs490/2015W2/lectures/Knuth.pdf)。

它仍被认为是良好的，并且对TeX文档的可识别外观具有巨大影响。

牦牛剃须3：为它发明你自己的布局算法

这也带来了下一个问题：*这个东西*到底是做什么的？泛泛而言：各种大小的对象和对象群。有趣的是，这正是TeX所处理的，除了尺寸之外它没有字符的概念。

然而，这些通常是字符，字符是由字体提供的。字体通常需要付费许可，70年代并没有那么多免费字体可用。

TeX文档的另一个非常可识别的特征是它们通常使用名为“Computer Modern”的字体。

我试图让整个过程更加刺激，所以我会让你猜猜是谁创建了那个。

牦牛剃须4：设计一个字体

字体需要被创作。通常它们是用一些矢量描述来描述的，通常是贝塞尔曲线。这是相当标准的，不是Knuth的创新。*但是*，他为此编写了一种描述语言，并配以解释器将这些描述转换为正确的字体文件。这就是[METAFONT](https://en.wikipedia.org/wiki/Metafont)。它并非TeX的严格组成部分，只是这头牦牛碰巧站得近。

牦牛剃须5：为字体编写一个作者工具

顺带一提，METAFONT后来演变成了用于通用矢量绘图的METAPOST，它具有许多现代图形描述语言缺失的一个特性：能够描述一个（可寻址的）点作为两个其他原始图元的交点。

另一个小提示：TeX和METAFONT仍然按照缓慢的速度发布更新。TeX目前版本为3.14159265，METAFONT版本为2.7182818。是的，TeX正缓慢趋向于圆周率π，而METAFONT则朝着自然对数e方向发展。看吧，语义版本控制的倡导者们！

牦牛剃须6：提出你自己的版本控制方案

牦牛剃须7：避免因为更大的利益而采纳它

我们还没完。我们可以排版文本（和其他东西），但是要将它们转换成什么呢？现在，每个人都知道打印机带来的恐怖，所以没有人想直接处理那些。经典的TeX转换为[DVI](https://en.wikipedia.org/wiki/Device_independent_file_format)，即“设备无关”格式。我不了解它的详细情况，只知道维基页面上的信息，其中特别指出“DVI不是文档加密格式”。它再次是一种基于堆栈的语言（与PostScript不同，不是图灵完备的），可以通过驱动程序解释，然后发送到任何目标（打印机、PDF或类似）。它是由……设计的。

David R. Fuchs，Knuth刚刚写了实现。

Yak shave 8：为可打印文档实现一种自定义语言。

请注意，我没有提到TeX本身是一种……有趣的语言，但我不认为这是yak shave，这只是实现而已。

这使得大部分初始实现都完成了。这意味着，按照有序的方式，你应该把事情交给社区处理。

自TeX发布以来，社区一直忙于将其用作平台。如果你曾经下载过完整的TeX发行版，请记住，你正在下载超过40年积累的工作，以确保编译每一篇TeX文档。我们在谈论文档。

但大多数情况下，两个大项目就此展开。第一个是由Leslie Lamport创建的LaTeX。Lamport是一个非常有成就的研究者，以在TLA+中进行形式方法研究和为许多分布式算法奠定基础而闻名。LaTeX基于分离展示和内容的思想。它围绕文档类的概念展开，然后描述了某个文档的布局方式。想象一下Markdown，只是复杂得多。第二个是ConTeXt，它更加专注于精细的布局控制。

两者共享一个共同的特性：

社区的yak shave 1：创建不止一个，而是两个在Google发明之前无法被搜索到的程序……

在一个以“Rust”、“Cargo”和“manifests”为中心的语言中积极参与，我感到非常自在。

现在，社区还希望发展TeX：多年来技术发生了很多变化，例如，你可能想使用现代字体格式，直接写入现代输出格式或使用这种新的UTF-8东西。为此，有专门的TeX解释器，如`pdf(la)tex`、`lua(la)tex`和`xe(la)tex`。这里有个问题：你不能改变TeX并以[这个名字分发](https://en.wikipedia.org/wiki/TeX#License)。这里的想法是，如果你有一个`tex`二进制文件，你可以编译过去和未来的任何有效的TeX。

在这条道路上的第一个问题是，WEB并不真正是一种流行的编程语言，PASCAL也不是，在现代系统上运行它有点麻烦。这意味着……

社区剃牦牛2：将WEB转译成C再进行工作

这只是一个伟大努力的开始…

社区剃牦牛3：围绕它建立大量工具

## 故事的寓意

每当你在处理TeX时感觉“我们能不能就把这整个东西替换掉，肯定不难”的时候，请不要忘记，这个系统背后投入了多少年的工作，尤其是知识。排版并不是程序员中最受欢迎的知识。特别是在它所处的环境中看：他们不能移除遗留系统。永远不行。那会破坏文档。

TeX也不是一种编程语言。它可能看起来像，但大多数时候，它应该被看作是一种排版系统。这样，很多令人困惑的术语就更容易理解了。这不是编程术语。

通过了解TeX的历史来接近它，可以从中学到很多东西。是的，替代品会很棒，但这需要很长时间。

无论如何，我希望我已经彻底地说服你，为什么唐纳德·克努斯是牦牛剃毛的保护神。

这是与[Lambda Island 的阿恩](https://lambdaisland.com/)进行愉快讨论后得出的结论，他听后说：“你应该完全把这转变成一个演讲”。

[top](/)
