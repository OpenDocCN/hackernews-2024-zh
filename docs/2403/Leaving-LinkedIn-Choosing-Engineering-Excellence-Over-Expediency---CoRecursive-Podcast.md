<!--yml

category: 未分类

date: 2024-05-27 14:40:39

-->

# 离开领英：选择工程卓越而非权宜之计 - CoRecursive播客

> 来源：[https://corecursive.com/leaving-linkedin-with-chris-krycho/](https://corecursive.com/leaving-linkedin-with-chris-krycho/)

## 介绍

**亚当：** 喂，欢迎来到CoRecursive。我是亚当·戈登·贝尔。想象一下，你正站在塑造世界上最大的专业社交网络LinkedIn前端的前沿，拥有数十亿用户，然后发现自己在核心价值观与工作需求之间的交叉路口。

今天，我们将深入探讨一位领英高级工程师面临的真正困境。如果你是一位忠实的听众，你可能会认出这位嘉宾。

**克里斯：** 现在可以了。这些现在在运行了。该死，难道我弄坏了听你的能力吗？

**亚当：** 喂，喂，喂？

**克里斯：** 我是的。该死，等一下。

**亚当：** 喂，喂？

**克里斯：** 是的，是的，我们现在一切都好了。好的，让我们再试一次。

**亚当：** 这是克里斯·克莱科，他之前曾在播客中谈论过TypeScript。不过今天，他将讲述他在领英的时光。

**克里斯：** 我喜欢我的领英时光。那是很棒的经历。我对未来会带我去哪里充满期待，因为没有那段经历，我不可能做接下来的事情，包括坎坷的时刻，也包括光辉的时刻。

你知道，你可能会从整个故事的困难结局中得出结论，哇，领英对克里斯来说真是糟糕透顶，但实际上，在大部分时间里，它真的很棒，我对此感到非常高兴。甚至是那个坎坷的结局，我很高兴学到了一些教训，并期待它带我去哪里。

**亚当：** 所以，是关于那个坎坷的结局。克里斯在领英担任了近五年的相当重要和高级的角色。他负责了桌面应用程序中的许多重要项目，也就是当你在非移动浏览器中访问LinkedIn.com时所看到的。他主导了诸如现代化处理大量JavaScript等项目。

但是，让我们切入正题。克里斯辞去了领英的工作。他因为沮丧而选择了离开。这就是我们今天要分解的故事。在一个拥有成千上万开发者的地方担任高级技术职位是什么样的体验？对了，你如何协调多个团队之间的重大计划？

如何完成这样的项目？如何领导大型项目？如何改进庞大的代码库？此外，如何在可持续的开发实践和速度需求之间取得平衡？如果这种对速度和迭代速度的渴望与你的方法、价值观以及你认为事情应该如何进行之间发生冲突，会怎么样？

如何处理这种冲突？剧透警告，结果是克里斯选择离开了这份工作。这就是我们今天要讨论的内容。但是，事情都起源于桑尼维尔。

## **在领英的第一天**

**Chris:** 现在已经快五年了。我开始工作的时间是2019年1月底，感觉好像已经过去很久了，多亏了COVID。但是，当我刚到那里的时候，无论是加入大公司还是健康的小公司，通常都会有各种形式的入职培训。所以我花了很多时间参加入职培训课程，了解整个技术栈的各个层面，以及其他相关的知识。

**Adam:** 克里斯在正式开始远程工作之前会在科罗拉多进行两周的入职培训，而这两周中的第二周会与他的团队共度时间。

**Chris:** 你知道，在团队中旁边坐着并与我的团队、我的经理以及我工作过的一些人聊天。

即使那时，该团队也比大多数公司更为分布式。因此，我们有几个人在阳光明媚的Sunnyvale办公室的一个角落里工作，还有几个人在旧金山办公室的一个角落里工作，然后有一个人在阿拉斯加工作，还有我，实际上是在科罗拉多远程工作，这在我加入LinkedIn时非常不寻常。当时我们有不到100名远程工程师，总工程师数却有数千人。

**Adam:** 对于克里斯来说，能在这样的地方工作是一个巨大的改变。

## **代码百万行**

**Chris:** 我之前所在的创业公司有一个相对标准、结构良好的单体后端，然后有数据库和一些零星的服务。我来到LinkedIn后发现，第一，负责前端客户端应用的员工比我之前的雇主还多。第二，这个客户端应用的代码行数比我之前的雇主整体还要多。第三，后端运行着成千上万个服务，还有这些庞大的API服务器，绝对比我们之前的雇主任何时候都要庞大。但这只是LinkedIn.com的一个API服务器，而我们还有广告销售平台，还有LinkedIn Learning等等，列表就这样不断地延续下去。所以，其中一个非常深刻的体验就是反复地惊讶，我很抱歉，请问你刚才说的是插入的数字吗？

我之前的公司在我看来那时有一个相当大的应用程序，大约有15万行代码。但是当我到LinkedIn时，前端就有了200万行代码，我简直不敢相信，你说的是百万吗？这太多了。

那个大小差不多是我的20倍，你是如何建立它的？建造需要多久？哦，一个新的构建需要17分钟。这还不算糟糕。也许我们应该让它变得更好，但这已经不错了。

## **基础设施团队**

**亚当：** 克里斯的团队被称为基础设施团队，但这并不意味着要搭建服务器。更像是工程支持或开发者体验。克里斯的工作是让LinkedIn庞大的桌面应用程序的前端更易于开发。那真的是很多。

**克里斯：** 要作为服务并在某种程度上帮助引导大约150到200名工程师每个季度提交到这个应用程序，发布越来越多的代码行，只要你在如此规模的环境中做任何事情，如何做到这一点？有数十个团队，数百名工程师试图发布一个统一的产品？刚开始时所有这些都令人震惊，但也很清楚。这不是像我害怕什么，而更像是这很酷。但哦，天哪，我们如何做什么，还有？你知道的，你考虑技术债务或技术成功，无论哪种情况，但在那样的规模下，所有这些成功和问题都被放大了很多倍。

所以你会说，噢，我们有200万行的技术债务，无论你的技术债务问题是什么，都会因此而增加，而不是，你知道的，基线。这真的很多。

## **JS现代化**

**亚当：** 克里斯帮助引入JavaScript类是其中的第一个重大变化。JavaScript已经引入了类，但他们正在使用Ember框架，他们的代码需要一些小心的更新。

**克里斯：** 那么我们怎样才能让200万行代码改变它们如何编写类，从将一个对象文字传递到函数，到现在我们要使用类foo扩展子类bar或超类bar。

所以这种事情就像，好吧，我们有代码修改器。但它们并不是百分之百的，并且有一些复杂的问题，比如，如果你把JavaScript的原生类作为老式Ember类的子类使用？然后这又是原生类的子类，所以有点像条纹。

我们给这个问题起了一个有趣的名字叫斑马条纹效应。就像你的类看起来像一系列斑马条纹，其中一些是白色的，一些是黑色的，想象一下，这是老式类与现代JavaScript类的对比。由于旧系统从未设计用于与此配合工作，所以会有中断错误。

这可能是我在那里学到的最重要的一点。在这种规模的迁移中要成功，它必须尽可能地可自动化，否则它永远也完成不了，因为即使你全职工作也要花费数月时间来手动重写200万行代码，这真的需要很多很多的工作，即使你可以全职工作也是如此。

要求产品团队全职停工去为他们的JavaScript语言寻找一些新的语法完全是不合理的。即使这些语法带来了性能上的好处，即使来自最终用户体验的好处，

**Adam:** 哦，对了。产品团队。对了。克里斯的团队致力于改善开发者体验的方式，但他们需要其他人的支持。他们需要那些忙于推出新功能的产品团队的帮助。

**Chris:** LinkedIn拥有一些相对完善的流程，始终在进行一定程度的修订，但也有一些相对完善的流程。为了应对大规模技术投资，这一切可以追溯到LinkedIn在2010年代初期因其单体应用遇到扩展瓶颈而必须转向面向服务的架构、早期微服务时期。

之所以如此，是因为在那个时候，它已经不能再扩展单个的单体应用了，而且在那时，用户基数的大小只有现在的十分之一左右，等等。所以他们基本上不得不停止一年的工作，并且他们审视了那个问题，你知道我说的停工，停止产品工作，并且他们说我们永远都不会再做这样的事了。停工一年太贵了，作为一种业务。

因此，我们有一个这样的系统，用于横向倡议，这就是它们被称为的地方，横向意味着跨越大量团队，并且你必须向他们做出提案。有一个委员会为整个公司审查并保持那里的参与水平在一个，你知道。

这些团队的承诺为10%或更低，以便你可以说，我们不会将所有产品团队的100%投入到你的技术倡议中。

**Adam:** 将其控制在10%以下是很困难的，所以计划是使用大量自动化和工具来加快速度。

但首先，他们需要高级副总裁的许可，因此他们制定了一个提案。

**Chris:** 因此，尝试在一页纸上总结所有的优势和权衡，以及它如何在商业价值上具有意义，以及实际的技术结果是什么，以及然后这些技术结果的商业结果是什么。顺便说一句，LinkedIn曾经有一个非常有趣的传统，那就是写了三到六页长的一页纸。

**Adam:** 你是说你制作了一个工具，然后具体的团队使用这个工具，并确保，就像，

**Chris:** 是的，确切地说，我们也从早期的某些阶段学到了一些东西，如果我们不需要让那些具体的团队来做这件事，并且我们可以替他们做的话，那也更好。因为一个团队说是的，我会审查你的PR并进行冒烟测试以确保一切正常，比起让他们签署说我会花一半或一周的时间来做这些代码修改，要容易得多。

如果我可以说，嘿，我有这个自动化工具。我将在你们的代码库上运行它。这是一些培训。所以，你知道输出会是什么样子，如何使用它。你可以合并我的PR吗？要比说，嘿，你们能为我们做点工作吗？更容易得到他们的认可，特别是他们的管理层。

我们用了18个月的时间从头到尾完成了Ember的工作。大部分时间在六个月的时期内，但总会有一长串的团队，啊，抱歉，我们不得不推迟两个季度。还有另一个团队受到影响，好吧，我们想要资助这个，但实际上CEO本人刚刚否决了我们尝试推出新产品设计的计划。

我们将不得不从头开始重建。抱歉，当你与CEO对抗时，你会输掉的。因此，你的技术倡议很重要。我们同意，但不，你不能要那个。否则CEO就赢了。

## **TypeScript**

**Adam:** 在那个项目成功之后，Chris和他的团队有了一个明确的下一个目标。那就是在前端生成的错误泛滥。

**Chris:** 像大多数公司一样，LinkedIn对这类事情有错误日志记录。你知道，你的创业公司可能使用类似射线枪的东西来接收这些信息。LinkedIn有自己的内部基础设施，因为我们每小时提交的错误级别的价格将会非常高昂。

**Adam:** 真是疯狂。我想可能意味着有很多可能是次要的代码路径是有问题的。哦，这对我来说很意外。

**Chris:** 我的嘲讽看法是，事实上不应该如此。真的不应该。就像，为了少一点嘲讽，真诚地说一下。当我看软件时，很多软件都很糟糕。在这些方面是有问题的，通常不是由于工程师缺乏关注，而是通常是由于至少两种结构性因素的组合。第一种因素是我们许多人熟悉的，即商业压力的形式，看，我们必须发布这个东西，而在很多方面，这是一个非常好的推动功能。激励的工程师通常倾向于太长时间地进行打磨，有时我们只需要让这个东西进入世界。

这又一次，并不一定。

不好，但这可能意味着我们要走捷径，妥协质量，而没有非常强大和健壮的工程文化去理解，是的，这是一个有价值的折衷，但我们不能一直这样做，否则最终会得到最终是糟糕的、拙劣的用户体验，短期内可能不会伤害我们，但长期来看实际上会损害我们的业务。

即使你尽力了，你最终的代码通常也会有微妙的问题。所以你的冒烟测试可能无法捕捉到它。你的QA尝试可能也捕捉不到。它可能在一个隐蔽的路径中，但当LinkedIn在去年跨过十亿会员计数时。

嗯，一个十亿会员接触的东西，到我离开时，这个单一仓库中的 3.2 百万行代码，一半是测试，一半是生产代码。但是，无论你如何努力进行 QA，总会有人认为需要测试的特定路径组合。

所以你最终得到了一个有问题的东西，也许页面会卡住，也许会白屏，你知道，有人重新加载

它或者在移动设备的一个应用程序上，他们只是关闭应用然后重新启动它，再试一次。而且，我们都知道，重启解决了很多问题，因为你可以避开那些奇怪的状态错误。

**亚当：** 但是，确实有一个解决方案。如果你一个个地解决这些问题，并且想象一下，你其实一直在使用 TypeScript。

**克里斯：** 所以我们做的一件事是去看看，好的，我们知道 JavaScript 错误的实际计数是多少？有些你永远也捕捉不到。

TypeScript 很复杂，JavaScript 也很复杂，但是有些错误可以说，看，如果我们真的做了整体迁移，多少这些事情会停止进入我们的日志基础设施？当你看到每天百万级的数字时，你开始真正能够谈论到，嘿，我们至少可以将应用程序的日志量减少四分之一。

呃，只需减少 25%。这个数字可能比这还要高。这是一个底线。

## **TypeScript 收购**

**亚当：** 所以，克里斯开始组织一份关于迁移到 TypeScript 的一页简报。好消息是，可以逐步进行 TypeScript 的迁移。

许多代码库以前都做过。坏消息是，它根本无法适应 10% 的时间预算。这只是一个太大的任务。

但是克里斯的文件很有说服力。TypeScript 曾经有这样一个口号，JavaScript 的扩展。

那些数百万行的代码，所有这些错误，以及经过它们，很明显 LinkedIn 需要那些扩展性的好处。所以，克里斯跳过了水平倡议，他，他有点基层，从下面开始。

**克里斯：** 工程经理会问他们团队的工程师，好的，你主张我们在这里成为早期采纳者，或者我们在这里进行重大投资。

为什么？那份文件只是被递给他们。所以它成为一个非常有用的工具，只需以相对简洁的格式提供信息，说这里解决了哪些问题。这里我们获得了哪些胜利。在我们试图聘请竞争对手时，它如何堆叠起来。

然后人们可以把它放入他们的心理框中，这是工具是什么。这是它给我们带来的好处。这与其他优先事项竞争如何。好的。是的，这有道理。有了这个基础，那么关于优先级与其他事物的讨论就变得容易得多了。我认为这让任何人都更容易说：不，这是值得的。好的，我明白了。

**Adam:** 是的，这很有说服力。就好像你告诉了他们一个显而易见的事实，然后人们必须去做。

**Chris:** 是的。是的，没错。

**Adam:** 因此，TypeScript开始流行起来。Chris成为了解决棘手类型问题的人。需要帮助处理棘手的TypeScript问题，请找Chris。但随着这个新项目的进行，下一个大问题落到了他的桌子上。事情从这里开始有些失控。

LinkedIn是全球最大的EmberJS用户，但他们对此并不是特别满意。这是一个冲突。Chris也感受到了这一点。他是一个开源Ember团队的成员，也是一个贡献者。但在LinkedIn作为DX（Developer Experience）的人，他看到了很多不匹配之处。

**Chris:** 但长话短说，一年半前我的工作是想出一个计划，让我们从Ember迁移到React。

与此同时，我们的高级领导们也在说在LinkedIn的迁移成本太高了。尽管你们已经尝试过所有这些事情，我们讨论过的降低迁移成本，让基础设施平台团队尽可能自己做这些事情。

还是太高了。我们觉得这对我们的产品速度来说成本太高了。现在，我会认为减少产品速度的一些原因是你有一个有300万行代码，七年历史的应用程序，其中积累了相当多的技术和产品债务。

随着时间的推移，速度会逐渐变慢。永久保持这种速度是非常困难的。你不能仅仅因为会破坏用户体验就随意更改事物。因此，即使在产品设计工作上也会变得更加困难，因为在这种规模下，如何以及何处将其纳入产品是一个更难的问题。但不管怎样，领导层传达给我们的信息是。

我们希望看到迁移成本更低。那么，如何将300万行的Ember代码迁移到React代码而成本又低呢？

**Adam:** 想想这个问题。做一次大规模的迁移，但在此过程中不要拖慢任何人的速度。

## **慢迁移计划**

**Chris:** 我们制定了一项策略，我们认为能解决他们提出的问题。我们预计需要三到五年的时间。而三年的时间已经很乐观了。

我们的想法只是在自动化方面加倍努力。让产品团队基本上无需大量工作来完成这件事。而这个想法是按顺序和分块的方式进行，将其各个线索分开，这样你就可以处理其中的一块，从头到尾完成，然后转向下一块。

一些工作可以并行化。有些则不太行，所以要搞清楚顺序，搞清楚分块，将能并行化的部分并行化，改变构建流水线，改变数据层，改变路由层，找出一种适合响应系统的桥梁，该桥梁要懂得如何处理路由和视图层，最后，从Ember的角度转换视图层和响应系统。

渲染和响应系统，在最后是React，但是你已经编写了可以执行它的自动化。所以这就是我们的建议。就像我说的，三到五年要做很多工作，但这个想法是产品团队永远不会真正停止。

**亚当：** 这是一个巨大的任务，就像在长途旅行中不断驾驶汽车逐步重建它一样。那将是令人印象深刻的。但是三到五年，那真的很长。

与此同时，当克里斯的团队为工程老板准备他们的计划时，另一个团队联系了我们。我们将这个团队称为Fingerguns团队，这并不是他们的真名。但他们也有一个计划，正在解决类似的问题。

**克里斯：** 包括他们以不同方式提出的内容。在我看来，是正确的，即工程领导层和其他人真正想要的，那就是速度这个词。

如何更快地发布功能和想法？如何更快地进行迭代？如何将一个想法从构思到A/B测试？我们能不能把这个时间缩短到几周而不是几个月？因为。你知道，已经是几个月了。他们确定了，好吧，我们在堆栈上有这种分裂。

我们有一个不同的移动网络堆栈。我们的iOS和Android应用程序的周期时间很长。我们能不能把这些时间缩短？缩短。我认为，回顾起来，他们正确地认识到，当我们的领导告诉我们迁移疲劳时，迁移疲劳是一种症状。

他们真正关心的实际问题是这个。那就是，我们能否专注于更快的迭代，尝试想法，如果不是好想法或者不起作用，就将其扼杀掉。而迁移会妨碍这样做，因为我们的工程师花费10或20或25%的时间在迁移上，而不是在能够迭代这些事物上。

我们提出的计划完全没有考虑到这一点。

另一个团队带来了一个从根本上重新思考一切的提案。

## **Finger Gun的计划**

**克里斯：** 这完全就是我的另一个同事曾经描述的“手指枪模式”，意思是，是的，是的，这将会很棒，伙计，就像互相做手指枪一样，而不回答任何关于当我们试图支持成百上千的工程师时，操作会是什么样子的问题。

而且我认为，如果他们带着“这是一个想法”的态度进来，我可能就不会那么生气了。但我们意识到，由于我们习惯于支持十几个而不是一百八十个，并且有三十倍于以往的工程师，所以会有一些我们会忽略的事情，这些只是将重新塑造事物的一部分。

有时，新鲜的视角让你能够进来并说，是的，我明白你的意思。我们确实需要确保解决那个问题。如果我们尝试这样做，也许不会奏效，但如果我们试试呢？有一种方法可以做到这一点。但是那个团队并没有这样做。他们就像，不，这不会成为问题，伙计。我就像，哦，不，事实上，它可能会是个问题，也许我们可以解决这个问题。而我完全支持你告诉我，让我们尝试这种解决问题的方法。但是不，不，这确实会是一个问题。我们有很多经验可以告诉你，从我们与之并肩作战中来看，这是一个真正的问题。所以这其实很大程度上是一个案例。试图找到协作的方法，同时对我们的消息似乎没有传达给另一个团队感到永久性的沮丧。他们说，不，这里确实有一些你真的需要关心的问题，我们很乐意帮助你关注这些问题，但从我们的角度来看，你并没有表现出对问题空间和你试图在这里做的事情的严肃性。

我们觉得也许值得去做。但关于X、Y和Z呢？我们只是得到了基本上忽视它的回应。

像两个投资顾问一样，一个是标准普尔500指数基金，另一个是，你见过比特币吗？NFTs？他们兴奋得不得了。

**亚当：** 也许这太极端了。

**克里斯：** 我的意思是，无论值不值得，这真是我们感到的完美比喻。

## **计划判断**

**亚当：** 所以克里斯很生气，他对这个计划感到很生气。他不知道他可以提出一个大的想法，比如停止一切，然后开始一个巨大的项目，承诺后面会更快。如果他知道的话，你可以打赌他会有一个计划，对吧？也许是一个不那么疯狂的计划，也许考虑更多，但它肯定会比三到五年的时间表更具侵略性。但他甚至不知道停止世界是一个选择。

而且，Jim在这里作为手枪团队的一名顶级高级工程师，与Chris之间也存在一种文化冲突。他们在很多事情上根本看法不一致。他们对软件工程的看法有根本性的不同。

所以Chris的团队向工程领导层呈现了他们经过深思熟虑、考虑周详、尽管有点乏味和长远的计划。

**克里斯：** 领导层非常讨厌这种情况。

**亚当：** 他们可能很难理解一个五年的计划。比如说，

**克里斯：** 是的。是的，我觉得这是其中的一个很大的部分，我们对计划并不感到兴奋，这使得它真的很难被接受。

要让一组高管和领导者对一个工程师们推出的团队真正感到兴奋，确实很困难，这个团队被描述为“嗯，它会完成工作”的团队。

就像它解决了我们认为你让我们解决的所有问题。

我们认为这有点糟糕，但比我们找到的任何其他选项都好一点。

**亚当：** 所以大概，这些都在高管层里搅得很混乱。人们围绕一个模糊的问题提出解决方案，起源于从Ember到React的问题，但实际上核心问题是如何改变事物，以便我们能够加快速度？我们如何在LinkedIn加快变革速度？

我想高管们也有他们自己的担忧，对吧？他们有要达成的数字目标。他们有市场压力。他们可能面临来自微软的压力。一个计划来摆脱随着时间累积的所有无用杂物。以及一个获取速度的计划，以提高速度。

这听起来一定相当不错。然后克里斯休了个圣诞节假期。

## **On Call**

**克里斯：** 我回来后发现我们的网站出现了问题，LinkedIn的用户群体会有长达大约20分钟的时间无法访问linkedin.com页面，会收到“抱歉，出了点问题”的提示。

我告诉你两件事。一是我讨厌值班和运维类的工作。二是我是团队中最资深的工程师，被指派来做这件事。而且这完全是值班和运维类的工作，因为我们试图搞清楚问题的所在。所以我基本上在圣诞节前很沮丧地休假，然后回来说好吧。

我深吸了一口气。我可以做到这一点。我们将解决与另一个团队的这些动态问题，但实际上发生的是一切都在火上，而且背景中仍在进行这件事情，现在你要花三个月做你最讨厌的工作，试图弄清楚哪里出了问题。

## **内存泄漏**

**亚当：** 关于这一事件，LinkedIn有这种预渲染服务。他们用Node.js运行客户端代码，并从后端聚合所有数据，然后可以通过一次大请求将其发送给客户端，从数据中心快速打包交付给用户。

但这导致了内存泄漏，服务频繁宕机。

**克里斯：**所以，我们达到了那些箱子开始耗尽内存的点，我们设计了一个系统，它会说，啊，你花费了内存使用的限制。我们只需重新启动这个箱子。合理。然而，我们有一些东西丢失了。

首先，对此没有任何警报。因此，没有人得到特别的警报，比如说，嘿，你的内存被杀了很多次。我不应该说没有任何警报。但对此的警报不足够。其次，有一个设置可以说，同时可以重启多少个容器？

那个设置是配置文件中的一个关键字，并且那个关键字被键入了

但在某个时刻，有人在那里设置了一个合法的可行值，但对于这个系统来说可能是错误的值。

说可能，我是说绝对。

**亚当：**具体来说，数量大约是正在运行的所有这些服务的总数。它们全部几乎同时启动。它们得到的请求大致相同，所以它们的内存使用速度也大致相同上升。这听起来糟糕。有人可能会注意到内存使用量在上升。

除此之外，是的。警报不足。

**克里斯：**所以这种情况越来越严重，我们开始看到的是每当有一个长周末或者其他原因导致另一种部署停留足够长时间时，而这个配置错误的切换意味着，哎呀，我们可以同时重新启动它们。当你同时重新启动所有的服务器时会发生什么？突然间它们不再响应用户请求。然后我们就会遇到这种雪崩问题，其中一些服务器会停机，这会增加其余服务器的压力。

因此，他们开始加快他们的内存使用速度，因为他们得到了更多的流量。所以问题重复，我们最终会关掉整个数据中心的这些服务器。在背景中，也曾有一个合适规模的过程，在这个想法中，我们将降低我们的整体CPU和内存使用率，以尽量避免超量配置，我们认为我们有足够大的余地，一切都会没事的，我们可以节省不买新硬件的钱，如果我们实际上并不需要它。考虑这些事情的交叉点，我们发现合适规模的过程降低了上限，与此同时内存泄漏提高了房间的水位，突然间现在水到了天花板，并且这与一个错误的配置的组合意味着我们完全无法应对。

因此，我和其他一些工程师在四处看着，说我们需要更好的警报系统，在这方面需要更好的可观察性。我们需要更强的韧性。一个节点服务器失控不应该导致管理这些节点进程的主机进程关闭。相反，我们应该在这种情况下杀死节点进程并发出警报，然后重新启动节点进程，这样我们就不需要关闭容器，也不会陷入这种情况。

**Adam:** 好比说，这里有五个机会可以改进。

**Chris:** 没错，完全正确。失败是不可避免的，对吧？人类会犯错。系统会遇到停电。世界上的事情会出错。因此，我对软件工程的看法是，它不同于编程或黑客技术，或者可以看作是它们的超集，它关乎设计支持工程师完成他们的工作，达成产品目标。

我们有多层次的韧性，能够捕捉到有错事情，修复这种错误的安全方法在这里和警告，并说，嘿，顺便说一句，有些事情改变了，现在出了问题。

因此，当这种情况发生时，我们如何使系统（技术面和人员面）能够做出良好的响应？

**Adam:** 如果你有兴趣，你可以从这样的事件中学到很多东西。解决问题是对的，但也要改善系统，防止问题再次发生。克里斯探索的一个救援措施是，如果这些服务不可用，就退回到客户端获取。

Chris 的方法很大程度上展示了他作为一名工程师的特质。他关心的不仅仅是软件本身，还有周围的系统，以及如何改进这些东西，对吧？

他甚至有一个叫做“慢慢赢”的播客。这个播客全都是关于稳定增长和持续改进的。

但是是的，高层领导只是想要尽快解决这个事件。也许这又与速度有关，但无论原因是什么，事件会议开始变得有点紧张。

## **事件推迟**

**Chris:** 所以我们每周多次召开站立会议。状态如何？我们取得了哪些进展？

让我们向外报告。向高管发送我们取得的进展信息，等等。如果需要的话，寻求更多帮助。而在一个周末，我们运行了一次长时间实验后，发现了一个新问题。

**Adam:** 这个时候找到新问题实在是一个坏时机，因为一个指哪打哪团队的经理，我们就叫他戴夫吧，刚刚接管了事件响应。

**Chris:** 他来了，拉来了一群其他人，虽然这些人都很好，但显然是一种明显的情况：我不相信你能解决这个问题，我也不相信你的任何答案，所以我要拉来这些其他人来取代你，这本身就很令人沮丧。

**Adam:** 这就是吉姆陷入事件电话会议的中心，事情只会越来越糟。

**克里斯：** 为什么代码审查不能解决这个问题？这是吉姆的直接引用。我的回答是，因为它没能解决，并且以后也不会，因为人们会犯错误，只能做得更好。再次强调，这并不是一个答案，因为当轮到一位初级工程师时，他们认为，嗯，这似乎合理，而这个PR是由一位非常资深的SRE提交的。

我为什么要质疑那个值是否合理？像是，嗯，有一堆盒子，看起来没问题。这类事情总是发生。对于工程系统的这个问题，我经常思考的一件事是，我们的系统只是工作还是这个过程只是成功，或者这个工具只是成功？

如果我表现得像一位高级工程师，就算是他或她最好的一天，或者如果我是一个超级初级工程师，在遇到糟糕的一天时，我们真的希望我们的系统对后者也是可用的。这有助于我们所有人，因为有时候，即使我是一位非常资深的工程师，我也会有糟糕的一天。

有时候我的大脑感觉就像根本没有在工作。在那些日子里，系统是否还支持我，还是会惩罚我？我真的不想被惩罚。

## **压力增大**

**亚当：** 事件在推进，但压力在增加，克里斯觉得这个团队并没有理解问题的范围，也没有欣赏他的考虑周到的方法。

**克里斯：** “为什么这个问题不能解决？”

“高管们对进展速度不满意”

而且问题在于，你们有七年的技术债务积压和缺乏韧性，我们正在努力修复它们，如果需要三个月来弥补七年的疏忽，我觉得其实并不算太糟糕，这是我对此的看法。我记得曾告诉我的老板，那是我在任何工作中最愤怒的时刻，当那个手势枪的经理进来告诉我，我做得不够好，因为修复这些根深蒂固的问题花了一些时间。这真的加剧了我对他们其他提议的感受，他们对这个规模的工程问题的严肃性缺乏认识，认为这些问题解决起来并不容易。

我们有无数个内存泄漏问题要解决，而且由于这个特定的内存泄漏问题的形状，它们都是对同一个核心对象的引用。因此，你可以修复其中一个，但这并不会改变系统的行为。我感到非常沮丧。而且在背景下，这也启动了备选计划的实验，所有人都认同并且认为这会奏效。

一群工程师们会说，“但是‘那个’呢”。不，你不可以问，“但是‘那个’呢”。

## **重组**

**克里斯：** 大约在同一时间，他的团队在一次重组中敌意接管了我的团队。那真是一件事情。

**亚当：** 噢，他现在是你的经理？

**Chris:** 是的，他是我老板的老板的一种情况，所以不是我的直接经理，这点很好，因为说实话，如果是我的直接经理，我可能会当场辞职，我们处于这样一种状态，让我们可以看到，你知道，有时候人们换了一个不同的角色，他们最终学到了很多新的东西。

## **反思挫折**

**Adam:** 也许这对大家都是最好的结果，对吧？克里斯是一个反思深思的人。他可以对自己说，也许我可以从这位新的跳级经理的业务关注中学到些什么。他知道这是他需要改进的地方。

**Chris:** 我之前说的问题确实是真正存在的问题。我认为领英的一些人确实欣赏这些改进，并且我认为这确实对使用领英的人们产生了影响。但在任何特定时刻，这些都不是业务领导最关注的事情。

我认为这种解耦是我们最终走向非常不同位置的一个重要原因，也是使得沟通这些事情的价值变得困难的原因之一。

**Adam:** 当克里斯进入这种更反思的状态时，他意识到自己在建立关系方面有些弱点。我很多同事都与那些也许我难以建立联系或者搞清楚如何与之合作的人有着个人关系，因为他们在自助餐厅见过他们。

具体来说，克里斯正在想起吉姆。

**Chris:** 我与其他人交流时，他们面对的挑战要少一些。有些事情就是。你知道，特定的工程师与我们工程部门的交流方式，这些确实有些挑战，但有些人与他们有非常良好的工作关系，因为他们最终在自助餐厅坐在了一起。

当你处于某种激烈的技术争论或者其他情况中时，确实有助于与某人共进午餐。或者，或者通过其他方式建立关系，但当你拥有一个真正强大的面对面文化，你的大多数人都是亲自出席的，这种文化会在这些方面显现出来，因为作为一种公司文化，作为一种工程文化，你的规范都是围绕着这些。

是的，我们会在咖啡馆里见面，我们会在走廊上撞见彼此，你知道，人们会讲述在洗手间旁边碰到CEO的故事。对，你知道，这是一种有趣的动态和一个有趣的地方，你在洗手的时候看见CEO在洗手。

我可以看到，与那些最终成为工程高级副总裁或首席工程师之类的人有持续的身体接触，你只需了解那些人。

**Adam:** 这提出了另一个问题。

我们一直关注这种技术冲突，速度与可持续性的对立，但也许更多的是社会问题。在压力下，人们可能只是没有倾听彼此。我的意思是，我们只听到克里斯的一面之词。也许这完全是一个社会问题。

**克里斯：** Charity Majors在最近的一篇文章中有一个很棒的引用，她说：“在足够高级的工程师或经理层面上，不存在纯粹的社会问题或纯粹的技术问题。”

它们都是社会技术问题，你必须能够识别这个问题的障碍在哪里。是社会方面的问题，还是技术方面的问题，或者通常两者兼而有之，比例是多少，我需要做些什么来解决这个问题？

**亚当：** 是啊。

**亚当：** 所以也许两者都是。无论如何，从事件中退后一步，克里斯发现“Fingergun”的计划正在取得进展。它正在获得关注。而且它的范围也在扩大。现在，这已经涉及重写移动和桌面应用程序。

**克里斯：** “我们将重新思考如何构建LinkedIn所有产品的一切”，这很令人兴奋。这其中确实有一些非常有趣的部分。而且用一种方式来说，你可以说我和我的经理及我的团队输了。这不是虚假描述。

但好吧，我的提议失败了。无所谓。反正我也不太喜欢那个。我们能不能把你的版本做好？哦，你甚至不想听到任何让你觉得这个事情除了热情外还有别的问题的问题。而我说，我想让它变得很棒，但我们必须解决这些问题，哦，你甚至不想听到这些。

好的。嗯，我可以一直碰这堵墙。我曾经和那位经理谈过，他的话里明确地告诉我：“你太理想主义了。你不够关心底线。你应该改变你的价值观。”而我说，不，不行，这事不会这么办的，伙计。哦，在外面我做政治上的。

我理解这个观点。我明白你的立场。而在我内心深处，头脑中的开关在转动，警报正在四周响起，告诉我“不，不，不，警告，警报正在响”。

**亚当：** 克里斯认为他们对速度的需求使他们对真正的问题视而不见。

## **速度有成本**

**克里斯：** 我们在代码库中遇到的许多问题，直接是对速度的过高评估的直接结果，拒绝停下来说：“这里的这条次要路径不起作用。让我们修复它或者让我们抛弃它。”

任何一种都是好选择，但拒绝这样做，并不断地知道我们必须发布下一个功能，我们有多快能发布它？当速度成为主要或主导价值，其他一切都为之服务时，它会让你陷入一个境地，也许最初速度不错，但难以持续。

实际上，这是代码库随着时间推移的经典模式，如果你不持续投资它们，而是不断扩展它们，最终你就会陷入和我们当初一样的困境。而我看到被提出来的东西全都是关于最大化速度的，根本没有提到如何处理这些其他问题。

我一直在思考这个问题，我尽力公正地给予它一次公平的机会，这里有一些有趣的想法。这里有一些有趣的技术方向，但我也记得为什么我离开了我的前一份工作，那最终是一次非常严重的倦怠症。我有着可怕的偏头痛和生命中最严重的胃痛，无法运动，随机发作的哭泣，惊恐发作。那是一个糟糕的时期。

我不建议倦怠。这并不好玩。

如果我留在这条路上，我知道它的终点，那是个糟糕的地方，我不想再次陷入那里。我可以选择留在一个我不断努力不生气的世界，因为你知道，我在那些时候尽力不生气。但是当你每天都在面对的问题让你不得不努力不去生气时，工作就变得一点也不有趣，可以说至少是如此。

我可以试着用我的小船来转动这艘泰坦尼克号，并因为失败而生气。但这不会奏效，就像用桨子推它，无法转动泰坦尼克号。

或者我可以说，“我只是要朝那边划船。” 泰坦尼克号的比喻意味着我认为他们正在驶向冰山。我主要指的是事物的规模，而不是它的冰山一面。我希望他们不要撞上冰山。那将是很悲伤的。你知道，迪士尼的游轮。我不会用一只划船和桨子来转动迪士尼的游轮。

因此我没有选择。我说，我学到了很多。现在我对于在一个三百万行代码的应用上工作，现在我可以去做其他事情，而不会倦怠，也不会每天对我的工作感到愤怒或者每天都在与愤怒抗争。

我不会把生命的年华花费在我最终不相信的方式和事物上。

生命太短暂了。那将是一种浪费。好吧，这很糟糕，但我想是时候离开了。并不是出于恶意或怨恨，而只是说我们选择了不同的方向。

或许这个特定角落的LinkedIn所接受的价值观在道德上并不令人反感。

但它们不是我的价值观。

## **结尾**

**亚当：** 那就是这个节目。谢谢你，克里斯，如此坦诚地分享。我觉得像这样的故事在不同的地方随时都在上演。这些社会技术问题，人们在如何解决事物的正确方式上撞车。

但它们从未被广泛传播到外界。因此，感谢克里斯分享。在撰写本文时，克里斯正在寻找工作。你可以在ChrisKrycho.com上找到更多信息。我会在节目笔记中放置一个链接。听到克里斯正在寻找与他的个人价值观一致的角色，这一点应该不会让你感到意外。

这是我们聊天的一个重要收获。你需要与你的团队和组织就重要事项达成一致。有时候这些事情会变化，你只需要去适应。但具体来说，克里斯正在寻找一个可以帮助推动工程卓越的角色。他非常热衷于找到方法来改进软件开发。

他在整个博客文章中详细介绍了这一点，以及他所称之为的"Ratchets"。你应该在他的网站上查看。如果你喜欢这个播客，并且一直听到这里，那么除非你是在讨厌听或其他原因，我认为你确实喜欢。

如果你想支持这个播客并持续它的运作，你能做的最好的事情就是访问[CoRecursive.com/supporters](https://CoRecursive.com/supporters)。你知道的，除了个人以外，这个播客没有任何赞助商。在节目笔记中有链接。你可以加入作为播客的支持者，你将获得额外的剧集和加入社区的机会。

再见，感谢你的聆听。
