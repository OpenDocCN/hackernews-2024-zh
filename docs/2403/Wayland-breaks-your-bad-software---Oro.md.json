["```\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n\n```", "```\ndiff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_display.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_display.c\nindex b702f499f5fb..d5ae05f57054 100644\n--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_display.c\n+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_display.c\n@@ -213,6 +213,13 @@ int amdgpu_display_crtc_page_flip_target(struct drm_crtc *crtc,\n        work->crtc_id = amdgpu_crtc->crtc_id;\n        work->async = (page_flip_flags & DRM_MODE_PAGE_FLIP_ASYNC) != 0;\n\n+       if (crtc->primary->fb == fb) {\n+               adev->mode_info.funcs->page_flip(adev, work->crtc_id, work->base, true);\n+               kfree(work->shared);\n+               kfree(work);\n+               return 0;\n+       }\n+\n        /* schedule unpin of the old buffer */\n        obj = crtc->primary->fb->obj[0];\n\n```"]