- en: <!--yml
  id: totrans-split-0
  prefs: []
  type: TYPE_NORMAL
  zh: <!--yml
- en: 'category: æœªåˆ†ç±»'
  id: totrans-split-1
  prefs: []
  type: TYPE_NORMAL
  zh: 'category: æœªåˆ†ç±»'
- en: 'date: 2024-05-27 14:35:09'
  id: totrans-split-2
  prefs: []
  type: TYPE_NORMAL
  zh: 'date: 2024-05-27 14:35:09'
- en: -->
  id: totrans-split-3
  prefs: []
  type: TYPE_NORMAL
  zh: -->
- en: Git Worktrees and GitButler
  id: totrans-split-4
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Gitå·¥ä½œæ ‘å’ŒGitButler
- en: æ¥æºï¼š[https://blog.gitbutler.com/git-worktrees/](https://blog.gitbutler.com/git-worktrees/)
  id: totrans-split-5
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: æ¥æºï¼š[https://blog.gitbutler.com/git-worktrees/](https://blog.gitbutler.com/git-worktrees/)
- en: Last week, I gave a talk at DevWorld with more "[So You Think You Know Git](https://blog.gitbutler.com/git-tips-and-tricks/)"
    style tips. One of the things I covered in this new talk was `git worktree` and
    since I've heard it mentioned a lot lately, I thought it was time to do a little
    writeup explaining it.
  id: totrans-split-6
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸Šå‘¨ï¼Œæˆ‘åœ¨DevWorldä¸Šåšäº†ä¸€ä¸ªæ¼”è®²ï¼Œæ¶‰åŠæ›´å¤šç±»ä¼¼"[ä½ ä»¥ä¸ºä½ äº†è§£Git](https://blog.gitbutler.com/git-tips-and-tricks/)"é£æ ¼çš„æŠ€å·§ã€‚åœ¨è¿™ä¸ªæ–°æ¼”è®²ä¸­ï¼Œæˆ‘æ¶µç›–äº†`git
    worktree`çš„å†…å®¹ï¼Œå› ä¸ºæœ€è¿‘å¬åˆ°å®ƒè¢«æåˆ°å¾ˆå¤šæ¬¡ï¼Œæˆ‘æƒ³æ˜¯æ—¶å€™å†™ä¸€ç¯‡å°æ–‡ç« æ¥è§£é‡Šä¸€ä¸‹äº†ã€‚
- en: The "[worktree](https://git-scm.com/docs/git-worktree?ref=blog.gitbutler.com)"
    tool in Git helps you work on multiple branches at the same time.
  id: totrans-split-7
  prefs: []
  type: TYPE_NORMAL
  zh: '"[å·¥ä½œæ ‘](https://git-scm.com/docs/git-worktree?ref=blog.gitbutler.com)"å·¥å…·åœ¨Gitä¸­å¸®åŠ©ä½ åŒæ—¶å¤„ç†å¤šä¸ªåˆ†æ”¯ã€‚'
- en: Since GitButler solves the same basic problem, I'll take a minute to explain
    what `git worktree` does for those who haven't heard of it, and then also to compare
    it to how GitButler solves the same core issue.
  id: totrans-split-8
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äºGitButlerè§£å†³äº†ç›¸åŒçš„åŸºæœ¬é—®é¢˜ï¼Œæˆ‘å°†èŠ±ä¸€åˆ†é’Ÿè§£é‡Š`git worktree`å¯¹äºé‚£äº›æ²¡æœ‰å¬è¯´è¿‡å®ƒçš„äººæ„å‘³ç€ä»€ä¹ˆï¼Œç„¶åè¿˜è¦æ¯”è¾ƒä¸€ä¸‹GitButlerå¦‚ä½•è§£å†³ç›¸åŒçš„æ ¸å¿ƒé—®é¢˜ã€‚
- en: Simultaneous Branches
  id: totrans-split-9
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: åŒæ—¶å¤„ç†åˆ†æ”¯
- en: So, what is the core issue here? Basically, it's trying to do work on two topics
    in your code at the same time.
  id: totrans-split-10
  prefs: []
  type: TYPE_NORMAL
  zh: æ‰€ä»¥ï¼Œè¿™é‡Œçš„æ ¸å¿ƒé—®é¢˜æ˜¯ä»€ä¹ˆï¼ŸåŸºæœ¬ä¸Šï¼Œå°±æ˜¯è¯•å›¾åŒæ—¶å¤„ç†ä»£ç ä¸­çš„ä¸¤ä¸ªä¸»é¢˜ã€‚
- en: Let's take an example. Let's say you are working on a feature. Your boss interrupts
    you (ğŸ™„, bosses, right?) and says "we need this bug fixed". Or maybe you just notice
    the bug as you're working. Whatever it is, you need to switch contexts while in
    the middle of something.
  id: totrans-split-11
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬ä¸¾ä¸ªä¾‹å­ã€‚æ¯”å¦‚è¯´ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªåŠŸèƒ½ã€‚ä½ çš„è€æ¿æ‰“æ–­ä½ ï¼ˆğŸ™„ï¼Œè€æ¿ï¼Œå¯¹å§ï¼Ÿï¼‰å¹¶è¯´â€œæˆ‘ä»¬éœ€è¦ä¿®å¤è¿™ä¸ªbugâ€ã€‚æˆ–è€…å¯èƒ½æ˜¯åœ¨å·¥ä½œæ—¶æ³¨æ„åˆ°äº†bugã€‚æ— è®ºå¦‚ä½•ï¼Œä½ éœ€è¦åœ¨è¿›è¡ŒæŸäº‹çš„è¿‡ç¨‹ä¸­åˆ‡æ¢ä¸Šä¸‹æ–‡ã€‚
- en: Now you have a few options.
  id: totrans-split-12
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ä½ æœ‰å‡ ä¸ªé€‰æ‹©ã€‚
- en: You can fix the bug and commit it into your feature branch and try to get them
    both deployed together.
  id: totrans-split-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä½ å¯ä»¥ä¿®å¤bugå¹¶å°†å…¶æäº¤åˆ°ä½ çš„åŠŸèƒ½åˆ†æ”¯ï¼Œç„¶åå°è¯•ä¸€èµ·éƒ¨ç½²å®ƒä»¬ã€‚
- en: You can stash everything, create a new branch, switch to it, fix the bug, commit
    and push it, then switch back to what you were working on.
  id: totrans-split-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä½ å¯ä»¥æŠŠæ‰€æœ‰å†…å®¹è—èµ·æ¥ï¼Œåˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œåˆ‡æ¢åˆ°å®ƒï¼Œä¿®å¤bugï¼Œæäº¤å¹¶æ¨é€ï¼Œç„¶ååˆ‡æ¢å›ä½ ä¹‹å‰æ­£åœ¨å·¥ä½œçš„å†…å®¹ã€‚
- en: You *could* locally clone the repository to a new directory and work on the
    other branch there, then push it back into the main one and then push *from there*
    back upstream. ğŸ™„
  id: totrans-split-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä½ *å¯ä»¥*åœ¨æœ¬åœ°å…‹éš†ä»“åº“åˆ°ä¸€ä¸ªæ–°ç›®å½•ä¸­ï¼Œåœ¨é‚£é‡Œå¤„ç†å¦ä¸€ä¸ªåˆ†æ”¯ï¼Œç„¶åå°†å…¶æ¨é€å›ä¸»åˆ†æ”¯ï¼Œå†ä»*é‚£é‡Œ*å‘ä¸Šæ¸¸æ¨é€ã€‚ ğŸ™„
- en: Surely there's a better way!
  id: totrans-split-16
  prefs: []
  type: TYPE_NORMAL
  zh: è‚¯å®šæœ‰æ›´å¥½çš„æ–¹æ³•ï¼
- en: Worktrees
  id: totrans-split-17
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Worktrees
- en: This is the basic use case for `git worktree`. Worktrees allow you to have a
    separate working directory (and staging area) for each branch you're actively
    working on.
  id: totrans-split-18
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯`git worktree`çš„åŸºæœ¬ç”¨ä¾‹ã€‚å·¥ä½œæ ‘å…è®¸ä½ ä¸ºæ¯ä¸ªæ­£åœ¨ç§¯æå·¥ä½œçš„åˆ†æ”¯æ‹¥æœ‰å•ç‹¬çš„å·¥ä½œç›®å½•ï¼ˆå’Œæš‚å­˜åŒºï¼‰ã€‚
- en: Let's say we're working on our project in the `my-project` directory and we
    decide that we want to work on a new branch called `bugfix-123`. We can run the
    `git worktree add` command and give it a directory to create and checkout that
    branch into.
  id: totrans-split-19
  prefs: []
  type: TYPE_NORMAL
  zh: å‡è®¾æˆ‘ä»¬æ­£åœ¨`my-project`ç›®å½•ä¸­è¿›è¡Œé¡¹ç›®å·¥ä½œï¼Œå¹¶å†³å®šè¦åˆ›å»ºä¸€ä¸ªåä¸º`bugfix-123`çš„æ–°åˆ†æ”¯ã€‚æˆ‘ä»¬å¯ä»¥è¿è¡Œ`git worktree add`å‘½ä»¤ï¼Œå¹¶æä¾›ä¸€ä¸ªç›®å½•æ¥åˆ›å»ºå¹¶æ£€å‡ºè¯¥åˆ†æ”¯ã€‚
- en: '[PRE0]'
  id: totrans-split-20
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Now we have two directories that are linked. When we edit files in the `my-project-branches/bugfix-123`
    directory, it's on the `bugfix-123` branch.
  id: totrans-split-21
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬æœ‰ä¸¤ä¸ªé“¾æ¥çš„ç›®å½•ã€‚å½“æˆ‘ä»¬åœ¨`my-project-branches/bugfix-123`ç›®å½•ä¸­ç¼–è¾‘æ–‡ä»¶æ—¶ï¼Œå®ƒä½äº`bugfix-123`åˆ†æ”¯ä¸Šã€‚
- en: Now, the cool thing is that both checkouts share the same core Git database.
    So if we commit in either of them, those commits on those branches are visible
    by *all* of them.
  id: totrans-split-22
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ï¼Œå¾ˆé…·çš„ä¸€ç‚¹æ˜¯ï¼Œè¿™ä¸¤ä¸ªæ£€å‡ºéƒ½å…±äº«åŒä¸€ä¸ªæ ¸å¿ƒGitæ•°æ®åº“ã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬åœ¨å…¶ä¸­ä»»ä½•ä¸€ä¸ªä¸­æäº¤ï¼Œè¿™äº›åˆ†æ”¯ä¸Šçš„æäº¤å¯¹*æ‰€æœ‰*éƒ½å¯è§ã€‚
- en: '[PRE1]'
  id: totrans-split-23
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'This can work for lots of branches, and `git worktree` remembers where they
    all are for your project and what branches they''re all currently on:'
  id: totrans-split-24
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™å¯¹è®¸å¤šåˆ†æ”¯éƒ½é€‚ç”¨ï¼Œè€Œ`git worktree`ä¼šè®°ä½ä½ é¡¹ç›®ä¸­å®ƒä»¬çš„æ‰€æœ‰ä½ç½®åŠå…¶å½“å‰æ‰€åœ¨çš„åˆ†æ”¯ï¼š
- en: '[PRE2]'
  id: totrans-split-25
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: You can remove ones you're not using anymore with `git worktree remove` or you
    can also just delete the directory and run `git worktree prune` to remove it from
    the list.
  id: totrans-split-26
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ å¯ä»¥ä½¿ç”¨`git worktree remove`åˆ é™¤ä½ ä¸å†ä½¿ç”¨çš„å·¥ä½œæ ‘ï¼Œæˆ–è€…ä½ ä¹Ÿå¯ä»¥åªåˆ é™¤ç›®å½•å¹¶è¿è¡Œ`git worktree prune`æ¥å°†å…¶ä»åˆ—è¡¨ä¸­åˆ é™¤ã€‚
- en: '[PRE3]'
  id: totrans-split-27
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Now, there are some downsides to this approach too.
  id: totrans-split-28
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ï¼Œè¿™ç§æ–¹æ³•ä¹Ÿæœ‰ä¸€äº›ç¼ºç‚¹ã€‚
- en: If you're using an editor like VS Code, you need a new window for each directory/branch.
  id: totrans-split-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å¦‚æœä½ æ­£åœ¨ä½¿ç”¨åƒVS Codeè¿™æ ·çš„ç¼–è¾‘å™¨ï¼Œä½ éœ€è¦ä¸ºæ¯ä¸ªç›®å½•/åˆ†æ”¯æ‰“å¼€ä¸€ä¸ªæ–°çª—å£ã€‚
- en: If you have any ignored files like build artifacts, you have to rebuild them
    for each worktree. This is less of an issue when you're just stashing or switching
    branches in one directory.
  id: totrans-split-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å¦‚æœæ‚¨æœ‰ä»»ä½•è¢«å¿½ç•¥çš„æ–‡ä»¶ï¼Œå¦‚æ„å»ºäº§ç‰©ï¼Œæ‚¨å¿…é¡»ä¸ºæ¯ä¸ªå·¥ä½œæ ‘é‡æ–°æ„å»ºå®ƒä»¬ã€‚å½“æ‚¨ä»…åœ¨ä¸€ä¸ªç›®å½•ä¸­è¿›è¡Œå­˜å‚¨æˆ–åˆ‡æ¢åˆ†æ”¯æ—¶ï¼Œè¿™å°±ä¸æ˜¯é—®é¢˜ã€‚
- en: The worktrees are separate, so you can easily create merge conflicts between
    them without knowing.
  id: totrans-split-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å·¥ä½œæ ‘æ˜¯åˆ†å¼€çš„ï¼Œå› æ­¤æ‚¨å¯ä»¥åœ¨å®ƒä»¬ä¹‹é—´è½»æ¾åœ°åˆ›å»ºåˆå¹¶å†²çªï¼Œè€Œæ— éœ€çŸ¥é“å…·ä½“æƒ…å†µã€‚
- en: However, in some cases, worktrees can be a nice way to give yourself a new place
    to work in a new context without messing up the context you're currently in.
  id: totrans-split-32
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶è€Œï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå·¥ä½œæ ‘å¯èƒ½æ˜¯ä¸€ç§ä¸é”™çš„æ–¹å¼ï¼Œè®©æ‚¨åœ¨ä¸æ··æ·†å½“å‰ä¸Šä¸‹æ–‡çš„æƒ…å†µä¸‹åœ¨æ–°ä¸Šä¸‹æ–‡ä¸­å·¥ä½œã€‚
- en: GitButler vs Worktrees
  id: totrans-split-33
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: GitButler vs Worktrees
- en: So how is this different from GitButler's virtual branches? They also provide
    a way for you to work on multiple branches at the same time, right?
  id: totrans-split-34
  prefs: []
  type: TYPE_NORMAL
  zh: é‚£ä¹ˆè¿™ä¸ GitButler çš„è™šæ‹Ÿåˆ†æ”¯æœ‰ä»€ä¹ˆä¸åŒï¼Ÿå®ƒä»¬ä¹Ÿæä¾›äº†ä¸€ç§åŒæ—¶åœ¨å¤šä¸ªåˆ†æ”¯ä¸Šå·¥ä½œçš„æ–¹å¼ï¼Œå¯¹å§ï¼Ÿ
- en: Well, the big difference is that virtual branches use a *single* working directory
    for *all* the branches.
  id: totrans-split-35
  prefs: []
  type: TYPE_NORMAL
  zh: å—¯ï¼Œä¸»è¦çš„åŒºåˆ«åœ¨äºè™šæ‹Ÿåˆ†æ”¯ä½¿ç”¨*å•ä¸€*å·¥ä½œç›®å½•æ¥å¤„ç†*æ‰€æœ‰*åˆ†æ”¯ã€‚
- en: Let's take a very simple example. Let's say we want to add translations of our
    README into Spanish and French and we want to open a Pull Request for each one
    to be reviewed by different people at possibly different times.
  id: totrans-split-36
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬ä¸¾ä¸€ä¸ªéå¸¸ç®€å•çš„ä¾‹å­ã€‚å‡è®¾æˆ‘ä»¬è¦ä¸ºæˆ‘ä»¬çš„ README æ·»åŠ è¥¿ç­ç‰™è¯­å’Œæ³•è¯­çš„ç¿»è¯‘ï¼Œå¹¶ä¸”æˆ‘ä»¬å¸Œæœ›ä¸ºæ¯ä¸€ç§è¯­è¨€æ‰“å¼€ä¸€ä¸ª PRï¼Œä»¥ä¾¿ç”±ä¸åŒçš„äººåœ¨å¯èƒ½ä¸åŒçš„æ—¶é—´è¿›è¡Œå®¡æŸ¥ã€‚
- en: How to do this in Worktrees
  id: totrans-split-37
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: å¦‚ä½•åœ¨ Worktrees ä¸­æ“ä½œ
- en: With worktrees, we could open a new worktree for each one, commit in each and
    push up.
  id: totrans-split-38
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨å·¥ä½œæ ‘ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºæ¯ä¸ªæ–°å»ºä¸€ä¸ªå·¥ä½œæ ‘ï¼Œç„¶ååœ¨æ¯ä¸ªå·¥ä½œæ ‘ä¸­è¿›è¡Œæäº¤å¹¶æ¨é€ã€‚
- en: First, we create the two new worktrees.
  id: totrans-split-39
  prefs: []
  type: TYPE_NORMAL
  zh: é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºä¸¤ä¸ªæ–°çš„å·¥ä½œæ ‘ã€‚
- en: '[PRE4]'
  id: totrans-split-40
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Now, we go into each directory, make the changes and commit them.
  id: totrans-split-41
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ï¼Œæˆ‘ä»¬è¿›å…¥æ¯ä¸ªç›®å½•ï¼Œè¿›è¡Œæ›´æ”¹å¹¶æäº¤å®ƒä»¬ã€‚
- en: '[PRE5]'
  id: totrans-split-42
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Now if we go back to our main directory, we can see both branches there and
    can create PRs from them.
  id: totrans-split-43
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨å¦‚æœæˆ‘ä»¬å›åˆ°ä¸»ç›®å½•ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é‚£é‡Œæœ‰ä¸¤ä¸ªåˆ†æ”¯ï¼Œå¹¶ä¸”å¯ä»¥ä»ä¸­åˆ›å»º PRã€‚
- en: '[PRE6]'
  id: totrans-split-44
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: How to do this in GitButler
  id: totrans-split-45
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: å¦‚ä½•åœ¨ GitButler ä¸­è¿›è¡Œæ“ä½œ
- en: In GitButler, it's much simpler. You can simply edit both files, then drag them
    into separate branch lanes, commit and push them at the same time.
  id: totrans-split-46
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ GitButler ä¸­ï¼Œè¿™ç®€å•å¾—å¤šã€‚æ‚¨å¯ä»¥ç®€å•åœ°ç¼–è¾‘ä¸¤ä¸ªæ–‡ä»¶ï¼Œç„¶åå°†å®ƒä»¬æ‹–æ”¾åˆ°ä¸åŒçš„åˆ†æ”¯é€šé“ä¸­ï¼ŒåŒæ—¶æäº¤å’Œæ¨é€å®ƒä»¬ã€‚
- en: 'Let''s say we just edit the files:'
  id: totrans-split-47
  prefs: []
  type: TYPE_NORMAL
  zh: å‡è®¾æˆ‘ä»¬åªæ˜¯ç¼–è¾‘è¿™äº›æ–‡ä»¶ï¼š
- en: '[PRE7]'
  id: totrans-split-48
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Then we go to our GitButler UI and we see that an anonymous virtual branch has
    been automatically created, because it saw new changes. We can just drag one of
    the files into a new virtual branch lane, then commit and push both at the same
    time.
  id: totrans-split-49
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶åæˆ‘ä»¬è½¬åˆ° GitButler UIï¼Œçœ‹åˆ°å·²è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªåŒ¿åè™šæ‹Ÿåˆ†æ”¯ï¼Œå› ä¸ºå®ƒæ£€æµ‹åˆ°äº†æ–°çš„æ›´æ”¹ã€‚æˆ‘ä»¬å¯ä»¥å°†å…¶ä¸­ä¸€ä¸ªæ–‡ä»¶æ‹–æ”¾åˆ°ä¸€ä¸ªæ–°çš„è™šæ‹Ÿåˆ†æ”¯é€šé“ä¸­ï¼Œç„¶ååŒæ—¶æäº¤å’Œæ¨é€ä¸¤ä¸ªæ–‡ä»¶ã€‚
- en: Notice how much less friction this is. You don't have to create new branches
    or switch directories. It's a much faster and smoother way to handle this type
    of change management.
  id: totrans-split-50
  prefs: []
  type: TYPE_NORMAL
  zh: æ³¨æ„çœ‹è¿™é‡Œçš„æ‘©æ“¦åŠ›è¦å°‘å¾—å¤šã€‚æ‚¨ä¸å¿…åˆ›å»ºæ–°åˆ†æ”¯æˆ–åˆ‡æ¢ç›®å½•ã€‚è¿™æ˜¯å¤„ç†è¿™ç§ç±»å‹å˜æ›´ç®¡ç†çš„ä¸€ç§æ›´å¿«æ›´é¡ºç•…çš„æ–¹å¼ã€‚
- en: How does this work, exactly?
  id: totrans-split-51
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ç©¶ç«Ÿæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ
- en: In essence, we do a `git diff` to see everything that has been changed and then
    have our own mapping of which changes are owned by which branch. Then when you
    hit the "commit" button, we run a sort of `git apply` of those changes to what
    you started with.
  id: totrans-split-52
  prefs: []
  type: TYPE_NORMAL
  zh: æœ¬è´¨ä¸Šï¼Œæˆ‘ä»¬æ‰§è¡Œ `git diff` æŸ¥çœ‹æ‰€æœ‰å·²æ›´æ”¹çš„å†…å®¹ï¼Œç„¶åæˆ‘ä»¬æœ‰è‡ªå·±çš„æ˜ å°„æ¥ç¡®å®šå“ªäº›æ›´æ”¹å±äºå“ªä¸ªåˆ†æ”¯ã€‚ç„¶åå½“æ‚¨ç‚¹å‡»â€œæäº¤â€æŒ‰é’®æ—¶ï¼Œæˆ‘ä»¬å¯¹æ‚¨å¼€å§‹çš„å†…å®¹è¿è¡Œä¸€ç§
    `git apply` ç±»å‹çš„åº”ç”¨ã€‚
- en: It's *sort of* like what `git add -p` does, except that we can keep doing it
    over and over and keep things separate.
  id: totrans-split-53
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æœ‰ç‚¹åƒ `git add -p` æ‰€åšçš„ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥ä¸€éåˆä¸€éåœ°åšï¼Œä¿æŒäº‹ç‰©åˆ†å¼€ã€‚
- en: For instance, with the normal Git tooling, we could just add one of the READMEs
    here and commit and push that, but then doing the same for the second file would
    require us to reset and then add the other and then change the active branch and
    commit, etc. It's not simple.
  id: totrans-split-54
  prefs: []
  type: TYPE_NORMAL
  zh: ä¾‹å¦‚ï¼Œä½¿ç”¨æ­£å¸¸çš„ Git å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ ä¸€ä¸ª README å¹¶æäº¤å’Œæ¨é€ï¼Œä½†æ˜¯ä¸ºäº†ç¬¬äºŒä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦é‡ç½®ç„¶åæ·»åŠ å¦ä¸€ä¸ªï¼Œç„¶åæ›´æ”¹æ´»åŠ¨åˆ†æ”¯å¹¶æäº¤ç­‰ç­‰ã€‚è¿™å¹¶ä¸ç®€å•ã€‚
- en: One Working Directory to Rule them All
  id: totrans-split-55
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªå·¥ä½œç›®å½•ç»Ÿæ²»å®ƒä»¬æ‰€æœ‰
- en: So, there are advantages and disadvantages to both approaches, depending on
    what you want to do.
  id: totrans-split-56
  prefs: []
  type: TYPE_NORMAL
  zh: å› æ­¤ï¼Œæ ¹æ®æ‚¨æƒ³è¦åšä»€ä¹ˆï¼Œè¿™ä¸¤ç§æ–¹æ³•å„æœ‰ä¼˜ç¼ºç‚¹ã€‚
- en: Since GitButler only has a single working directory, you *cannot* have two branches
    applied that have conflicting work. You can't have conflicts if you have one copy
    of each file.
  id: totrans-split-57
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äº GitButler åªæœ‰ä¸€ä¸ªå•ä¸€çš„å·¥ä½œç›®å½•ï¼Œæ‚¨*æ— æ³•*åº”ç”¨å…·æœ‰å†²çªå·¥ä½œçš„ä¸¤ä¸ªåˆ†æ”¯ã€‚å¦‚æœæ¯ä¸ªæ–‡ä»¶åªæœ‰ä¸€ä»½å‰¯æœ¬ï¼Œæ‚¨å°±ä¸ä¼šæœ‰å†²çªã€‚
- en: This could be seen as an advantage or a limitation, but we find that it's quite
    nice. Essentially you're starting with the merged product and then extracting
    branches out of it.
  id: totrans-split-58
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™å¯èƒ½è¢«è§†ä¸ºä¼˜åŠ¿æˆ–å±€é™ï¼Œä½†æˆ‘ä»¬å‘ç°å®ƒç›¸å½“ä¸é”™ã€‚åŸºæœ¬ä¸Šï¼Œä½ ä»åˆå¹¶åçš„äº§å“å¼€å§‹ï¼Œç„¶åä»ä¸­æå–åˆ†æ”¯ã€‚
- en: For instance, lets say that both the `french` and the `spanish` branches are
    eventually merged. It doesn't matter what order they're merged in, we know they
    will not only merge cleanly, but we know that when they do both get merged, what
    we'll end up with is the state of the working directory *when we started*.
  id: totrans-split-59
  prefs: []
  type: TYPE_NORMAL
  zh: ä¾‹å¦‚ï¼Œå‡è®¾`french`å’Œ`spanish`åˆ†æ”¯æœ€ç»ˆè¢«åˆå¹¶ã€‚åˆå¹¶çš„é¡ºåºæ— å…³ç´§è¦ï¼Œæˆ‘ä»¬çŸ¥é“å®ƒä»¬ä¸ä»…ä¼šå¹²å‡€åœ°åˆå¹¶ï¼Œè€Œä¸”çŸ¥é“å®ƒä»¬åˆå¹¶åï¼Œæˆ‘ä»¬æœ€ç»ˆå¾—åˆ°çš„æ˜¯å¼€å§‹æ—¶å·¥ä½œç›®å½•çš„çŠ¶æ€ã€‚
- en: So, that's how worktrees and virtual branches approach the same basic problem
    in rather different ways. Hope this has been helpful!
  id: totrans-split-60
  prefs: []
  type: TYPE_NORMAL
  zh: å› æ­¤ï¼Œè¿™å°±æ˜¯å·¥ä½œæ ‘å’Œè™šæ‹Ÿåˆ†æ”¯ä»¥ç›¸å½“ä¸åŒæ–¹å¼è§£å†³åŒä¸€åŸºæœ¬é—®é¢˜çš„æ–¹æ³•ã€‚å¸Œæœ›è¿™å¯¹ä½ æœ‰å¸®åŠ©ï¼
