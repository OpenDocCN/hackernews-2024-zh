<!--yml

category: 未分类

date: 2024-05-27 14:51:32

-->

# 40 年的编程经验

> 来源：[https://liw.fi/40/](https://liw.fi/40/)

# 介绍

```
10 PRINT "HELLO"
20 GOTO 10 
```

1984 年 4 月，我父亲为家庭办公室购买了一台[Luxor ABC-802](https://en.wikipedia.org/wiki/ABC_800#ABC_802)电脑，配备了 Z80 CPU、64 千字节的 RAM、80×25 文本模式下的黄底黑字显示屏，或者大约 160×75 像素的图形模式，还有两个软盘驱动器。它的 ROM 中预装了 BASIC，但完全没有游戏可玩。如果我想玩它，就必须学会如何编程，并编写自己的游戏。我学会了 BASIC，并在接下来的几年里学会了 Pascal、C 等。我找到了我的激情。那时我 14 岁，我知道长大后想做什么了。

在学习编程时，我认为真正理解计算机如何工作、编程语言如何工作以及文本编辑器等各种工具的工作原理非常重要。我想要磨练我的技艺，编写尽可能好的代码。但我错了。

这篇文章是我希望在我学会如何编写代码的基础知识之后告诉自己的内容的浓缩。相反，我被告知，无论是亲自还是在杂志文章中，当我二十五岁时，我都已经太老无法作为程序员工作了。我尽可能快地学习尽可能多的算法、数据结构和语言是至关重要的。毕竟，编程是年轻人的游戏，需要每天晚上都能熬夜，比其他任何人都多写更多的代码。但事实证明，这一切都不是真的：青春的一部分，缺乏睡眠的一部分，尤其是性别的一部分。

当我写这篇文章时，离我第一次编写计算机代码已经快四十年了。我通过开发软件维持生计，每天都在编写代码。没有比这更想做的事情了。虽然我不能指出巨大的成功和令人印象深刻的壮举，但我希望在这个行业生存了几十年给了我足够的资格来谈论软件开发。

这篇文章讨论了我在成功构建软件方面所学到的一些东西。这些都是我从自己的经验中学到的；我不是研究员，文中几乎没有引用参考来源，也没有大量证据支持。我基于自己的经验写这篇文章，如果你有不同意见，那也没关系。

我在这篇文章中的目标是让读者思考、研究、学习和思考。我的目标不是告诉读者如何思考，如何思考，事物如何，或者给出有关软件构建过程的每个问题的答案。

# 核心技能

有趣且有意义的软件超出了任何一个人在合理时间内独自构建的能力。这意味着构建软件的基本、关键、核心技能是沟通和合作。

光知道计算机如何工作、如何使用编程语言、知道算法和数据结构，或者如何使用涉及软件构建的各种工具是不够的。你还需要知道如何与他人交流，以了解要构建什么软件，它必须做什么，可以接受多少努力，如何管理工作，以及其他许多事情。你必须知道如何与他人合作，共同构建比你们中任何一个人都更大的东西。如果你和你的团队能做得好，这将比你们的总和更大。团队合作可以起到倍增力量的作用。

这些是难以学习的技能。我发现它们比软件构建中的任何技术部分都更难。

即使在我是唯一参与者的项目中，至少有三个人参与其中：过去的我，现在的我和未来的我。

+   过去的我是一个懒惰和粗心的懒汉，总是留下一团糟。

+   现在的我做出了出色的工作，但必须应对过去的我做的所有愚蠢之事，并且需要安抚未来的我。

+   未来的我是一个自大和固执的势利小人，对他来说，任何事情都永远不够好。

让这三个人能够良好相处以完成任何事情对我来说是一个不断的挑战。我使用我的日志来应对。我在那里记录我做了什么，为什么这样做，以及结果是什么。我尝试写得清楚，即使我感到疲倦或者刚经历了类似《黑衣人》中短期记忆擦除的事情。我还计划明确的迭代，有具体的任务，并使用GTD系统跟踪仍需完成的事项。

# 关于生产力

对于软件开发来说，生产力的定义并不明确：时间容易衡量，但输出并不是。大多数人至少对他们的生产力有一个模糊的概念。然而，有已知的影响生产力的因素——这些通常被忽视。

要做好工作，你需要照顾好自己。你必须睡得好，吃得好。如果你感到疲倦或者压力过大，你会犯错并做出不良决策。这些会导致你做出糟糕的工作。这不是道德问题，但你可能需要自己修复错误。如果你能做好工作，你会更享受生活和工作。

Hillel Wayne谈到了睡眠并提供了相关资源。推荐阅读：

你还需要一个有助于你做好工作的环境。它是安静的吗？有没有干扰？家具舒适，长期使用不会伤害你吗？你是否有访问厕所和茶水等必需品的途径？你能在工作区休息吗？你可以散步吗？散步有助于思考。这只是一个不完整的列表。

此外，你需要以适合自己的方式管理自己和工作。如何做到这一点最好取决于你的身份、偏好和经验，以及你所从事的工作类型。没有一种解决方案能够一直适合所有人。

对我自己而言，我发现应用戴维·艾伦的[完成事项清单](https://gtdfh.liw.fi/)系统效果很好，但无论你做什么，你都需要知道你今天和近期需要达成什么，而且你需要安排事情以便你能一次专注于一件事情。然而，请注意，我部分使用GTD系统是为了知道我可以放松；我并不打算始终保持尽可能高的生产力。

可能值得追踪你所做的事情。反思可以给你一种成就感，并让你看到你所取得的进步。这可以是一种动力和士气提升。

对于计算机来说，多任务处理很好，但你的大脑一次只能思考一件事情，而且上下文切换非常困难。

# 关于治理

当一个团体合作时，他们需要早期建立的一件事情是治理：基本上，团体如何做出决策，以及如何改变它们？这些决策涵盖从基本到日常的范围：谁在团体中？是民主、等级制还是其他结构？谁有发言权？团体会喝什么饮料？网站应该使用什么字体？

治理是困难的，但明确治理时会更容易。对责任和权力的不确定性会导致混乱和争吵，这些可能会撕裂一个团体。

所有团体最终都会有冲突。管理和解决分歧通常是管理者的工作，但实际上这是每个人的责任。这需要一些似乎很少教给程序员的技能，这是一种耻辱。

推荐阅读：

# 关于政治和伦理

软件开发始终是一种政治和伦理行为。每当你开发软件时，你必须做出许多决策：

+   软件应该做什么？

+   使用它需要什么资源？

+   它将如何使用？

+   使用它需要什么能力？

+   什么事情会容易做？

+   什么事情会难以做？

+   软件是否会增强其用户的能力，还是迫使他们为了他人的利益而行动？

所有这些决策都有后果，会偏袒某些人而不是其他人。因此，它们具有政治和伦理方面的影响，需要考虑。

例如，如果你制造了一些可以用廉价手机使用的东西，你就能让世界上大多数人都能使用它。如果你使其需要昂贵的硬件，你会排斥许多人，尤其是贫困人口。有时这是不可避免的，并且是你要解决软件问题中固有的问题，但这仍然是一个选择。

对于特定决策可能没有对与错的选择，但总会有后果。你必须考虑它们，并决定它们是否可接受，以及为了谁可接受。

总的来说，你建立的软件将反映一些价值观。确保你知道你同意它们。

推荐阅读：

## 关于伦理和软件自由

自由开源软件是一种道德上正确的软件。软件自由对于那些生活受到计算机使用影响的人们至关重要，无论他们是直接使用计算机，还是其他人使用计算机做对其他人重要的事情。

自1986年以来，我一直在编写自由软件，当时我在BBS上首次阅读了[GNU宣言](https://www.gnu.org/gnu/manifesto.html)。（术语“开源”是其同义词：我不愿意就两者之间的差异进行辩论。）

我的职业生涯很大一部分时间都是在构建开源软件上度过的。我明确偏爱自由开源软件而不是非自由软件，并且有详细的记录。

在过去的三十年里，关于自由开源软件与其他类型软件的伦理以及许可证的具体内容，已经产生了整个图书馆的文本。我不打算在这里总结论点，甚至指出推荐阅读。

我想要明确我的立场，以防读者关心。然而，这篇文章中非常少涉及软件自由的话题，同样适用于非自由软件的发展。

# 关于多样性和质量

人权是根本重要的。善待他人是正确的事情。无论你做什么，这些都是首要任务。如果你不同意这一点，我对你已经失去了希望。

在软件开发的背景下，我发现构建高质量软件最关键的事情是在贡献者中具有思维的多样性。项目中引入更多种类的思维，决策更有可能适用于更多情况、更多人，并处理更多出现的问题。

思维的多样性来自于来自不同背景、过不同生活的不同类型的人们。有时差异在外部是可见的，有时不是。

当你犹豫不决时，选择不同。如果你基于不同于你的人而排斥他们，你可能会做出错误的选择。

多样性并不保证成功。没有什么可以保证成功。然而，单一性确保你得到片面的答案。有时这足够了，但通常不是。

在多样化的环境中，合作和沟通确实可能更具挑战性。不要害怕这一点。把挑战看作是学习的机会，让自己在所做的事情上变得更好。

人们会犯错，你也会犯错。当别人犯错时，以宽容和善良的态度对待是一个好的策略，并期待别人也是如此。惩罚别人的错误只会让你孤单一人。

# 关于维护

在软件行业普遍认为，软件生产的大部分成本发生在初始发布后的所谓维护阶段。初始开发可能需要一两年，而维护将持续几十年。

人们可能会认为这会导致开发实践、架构决策以及其他一切都被优化以降低维护成本。不幸的是，经济和其他激励因素倾向于相反。在大多数公司中，事件视界往往是一个季度，或者最多一整年。现在为了长远节约大量的工作是不可接受的。

即使是个人爱好项目，通常也会有一种强烈的冲动尽快让某些东西运作起来，而不是花时间做事情做得好，但至少这是内在的冲动，而不是外部压力。即便如此，最终结果也是一样的：当发现错误、需求变化或软件需要适应周围系统或生态系统变化时，软件更难以后期修改。

我不是唯一一个看到问题的人。我认为除非经济激励发生根本性变化，否则问题无法解决。这取决于个别开发人员试图在可以的时候秘密地降低维护成本，作为一种先发制人的游击维护。

# 大型项目的重要问题

我发现每个新项目开始时回答一些问题很重要，也很有帮助。答案不必是最终的，随时可以改变：如果你在学到新东西时不调整你的思维，那你就不擅长自己的工作。答案甚至可以是愚蠢的，只要它们是诚实的。关键是让你开始思考这些问题。

+   你为谁构建这个软件？谁的意见很重要？

    这告诉你项目中的一些利益相关者。以后可能会有更多的利益相关者，但这是一个开始。知道利益相关者是谁让你能专注于他们的需求。这有助于使项目成功。

    利益相关者可能是最终用户，也可能是CEO。如果你认为是最终用户，但实际上是CEO，你会做出让CEO不满意的决定，项目将会失败，你也不会理解原因。反之亦然。

+   你为什么要构建这个软件？

    "这是我的工作"可能是一个非常实际的答案。这意味着如果获得金钱的机会减少，你需要重新评估一切。不同的答案可能更多关于激情或使命，这意味着你对变化环境的反应会不同。这里没有错误的答案，但至少对自己要诚实。

+   软件应该在宏观上做什么？同时，又不应该做什么？

    这是关于知道你是否在构建一个文字处理器或电子表格。这不是关于详细的需求或验收标准。

+   软件应该以什么样的方式工作，从宏观上来看？

    再次，从宏观视角来看。你是在制作一个命令行工具、一个网络服务、一个操作系统、一个移动应用程序还是其他什么？硬件的类型和尺寸是什么？

+   什么是重要的，什么只是好有的？

    这涉及到需求和验收标准。你需要了解它们才能构建出好的东西。把它们写下来。还要写下如何验证你是否满足这些标准。

# 规划和估算

超出非常近期未来的详细规划很困难，通常会失败。这包括估算工作需要多长时间。我避免做这样的事情。

规划和估算远非无用，不应忽视。我会规划，也会估算，但在我认为现实可行的范围内。具体来说，我几乎无法制定超过一两周迭代的详细计划。详细计划指的是在能在一个坐位完成的粒度上规划任务。

通常会发生一些令人惊讶的事情，使得超过几周的计划泡汤。可能是管理层改变了优先事项，或者客户改变了主意，或者公司破产或被收购。可能是其他事情，但通常会发生某些事情。如果迭代时间较短，如果所有计划都需要被抛弃，你也不会损失太多。

如果需要改变方向，你也可以更容易地做出反应。

我强调，这里讨论的是详细规划。制定下个月或下个季度的计划是可以的，只要所有参与者知道这些计划可能需要更改，并且计划保持在适当的高层次。

一个比喻：如果你计划穿越整个国家的公路旅行，你可能希望计划经过哪些城市。你可能不想为每次加油或进餐停留做详细计划。你希望保留足够的灵活性，以便在途中遇到意外事故、天气变化或其他突发事件时能够改变路线。

迭代有效。对于大型软件项目来说，似乎没有其他方法有效。至少我从未见过其他方法奏效。

对我来说，如果迭代目标明确和清晰，迭代效果会更好。这有助于减少范围扩展。它集中工作以达到迭代目标，而不是仅仅追随当前看起来像个好主意的东西。

当我计划一个迭代时，我会将事情分解为可以在一个坐位完成的小任务。我对任务的估计分为四个桶：不到15分钟，整整一个小时，四小时或者太长。我更喜欢较短的任务：它们更容易估计，也更容易完成，而且通常会减少问题。任何太长的任务都需要进一步分解。

有些任务很难估计。调试就是一个典型例子。你要多长时间才能意识到以太网线断了，或者操作系统更新出了问题，或者找到其他意外问题的原因？调试总会发生，最好在规划中留出足够的余地来处理一些故障排除工作。

中断也经常发生。有时你别无选择，只能立即做出反应和应对。留出空间来处理这些情况。

# 用文字表达自己

您的记忆是短暂和不可靠的。您会忘记细节。您会忘记重要的事情。您会错误地记住事情。当您合作时，您和其他人将会对说过的、达成的和决定的事情有不同看法。

我曾经在一个会议上，有四个人，加上首席技术官。首席技术官禁止我们记笔记：似乎这周的时髦是记笔记会让会议变得浪费时间。会议持续了两个小时。事后，我们四个人对会议所做决定有大约八种不同的看法。之后从未采取任何后续行动。

写下来。这似乎是一项愚蠢的琐事，乏味且古老，但这是组织记忆的方式。书写是一种经常被忽视的超能力。

您的团队应该记录会议记录，至少涵盖重要决策以及会后每个人应该做的事情。使它们足够简短，易于写作和阅读。将其存档在每个人随时可以查看的地方。这有助于那些不在场的人，例如因为他们在度假，或者一年后才加入的人。

关于会议，学习如何开展有效的会议。对我有效的是提前设定议程，并提供支持材料。为会议做好准备，以免浪费每个人的时间。有一个主持人来保持讨论的方向，并设定时间框架。您的有效会议流程可能有所不同，但您应该找到适合自己的方式。

# 在工作时

进行更改时，一次只进行一个更改。如果可以的话，将要做的更改分成更小的部分更改。小的更改更容易理解，也不太可能造成灾难性后果。

自动化消除摩擦：运行测试、发布、打包、交付、部署等。尽早进行。建立一个流水线，您可以进行更改并确保软件仍然运行，并且愿意使用更改后的软件的用户可以开始使用。您能使这个流水线越顺畅，构建软件就越容易。

对每个项目使用版本控制。通过经常将更改合并到主要开发线路中来实践持续集成。

开发一个您信任的自动化测试套件：如果测试通过，您可以发布或部署到生产环境。通常这意味着在项目早期启动测试套件。确保自动化测试覆盖您关心的所有方面：目标是确保您交付给他人的东西按照预期工作。同时更新生产代码和测试代码。

多次运行测试套件以识别不稳定的测试。不要容忍不稳定的测试。

进行压力测试或负载测试，即使只是以简单的方式进行。在进行此类测试之前，您不知道您的软件和系统能否处理1万个并发用户。我的系统做不到。

在一份工作中，我们有一个系统在生产中运行良好。我们将其部署到一个流量更大的客户那里。我们的软件失败了。问题在于我们用完了TCP端口号：每个传入消息我们都发出一个HTTP请求，但我们没有重用底层的TCP连接。由于流量很大，所有可能的端口号都被占用，然后一切都停滞了。解决方法是重用TCP连接，只需一行代码的更改，然后一切都运行正常了。如果我们甚至做了最简单的负载测试，我们本可以自己发现这个问题。

如果可能，自己使用软件。这样你会更好地理解你的用户。

观察其他人如何使用软件。你将更好地理解软件的尖锐之处。真实故事：对于没有参与软件开发的人来说，如果软件对同一事物有三个不同的名称，使用起来会非常困难。看到有人因此而苦苦挣扎，这一点显而易见。

将测试人员视为帮助你发现错误的朋友。他们并非想要羞辱你。没有人是完美的，他们永远不会犯错，或者忽视细节或遗忘整个功能。不要问我怎么知道的。

# 编码建议

简单明了的代码更易于编写，更易于使其工作，更易于理解，也更易于在不破坏的情况下进行更改。尽可能简化事物，但不要过度简化。只有在证明性能提升值得时，才在性能的祭坛上牺牲简单性。

复杂性是你以为是朋友的敌人。

耦合和内聚仍然是重要的概念。

在每个项目中，概念上的清晰非常重要。同时，保持术语的一致性。混淆隐藏在清晰之处。混乱带来极大的烦恼，以及错误的必然性。

对于用户来说，速度是一个特性，但对于开发来说并非总是如此，因为匆忙过多会导致思考的时间不足。功能可能是一个误特性。

推荐阅读：

# 职业发展

你可以选择成为某个非常具体领域的深度专家，或者成为一个通才，或者两者兼顾。选择明智。也许没有错误的选择，但每个选择都有后果。

要谦虚。[做奶奶，不做祖母](https://en.wikipedia.org/wiki/Witches_(Discworld))。人们可能更尊重那位强大的女巫，但他们更喜欢那位善良的女巫。

要坦诚和公正。公平对待他人。你不必相信因果报应，但它也能起作用，所以让它为你服务，而不是反过来。

帮助和支持他人。但同时，不要让他人滥用或利用你。你不需要接受废话。设定你的界限。

当你需要帮助或陷入困境时，请寻求帮助。接受提供的帮助。

我不是谈论职业发展的合适人选，但当我做到以上这些时，事情通常会顺利进行。

# 要点

好好照顾自己。睡眠。饮食。锻炼。休息。放松。尽力照顾其他人。人是重要的。软件只是娱乐。

# 致谢

感谢 Brennen Bearnes、Richard Braakman、Tyler Cipriani、Greg Grossmeier、Hackhörnchen、Soile Mottisenkangas、Daniel Silverstone 和 Enrico Zini，对本文草稿的审阅。任何错误均属于本人。
