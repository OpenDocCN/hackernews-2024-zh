<!--yml

category: 未分类

date: 2024-05-27 15:01:22

-->

# 重新定义可观测性 | Hazel Weakly

> 来源：[https://hazelweakly.me/blog/redefining-observability/](https://hazelweakly.me/blog/redefining-observability/)

可观测性是一个颇具争议的话题，虽然它在工程战略中的作用日益增大，但我认为它的呈现方式往往会导致许多领导者忽视其价值，或者过分关注错误的事物。我将介绍目前在工程学和其他学科中广泛使用的可观测性定义，然后引入我的定义；我还将讨论激发我制定这一定义的动机以及我在其他定义中遇到的不足，特别是在理解失败模式时。

对于时间紧迫的领导者，我将尝试在这篇博文中尝试一些新的东西：我将提取出标有“领导力洞察力”的部分，以便您可以快速浏览并提取关键点。如果您觉得有用，请告诉我！

“可观测性”，或者被热衷者经常称为o11y，有两个主要的定义，人们在讨论时倾向于使用。第一个来自控制理论，第二个来自认知系统工程。

这是第一个定义：

> 可观测性是衡量系统内部状态能够从其外部输出的知识中推断出的程度。
> 
> – Rudolf E. Kálmán

这个定义是通过研究线性动态系统而得出的，并且通过该领域的思想领袖的努力而在软件工程中日益引起重视。特别是，Charity Majors经常被认为是将这一定义引入软件工程主流注意的主要（哈哈）声音之一。

每当工程师谈论可观测性时，很有可能这就是他们所指的定义。

这是第二个定义：

> 可观测性是*提供对过程洞察的反馈*，并指的是从可用数据中提取含义所需的工作。
> 
> – David D. Woods和Eric Hollnagel的《联合认知系统：认知系统工程中的模式》（Taylor & Francis，2006），第121页。

这个定义是由可爱的[Fred Hebert](https://ferd.ca/)向我提出的。如果你在与认知系统工程、韧性工程或系统安全工程领域的人交流，这可能是他们心中最有可能的定义。

现在，这是*我的*定义：

> 可观测性是一个过程，通过这个过程，一个人能够提出有意义的问题，获得有用的答案，并有效地对所学内容进行行动。
> 
> – Hazel Weakly

当然，我一点偏见也没有；这只是我很棒的自然结果，这是最好的定义（开玩笑）。话虽如此，你可能正坐在这里想知道，究竟是什么使得这些特定的定义与众不同。我们来详细讨论一下。

对我来说，一个概念的良好定义的重点在于，当你有了一个定义时，它应该作为理解一个概念的中心方式，同时影响你探索该概念的方向，并指导你理解所有*相关的*探索的含义。举例来说，我对控制理论对可观测性的定义之一的问题是，它根本没有告诉你从哪里开始，你现在在哪里，或者如何到达目标。如果你的系统是完全可观测的，而且你*知道*它是可观测的……很酷，棒极了，这很好。但是我们其他人根本不知道发生了什么，并且希望有一张地图告诉我们如何到达那里。

我对控制理论对可观测性的定义的另一个问题是，它完全将人们从方程式中移除；它并没有*真正*将他们排除在外，但当你读到那个定义时，你可能根本不会考虑到人类。说实话，你读了那个定义后，会说“啊，是的，这听起来像一个人类问题”吗？可能不会，这就是个问题。

> **领导洞察：** “可观测性”的大多数实施失败是因为它被视为工具问题，而不是战略能力。投资于可观测性更类似于商业智能和市场研究，而不是基础设施和IT。

事实上，可观测性经常被作为基础设施团队的工具出售，这就把这个概念的整体意义抛诸实施之中了。没有人购买 PowerBI 是因为他们需要投资于“超级花哨的电子表格生成功能”之类的东西，同样，你不应该因为需要一种存储系统诊断信息的方法而购买可观测性供应商，这根本没有任何道理——可观测性不是一个数据问题。

因此，控制理论的定义使得很难思考人们，它并没有给出一个起点、终点或者如何到达的策略。这不太好，那么认知系统工程的定义如何呢？

老实说，我更喜欢那个定义，我希望我们能够普及那个定义而不是控制理论的定义——尽管控制理论的定义有助于指导有效可观察性组件的实施思想，但它实际上并不能帮助从业者理解发生了什么。这并不意味着它是完美的：其中一个非常显著的缺点是它（以及控制理论的定义）缺乏背后你为什么在首位关心它的点。你有“提供对过程的洞察力”和“从中提取意义所需的工作”，老实说，你为什么在意？此外，还存在一个问题，即不真正知道你身处何地，你需要去哪里，以及如何知道你已经到达那里。

> **领导力洞察：** 对我而言，现有的可观察性定义中最明显的缺陷是无法知道要投入多少资源来开发可观察性作为一种能力，以及如何有效地投资这些资源。

这就是为什么我最喜欢我的定义的原因：

1.  我喜欢那些在本质之外捕捉到动机的概念定义

1.  对我来说，激励性的定义还包含一种内在的方向感

1.  如果我们正在定义一个能力，它应该被定义为一个无限和逐步的过程

1.  学习，如果没有行动，就不算学习；而不包含行动步骤的进化定义则不完整。

这可能是我对当前可观察性方向的最大抱怨。工程一直以来都有点像与业务的孤立状态；当然，这是可以理解的。你拥有一个非常专业化的领域，充斥着一个快速演变的内部关注点集合——难怪对其他人来说看起来完全陌生。医学领域的大部分情况也是如此，法律领域也是如此，这只是举两个例子。然而，工程领域有着世纪的黄金机会：在这里，我们拥有复杂的社会技术系统，涵盖了基本上“企业做生意的每一件事情”，而我们有这个了不起的概念：“我们需要理解我们在做什么”，我们做了什么？

我们完全搞砸了，通过定义可观察性为“具有时尚搜索引擎的吉加特规模JSON日志解析器”。真的吗？*真的吗？* 这就是我们选择的“我们解决真正严重的商业问题™”战略？

这感觉太悲剧了；这是多么浪费潜力去建立跨职能理解和沟通的途径。

所以好吧，算了，让我们抛弃当前的可观察性概念，认真地思考一下：*提出有意义的问题*意味着什么？

这对我来说意味着什么。一个有意义的问题需要几个不同的组成部分：

1.  公司中的任何人都应该能够提出一个问题

1.  对他们而言，那个问题应该是有意义的

1.  "有意义" 不受任何限制或领域的概念：如果它有意义，你应该能够提出问题。

我将进一步阐述 "有意义" 的部分，因为我认为这是特别必要的，而且大多数人对应该可能的范围有过于有限的想法。想象一下你有一群人共同合作来理解一个问题；你会有一个理解的背景，它跨越一个人的范围，并且你可以大致理解这个背景是由多个部分组成的。让我们将 "意义" 的组成部分分解成你可以结合起来得到问题范围的几个部分：

+   "垂直" 上下文指的是流程对齐的团队。

+   "水平" 上下文指的是功能区域。

+   讨论的子组的大小包括：个体、团队、垂直、组织、企业、市场等等。

+   讨论的时间跨度包括：过去、现在、未来、六个月内、每月、"每次董事会会议时"、"如果/当我们的竞争对手上市" 等等。

+   讨论的受众包括：一个服务、一个团队、一个组织、一个客户细分、一个行业、一组服务、一个集群、一台计算机等等。

+   这里还有很多可以根据你关心的内容添加的东西，但你明白我的意思。

让我们把问题 "我们是否健康" 与各种复合范围混合在一起，以便得到一些有意义的问题示例，以更具体地说明这一点。

+   我是 Team A 的工程师，负责 A1 服务。A1 服务的 `/health` 端点在 5 分钟内是否成功响应了 99.9% 的时间？

+   我是 Team A 的工程经理，负责 A1、A2 和 A3 服务；我们团队在本季度内是否在我们声明的 SLA 内与客户保持一致？

+   我们是负责 A、B 和 C 团队的高级工程经理和高级产品经理。我们是否在有效沟通，是否互相理解，是否在按照我们垂直的 OKR 以及整个组织的目标进行工作？

+   我是 Org ABC 的工程总监，我们是否在特性工作和可靠性工作之间做出了正确的权衡，以便我们可以在不牺牲工程健康、员工流失、客户满意度和财务关注的情况下最大化价值交付？

+   我是产品经理，在这 50 个特性中，哪些特性与我们的 GTM 研究所指示的需求最具协同效应，哪些可以设计成我们的工程师有空间将可靠性工作*整合到*产品实施中，以便我们可以最大化路线图速度？

+   我是一个客户成功总监，负责监督 Org ABC 的客户支持服务，我们是否正在构建合适的内部工具来最大化支持工程师的功能，同时也能理解哪些类别的客户支持可以自动化或积极预防？

+   我是工程副总裁，我们设计工程文化和工程流程的方式是否最大化了生产力，并确保开发工作与公司的核心目标保持一致？

+   我是CTO，我们是否准备好在战略上定位我们自己与市场的对抗，以及确保我们建立的能力允许我们在未来五年内快速创新？

+   我是CISO，我们的业务连续性概况如何，我们的风险概况如何，我们是否有效地与其他部门合作，以确保在成本效益方面做出适当的折衷，使我们能够顺利过渡？

我可以写出数百个这样的问题，但更重要的是，“我们是否健康”在很多方面都有意义，这将是一个不同的问题，不仅对每个问它的人来说如此，而且*每个人每次问这个问题时*也是如此。同样的问题不应该重复发生，因为当你上次问这个问题时，你已经不是同一个公司了。即使是昨天或一小时前问的问题，现在你也是一个不同的公司，有不同的背景、不同的目标、不同的信息，以及不同的一切。

> **领导力洞察**：你永远不会两次问同一个问题。这就是为什么可观察性是*过程*和*能力发展*的一部分。

如果我们能更好地理解什么是有意义的问题，那很好，但如果我们对有用的答案没有概念，那对企业来说并不是很有用。

对我来说，有用的答案也有几个不同的组成部分：

1.  答案应该通过具体行动将他们拉近实现*声明或未声明的业务目标*的距离。理论上有用或可能有用或“嗯，这很有趣”或“也许我以后会用到”并不算数。

1.  答案的实用性不应该要求答案在任何方面都是“正确”的或“事实”的。

1.  虽然问题只需要对某人有意义，但答案应该尽可能对所有人有用。

那个…… 比看起来难得多。但幸运的是，我们有一个救命稻草：放弃你对真实、事实或正确答案的渴望，去追求有意义问题的解答。

真的，我的意思是这个。我不是在“我们生活在一个后真相的世界”之类的胡说八道，我是指当你意识到每个人的背景、理解和对世界的解释都不同时，你就会明白，我们永远无法得出一个对于不绝对和客观的情况都有用的“正确性”、“真相”或“事实”的定义。这可能让你感到恐惧，但是要积极面对它，让它解放你。答案只有在能让你采取具体行动的情况下才是有用的：仅此而已。

> **领导力洞察**：如果你在问一个有意义的问题，它不会有一个客观的答案；它因为含义本身是主观的定义，所以是主观的。

你知道那句每个人都喜欢引用的话吗？“不同意但执行”？我讨厌它。我认为它造成的伤害远大于好处，因为它经常被断章取义地引用，并经常被领导层用作向下强制一致的武器，而它最初的意图是提醒领导人信任他们雇佣的人。

话虽如此，如果你接受信任与你共事的人的概念，并且摒弃了反对和侵略性的框架，你会得到一些真正酷的东西：信任人们提出的问题，并利用他们学到的答案。

摒弃“不同意但执行”，拥抱“提出有意义的问题，得到有用的答案，并根据所学行动”。作为领导者，你的工作是帮助尽可能多地使答案对业务有意义。

现在我想解释一下我定义中的另一个部分，即我们有这个过程，它是一个通过这个过程开发能力的过程。那意味着什么？这意味着你一开始对它毫无头绪，这其实是一种特征，而不是一个缺陷™。

回想一下你第一次尝试在工程、市场营销、销售或职业生涯的其他任何领域做任何事情时的情况。不仅对某事不擅长是自然的，而且实际上是一件好事；犯错是学习过程本身不可或缺的一部分。通过纠正、演化、增强和迭代，你培养了许多重要的技能并磨练了直觉。如果你没有这些，并且只是做出了正确的选择，那么你并不聪明，你只是幸运而已。领导者之所以不喜欢依赖运气，是因为运气不可扩展，而依赖运气是件非常糟糕的事情。

对我而言，对可观测性的意义在于，刚开始时，你的问题在广度、深度、范围和细微之处都会受到严重限制。但这没关系！简单的问题仍然是有意义的问题。我看到很多人在这个问题上经常被绊倒，所以我想在这里重点强调一下。

在一个持续的迭代开发过程中，进展本身就是输出。你不能在没有先提出简单问题的情况下问一个复杂的问题；这不是它的工作方式。想象一下参加财务规划会议，问道：“嘿，我们各个业务单位的折现现金流分析是多少？”而大家还在忙着澄清每个业务单位需要宣布的资本支出与运营支出。不仅你完全与每个人擦肩而过并使整个会议失控，而且*你将得到错误的答案*，并且在未掌握基础知识前尝试这样问一个问题将使你未来失败。

> **领导洞察：** 提出基础问题并不是无能的表现，而是信任过程并发展你的可观测性“肌肉”的表现。

对于计算机系统而言，你的基础问题可能看起来像这样（按复杂度递增的顺序）：

1.  “我们的服务在内部可达吗”

1.  “我们的服务在外部可达吗”

1.  好的，很酷，很酷，可用性是个谎言，无论如何：我们的可用性到底是多少？

1.  我们的服务表现得合理吗？

1.  我们的服务在成本上是否合理有效？

    +   这是“传统”监控通常停止的地方。

1.  重复以上所有步骤，但针对每个子服务。

1.  重复以上所有步骤，但针对每个端点。

    +   这是“现代可观性”真正开始显著不同的地方。

1.  重复以上所有步骤，但从个体最终用户的角度来看。

    +   这是SLO真正开始成为提问工具的必要性的地方。

1.  从个体最终用户的角度来看，每个链中的每个点的端到端请求的性能如何？

    +   这需要分布式跟踪。

1.  这些各种调优选项中哪个性能特征最好？

    +   A/B 测试和其他变化功能在这里变得非常宝贵。

1.  我们的系统在可能没有考虑到的各种情况下表现如何？

    +   这是混沌测试、故障注入和其他实验策略开始的地方。

1.  系统中最有效的点在于利用人类进行适应能力。

    +   （你的下一个10亿美元创业公司在这里）

因此看看这个，再看看你的公司，你会注意到很多公司实际上只处于1-3之间。这没问题！只要你能够对业务有意义的问题不被任何更复杂的东西捕捉到，就完全可以不再进一步发展。毕竟，如果你没有需要问更微妙的问题，为什么需要在可观性策略上进一步发展更高的复杂性呢？

一些公司深刻需要能够在各种意想不到的领域中询问人类和技术如何相互作用的非常微妙的问题，而且在非常严格的操作限制下有很多未知的未知因素。有些公司只需知道“代码输入，赚钱”，这并不是业务的失败；这里唯一的失败是过度投资于你的需求之外。

> **领导洞察：** 话虽如此，虽然可观性的唯一失败是过度投资于你的需求之外，但大多数公司在可观性上投入过多或过少。

根据我的经验，我看到大多数公司在可观性上投入了过多的资金，但回报很少，因为他们一直把它视为技术和工具问题，而不是研究能力。

我们有控制理论定义的可观性，以及认知系统工程定义的可观性，然后我提出了我的可观性定义：

> 可观性是一个过程，通过这个过程，你能够提出有意义的问题，获得有用的答案，并有效地行动。

我们还讨论了“有意义的问题”和“有用的答案”是什么意思，我们还讨论了发展能力的过程。当我们结合这两者时，我们得到了某种程度上真的让我想起了德雷福斯技能习得模型中的五个级别（新手、初学者、能干的、精通的、专家）。

而说实话，我喜欢这一点；你绝对应该把可观察性看作是发展组织广泛能力的一个过程，这是问出有意义问题并得到有用答案的过程。当然，一旦你得到了有用的答案，你就完成了最后一步：采取行动。

学习，如果没有行动，不算学习；它本质上是一个过程。而过程呢？过程是混乱的，它们需要行动，需要动作，需要*做*，需要重新评估过程，需要演进过程，需要与人类条件本身打交道。

就像可观察性一样。

简单来说，可观察性就是组织学习的过程。
